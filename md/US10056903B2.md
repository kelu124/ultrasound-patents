Source: [US10056903B2](https://patents.google.com/patent/US10056903B2)

# [US10056903B2](US10056903B2.md) - [US10056903B2](US10056903B2.md) - Low power multilevel driver

## Details

* Date: 2016-04-28
* Inventor: Kandou Labs SA
* Beneficiary: Omid Talebi Amiri, Richard Simpson

## Other patents

### Backwards
 * US668687A
 * US780883A
 * US3196351A
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4276543A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4722084A
 * US4772845A
 * US4774498A
 * US4864303A
 * US4897657A
 * [US4974211A](US4974211A.md)
 * US5017924A
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5266907A
 * US5283761A
 * US5287305A
 * US5311516A
 * US5331320A
 * [US5412689A](US5412689A.md)
 * US5449895A
 * US5459465A
 * US5461379A
 * US5511119A
 * US5553097A
 * US5566193A
 * US5599550A
 * US5626651A
 * US5629651A
 * US5659353A
 * US5727006A
 * US5748948A
 * US5802356A
 * [US5825808A](US5825808A.md)
 * US5856935A
 * US5875202A
 * US5945935A
 * US5949060A
 * US5982954A
 * US5995016A
 * US5999016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6119263A
 * US6172634B1
 * US6175230B1
 * US6232908B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US6316987B1
 * US20010055344A1
 * US6346907B1
 * US20020034191A1
 * US20020044316A1
 * US6378073B1
 * US20020057592A1
 * US6398359B1
 * US6404820B1
 * US6417737B1
 * US6433800B1
 * [US6452420B1](US6452420B1.md)
 * US20020154633A1
 * US6473877B1
 * US20020163881A1
 * US20020167339A1
 * US6483828B1
 * US20020174373A1
 * US20020181607A1
 * US6509773B2
 * US20030016770A1
 * US6522699B1
 * US20030046618A1
 * [US6556628B1](US6556628B1.md)
 * US20030085763A1
 * US6563382B1
 * JP2003163612A
 * US20030146783A1
 * US6621427B2
 * US20030174023A1
 * US6624699B2
 * US20030185310A1
 * US6650638B1
 * US20030218558A1
 * [US6661355B2](US6661355B2.md)
 * US6664355B2
 * US6690739B1
 * US20040027185A1
 * [US6766342B2](US6766342B2.md)
 * US20040146117A1
 * US6772351B1
 * US20040155802A1
 * US20040161019A1
 * US20040169529A1
 * US6839587B2
 * [US6839429B1](US6839429B1.md)
 * WO2005002162A1
 * US6854030B2
 * US6865236B1
 * US6865234B1
 * US20050063493A1
 * US6876317B2
 * US20050134380A1
 * US6927709B2
 * US20050174841A1
 * US20050195000A1
 * US20050201491A1
 * US20050213686A1
 * US20050220182A1
 * [US6954492B1](US6954492B1.md)
 * US6963622B2
 * US6972701B2
 * US6973613B2
 * US6976194B2
 * [US6990138B2](US6990138B2.md)
 * US6993311B2
 * US6991038B2
 * [US6999516B1](US6999516B1.md)
 * US20060036668A1
 * US7023817B2
 * US7039136B2
 * US20060097786A1
 * US20060103463A1
 * US7053802B2
 * US20060120486A1
 * US20060126751A1
 * US20060133538A1
 * US20060140324A1
 * US7080288B2
 * US20060159005A1
 * US7082557B2
 * US7085153B2
 * US20060233291A1
 * US7127003B2
 * CN1864346A
 * [US7142612B2](US7142612B2.md)
 * US7142865B2
 * US20070001723A1
 * US20070002954A1
 * US7164631B2
 * US7167019B2
 * US20070030796A1
 * US7176823B2
 * [US7180949B2](US7180949B2.md)
 * US7199728B2
 * US20070103338A1
 * US20070121716A1
 * US7231558B2
 * US20070204205A1
 * US7269130B2
 * US7269212B1
 * US20070263711A1
 * US20070283210A1
 * US20080007367A1
 * US20080012598A1
 * US7335976B2
 * US7336112B1
 * US7339990B2
 * US7346819B2
 * US7348989B2
 * US7356213B1
 * US7358869B1
 * US7362697B2
 * US7366942B2
 * US20080104374A1
 * US7370264B2
 * US7372390B2
 * EP1926267A1
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US7397302B2
 * US7400276B1
 * US20080192621A1
 * US7462956B2
 * US20080317188A1
 * US7496162B2
 * US20090059782A1
 * US20090115523A1
 * US7535957B2
 * US7539532B2
 * US20090154604A1
 * CN101478286A
 * WO2009084121A1
 * US20090195281A1
 * US7599390B2
 * US20090262876A1
 * US7613234B2
 * US7616075B2
 * US7620116B2
 * [US7633850B2](US7633850B2.md)
 * US20090316730A1
 * US7639596B2
 * US20090323864A1
 * US7650525B1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US20100081451A1
 * US7694204B2
 * US7698088B2
 * US7697915B2
 * US7706456B2
 * US7706524B2
 * US20100148819A1
 * US20100180143A1
 * US7768312B2
 * US20100215087A1
 * US20100215112A1
 * US7787572B2
 * US20100235673A1
 * US7804361B2
 * US7808456B2
 * US20100296556A1
 * US7841909B2
 * US20100309964A1
 * US7869546B2
 * US7869497B2
 * US20110014865A1
 * US7882413B2
 * US7899653B2
 * US20110051854A1
 * US20110072330A1
 * US20110084737A1
 * US7933770B2
 * US20110103508A1
 * US8000664B2
 * US20110228864A1
 * WO2011119359A2
 * US8030999B2
 * US8036300B2
 * US8050332B2
 * US20110268225A1
 * US8055095B2
 * US8064535B2
 * [US20110299555A1](US20110299555A1.md)
 * US20110302478A1
 * US8085172B2
 * US20110317559A1
 * US8106806B2
 * US8149906B2
 * US20120082203A1
 * [US8159376B2](US8159376B2.md)
 * US8180931B2
 * US8185807B2
 * US8199849B2
 * US8199863B2
 * US20120152901A1
 * US20120161945A1
 * US8218670B2
 * US8233544B2
 * US8245094B2
 * US20120213299A1
 * US8253454B2
 * US8279745B2
 * US8279094B2
 * US20120257683A1
 * US8289914B2
 * US8295250B2
 * US8295336B2
 * US8310389B1
 * US8341492B2
 * US20130010892A1
 * US20130013870A1
 * US8359445B2
 * US8365035B2
 * EP2039221B1
 * US8406316B2
 * US8429492B2
 * US8429495B2
 * US8437440B1
 * US20130114519A1
 * US8443223B2
 * US8442099B1
 * US20130129019A1
 * US20130147553A1
 * US8472513B2
 * US20130188656A1
 * US8498368B1
 * US20130195155A1
 * US20130202065A1
 * US8520348B2
 * US8547272B2
 * US20130259113A1
 * US20130271194A1
 * US8578246B2
 * US8588254B2
 * US8593305B1
 * US20130315501A1
 * US20130314142A1
 * US8604879B2
 * US8602643B2
 * US20130346830A1
 * US8620166B2
 * US8638241B2
 * US8643437B2
 * US8649556B2
 * US8649460B2
 * US8649840B2
 * US8674861B2
 * US8687968B2
 * US8718184B1
 * US20140159769A1
 * US8755426B1
 * US8773964B2
 * US8780687B2
 * US8782578B2
 * US8831440B2
 * US8879660B1
 * US8898504B2
 * US8938171B2
 * US8951072B2
 * US8975948B2
 * US20150070201A1
 * US20150078479A1
 * US8989317B1
 * US9036764B1
 * US20150146771A1
 * US9059816B1
 * US9069995B1
 * US9077386B1
 * US9083576B1
 * US9093791B2
 * US9100232B1
 * US9124557B2
 * US20150249559A1
 * US9148087B1
 * US9152495B2
 * US9172412B2
 * US9178503B2
 * US9183085B1
 * US20150333940A1
 * US9197470B2
 * US20150349835A1
 * US20150380087A1
 * US20150381232A1
 * US20160020796A1
 * US20160020824A1
 * US20160036616A1
 * US9281785B2
 * [US9288082B1](US9288082B1.md)
 * US9292716B2
 * US9300503B1
 * US9306621B2
 * US9331962B2
 * US9374250B1
 * US9432298B1
 * US20160261435A1
 * US9455744B2
 * US9455765B2
 * US9634797B2
 * US20170310456A1
 * US20170317449A1
 * US20170317855A1
### Forward
 * 
## Abstract

Abstract

A driver for transmitting multi-level signals on a multi-wire bus is described that includes at least one current source connected to a transmission line, each current source selectively enabled to source current to the transmission line to drive a line voltage above a termination voltage of a termination voltage source connected to the transmission line via a termination impedance element, wherein each of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line, and at least one current sink connected to the transmission line, each current sink selectively enabled to sink current from the transmission line to drive a line voltage below the termination voltage, each of the at least one current sinks having an output impedance different than the characteristic impedance of the transmission line.



A driver for transmitting multi-level signals on a multi-wire bus is described that includes at least one current source connected to a transmission line, each current source selectively enabled to source current to the transmission line to drive a line voltage above a termination voltage of a termination voltage source connected to the transmission line via a termination impedance element, wherein each of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line, and at least one current sink connected to the transmission line, each current sink selectively enabled to sink current from the transmission line to drive a line voltage below the termination voltage, each of the at least one current sinks having an output impedance different than the characteristic impedance of the transmission line.

CROSS REFERENCE TO RELATED APPLICATIONS
This application claims the benefit of U.S. Provisional Application No. 62/328,722, filed Apr. 28, 2016, entitled “Low Power Multilevel Driver,” reference of which is hereby incorporated in its entirety.
REFERENCES
The following prior applications are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication No. 2011/0268225 of U.S. patent application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter identified as [Cronie I]).
U.S. Pat. No. 9,100,232, issued Aug. 4, 2015, naming Amin Shokrollahi, Ali Hormati, and Roger Ulrich, entitled “Method and Apparatus for Low Power Chip-to-Chip Communications with Constrained ISI Ratio” (hereinafter identified as [Shokrollahi I]);
U.S. patent application Ser. No. 14/315,306, filed Jun. 25, 2014, naming Roger Ulrich, entitled “Multilevel Driver for High Speed Chip-to-Chip Communications” (hereinafter identified as [Ulrich I]).
BACKGROUND
In communication systems, information may be transmitted from one physical location to another. Furthermore, it is typically desirable that the transport of this information is reliable, is fast and consumes a minimal amount of resources. One of the most common information transfer media is the serial communications link, which may be based on a single wire circuit relative to ground or other common reference, multiple such circuits relative to ground or other common reference, or multiple circuits used in relation to each other.
In the general case, a serial communications link is used over multiple time periods. In each such time period, a signal or signals over the link represents, and thus conveys, some amount of information typically measured in bits. Thus, at a high level, a serial communications link connects a transmitter to a receiver and the transmitter transmits a signal or signals each time period, the receiver receives signal or signals approximating those transmitted (as the result of signal degradation over the link, noise, and other distortions.) The information being conveyed by the transmitter is “consumed” by the transmitter, and representative signals are generated. The receiver attempts to determine the conveyed information from the signals it receives. In the absence of overall errors, the receiver can output exactly the bits that were consumed by the transmitter.
The optimum design of a serial communications link often depends on the application for which it is used. In many cases, there are trade-offs between various performance metrics, such as bandwidth (number of bits that can be conveyed per unit time and/or per period), pin efficiency (number of bits or bit equivalents that can be conveyed at one time divided by the number of wires used for that conveyance), power consumption (units of energy consumed by the transmitter, signal logic, receiver, etc. per bit conveyed), SSO resilience and cross-talk resilience, and expected error rate.
An example of a serial communications link is a differential signaling (DS) link. Differential signaling operates by sending a signal on one wire and the opposite of that signal on a paired wire; the signal information is represented by the difference between the wires rather than their absolute values relative to ground or other fixed reference. Differential signaling enhances the recoverability of the original signal at the receiver over single ended signaling (SES), by cancelling crosstalk and other common-mode noise. There are a number of signaling methods that maintain the desirable properties of DS while increasing pin-efficiency over DS. Many of these attempts operate on more than two wires simultaneously, using binary signals on each wire, but mapping information in groups of bits.
Vector signaling is a method of signaling. With vector signaling, pluralities of signals on a plurality of wires are considered collectively although each of the plurality of signals may be independent. Each of the collective signals is referred to as a component and the number of plurality of wires is referred to as the “dimension” of the vector. In some embodiments, the signal on one wire is entirely dependent on the signal on another wire, as is the case with DS pairs, so in some cases the dimension of the vector may refer to the number of degrees of freedom of signals on the plurality of wires instead of the number of wires in the plurality of wires.
With binary vector signaling, each component takes on a coordinate value (or “coordinate”, for short) that is one of two possible values. As an example, eight SES wires may be considered collectively, with each component/wire taking on one of two values each signal period. A “code word” of this binary vector signaling is one of the possible states of that collective set of components/wires. A “vector signaling code” or “vector signaling vector set” is the collection of valid possible code words for a given vector signaling encoding scheme. A “binary vector signaling code” refers to a mapping and/or set of rules to map information bits to binary vectors. In the example of eight SES wires, where each component has a degree of freedom allowing it to be either of the two possible coordinates, the number of code words in the collection of code words is 2^8, or 256. As with SES or DS links, output drivers used with a binary vector signaling code need only emit two distinct voltage- or current-levels, corresponding to the two possible coordinate values for each vector element.
With non-binary vector signaling, each component has a coordinate value that is a selection from a set of more than two possible values. A “non-binary vector signaling code” refers to a mapping and/or set of rules to map information bits to non-binary vectors. The corresponding output driver for a non-binary vector signaling code may then be configured to emit multiple voltage- or current-levels corresponding to the selected coordinate values for each vector output. Examples of vector signaling methods are described in [Cronie I].
BRIEF DESCRIPTION
A transmitter and receiver can communicate using a serial communications link, wherein the serial communications link uses signaling based on a balanced vector signaling code. The vector signaling code transmits a vector of symbols using multiple wires of the communications link in each transmit unit interval. The number of components of the vector can be two, three, four, or more than four. The number of coordinate values for a component can be two, three, four, or more than four. For example, a link might use four components with four possible coordinate values: a high value, a low value, and inverses of the high and low values, such that a signal having the high value cancels out three signals having the inverse of the low value and a signal having the inverse of the high value cancels out three signals having the low value and, in this manner, the link can convey three bits in a signal period using those four components by mapping the eight possible three bit combinations onto the eight vector code words represented by the four permutations of one high value and three inverses of the low value plus the four permutations of the inverse of one high value and three low values. In a more specific embodiment, the high and low values are voltage values and relative to a reference, the high value and its inverse have the same magnitude but opposite signs, the low value and its inverse have the same magnitude but opposite signs, and the high value has a magnitude three times the low value. As another example, a different link might use three components chosen from three possible coordinate values: a positive value, a smaller positive value, and a smallest positive value or zero, such that the sum of all vector component values is a constant. Such a code is also balanced, albeit with an additional offset or DC component superimposed upon all possible coordinate values as is common practice in embodiments relying on single-ended power supplies.
In at least one embodiment, a driver for transmitting multi-level signals on a multi-wire bus is described that includes at least one current source connected to a transmission line, each current source selectively enabled to source current to the transmission line to drive a line voltage above a termination voltage of a termination voltage source connected to the transmission line via a termination impedance element, wherein each of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line, and at least one current sink connected to the transmission line, each current sink selectively enabled to sink current from the transmission line to drive a line voltage below the termination voltage, each of the at least one current sinks having an output impedance different than the characteristic impedance of the transmission line.
In some embodiments, the termination impedance is matched to the characteristic impedance of the transmission line. In some embodiments, the apparatus further comprising at least one transmit impedance element connecting at least one current source or at least one current sink to the transmission line. In some embodiments, at least one transmit impedance connects both a current source and a current sink to the transmission line.
In some embodiments, each current source and current sink includes a corresponding switch configured to selectively enable sourcing or sinking of the current to the transmission line. In some embodiments, at least one of the current sources is an active current source connected to the transmission line via the corresponding switch. In some embodiments, at least one current sink is a resistive element connected to the transmission line.
In some embodiments, the transmission line corresponds to a single wire of a multi-wire bus, each wire of the multi-wire bus connected to the termination voltage node by a corresponding termination impedance. In some embodiments, the apparatus further includes a switching circuit connected to a single current source or a current sink, the switching circuit configured to connect the single current source or current sink to one or more of the wires of the multi-wire bus. In some embodiments, the at least one current source and the at least one current sink are configured to collectively form at least three possible line voltage values.
In accordance with at least one embodiment, processes and apparatuses provide for transmitting data over physical channels to provide a high speed, low latency interface providing high total bandwidth at low power utilization, such as to interconnect integrated circuit chips in a multi-chip system. In some embodiments, different voltage, current, etc. levels are used for signaling and more than two levels may be used, such as a quaternary signaling system wherein each wire signal has one of four values.
This Brief Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Brief Summary is not intended to identify key or essential features of the claimed subject matter, nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 is a schematic diagram of one embodiment of a multilevel line driver.
 FIG. 2 is a schematic diagram of another embodiment of a multilevel line driver.
 FIG. 3 is a schematic diagram of one embodiment of a multilevel line driver comprising both current source and resistive sink elements.
 FIG. 4 is a switching circuit, in accordance with some embodiments.
 FIG. 5 is a block diagram of a multi-transmission line communication system, in accordance with some embodiments.
 FIG. 6 is a flowchart of a method, in accordance with some embodiments.

DETAILED DESCRIPTION
Despite the increasing technological ability to integrate entire systems into a single integrated circuit, multiple chip systems and subsystems retain significant advantages. For purposes of description and without limitation, example embodiments described herein assume a systems environment of at least one point-to-point communications interface connecting two integrated circuit chips representing a transmitter and a receiver, wherein the communications interface is supported by at least one interconnection group of more than two high-speed transmission line signal wires providing medium loss connectivity at high speed, a vector signaling code carries information from the transmitter to the receiver as simultaneously transmitted values on each wire of a group with individual values being selected from three or more levels and, the overall group is constrained by the vector signaling code to a fixed sum of levels.
Thus in one embodiment, symbol coordinate values of the H4 vector signaling code first described in [Cronie I] are transmitted as offset voltage levels from a fixed reference, as one example a +200 mV offset representing a “+1”, a −66 mV offset representing a “−⅓”, etc.
Physical Channel Characteristics
As one example of a high speed communication system, communication elements may be interconnected via a communications channel composed of at least one group of microstripline wires separated by a dielectric layer from a ground plane, providing a controlled impedance multiwire transport suitable for use with a vector signaling code. The multiple wires of the group are routed together with homogenous fabrication characteristics, to minimize variations in attenuation and propagation velocity. Further, each wire in this channel is terminated at each end in its characteristic transmission line impedance. Thus, following conventional good practice for a typical transmission line impedance of 50 ohms, signals are issued by a transmitter having a source impedance of 50 ohms, and are detected at the receiver as voltages across or current through a 50 ohm termination resistance. Current practice supports communication over such channels at rates up to tens of Gigabits per second, over distances ranging from several centimeters to a meter or more.
[Ulrich I] describes line driver embodiments compatible with these conventional channels, providing multiple signal output levels with matched output impedance, and optional Finite Impulse Response waveform shaping. [Shokrollahi I] similarly describes transmitters and receivers capable of communicating at 25 Gigabits per second per communications channel wire, over distances of up to 25 millimeters.
However, applying these practices to shorter channels may result in unnecessary power consumption and system complexity. The short propagation times and minimal transmission line variations seen in an interconnection within a single integrated circuit device may not use perfectly matched terminating impedances to permit error-free communication to occur. Thus, the embodiments described herein offer reduced line driver power consumption in those environments where matched line terminations are not implemented.
For purposes of illustration and without implying limitation, channels associated with subsequent embodiments described herein may be composed of 50 ohm impedance interconnections routed as wire groups of six to eight wires of equal length not exceeding two millimeters (e.g. between to subsystems on a single integrated circuit device, or between two integrated circuits within a multi-chip module,) operating at data rates of up to 25 Gigabits per second per wire using the receivers and vector signaling code described in [Shokrollahi I.]
Low Power Line Driver
A first embodiment of a line driver suitable for generation of up to four discrete output signal levels on a single wire is shown in the schematic of FIG. 1. Output drivers 110 and 120 are conventional CMOS tri-state output devices, e.g. capable of both sourcing and sinking current using a stacked PMOS/NMOS output structure, or presenting a high-impedance output in which neither output transistor is enabled.
Each output level is produced by enabling one output driver and setting its input to either a logic “1” or a logic “0”. Series resistors R1 and R2 form a voltage divider with termination resistor Rterm, thus the output levels seen at 130 will be a fraction of the Vdd-to-Vss output voltage swing produced by driver 110 or driver 120 at their outputs. Four output levels are possible: R1 driven high, R2 driven high, R2 driven low, and R1 driven low.
In one embodiment, R1=50 ohms, R2=250 ohms, and Rterm=50 ohms, With Vdd=0.9 volts, output levels of 675, 525, 375, and 225 mV were obtained in that particular embodiment.
Termination voltage VT represents the mid-point of the transmit output levels and thus the midpoint or bias level for Receiver 190 as well. As the example Glasswing code of [Shokrollahi I] is a balanced six wire code (i.e. all elements of that code summing to a constant value for all codewords,) the six instances of FIG. 1 needed to drive the six wires may be interconnected at node VT, with the termination voltage produced by the passive summation of the currents flowing through each wire's Rterm to the common connection at node VT, with no need for a separate termination voltage source. At least one embodiment provides a bypass capacitor between that common connection node for all termination resistors and ground. FIG. 5 illustrates an exemplary embodiment in which n drivers 510, 515, . . . , 520 are connected to the termination voltage node via corresponding termination impedance elements Rterm1, Rterm2, . . . , Rtermn.
This circuit provides significant power savings over the multilevel output driver of [Ulrich I] but does not provide a constant source impedance facing 130. Thus, there is more risk of signal reflections causing inter-symbol interference, especially if the transmission path round trip time is an appreciable fraction of a transmission unit interval. However, this will rarely be the case for extremely short channels, while the potential power savings will be of significant importance.
Illustrating that this technique is extensible, a further embodiment is shown in the schematic diagram of FIG. 2, with five tri-stateable CMOS buffers 210, 220, 230, 240, 250 with source resistors R1, R2, R3, R4, R5 producing up to ten discrete signal levels at 260 and receiver 290. As will be apparent from the two examples given, additional embodiments may be designed which support different signaling levels, different numbers of signaling levels, and different numbers of wires.
Hybrid Line Driver
The line driver embodiment illustrated in the schematic of FIG. 3 may be configured to provide even lower power operation, again provided that the transmit impedance facing the output is not constrained. As with the previous examples, termination voltage VT represents the mid-point of the multiple transmit signal levels, as well as typically also the receiver bias point. Output voltage levels greater than termination voltage VT are produced by injecting current into node 370 by asserting InC or InD which in turn closes switch 330 or 340, thus connecting current source Idd1 or Idd2 to 370, with the additional current across Rterm raising the voltage at 370. Output voltage levels less than VT are produced by removing current from node 370 by asserting InA or InB which in turn closes switch 350 or 360, thus connecting transmit impedance resistors R1 or R2 to 370 and lowering the voltage seen across Rterm and thus by receiver 390. Although active current sinks can be used for current removal, practical design considerations favor the simpler approach of resistive current sinking. While it may be feasible to obtain 16 various voltage levels by selectively enabling and disabling inputs In A/B/C/D, some embodiments may utilize a subset. For example, for the Glasswing encoding scheme referenced below, only 1 input In A/B/C/D may be enabled at a time, producing the 4 possible voltage levels corresponding to symbol values ±1, ±⅓.
In one embodiment, switches 330, 340, 350, 360 are MOS transistors, and termination voltage VT at the termination voltage node is produced as previously described, by interconnecting each wire instance of FIG. 3 at VT with an optional bypass capacitor from that interconnection node to ground. In one particular embodiment, R1=100 ohms, R2=0 ohms, and Rterm=50 ohms, with current sources of 3 mA and 1.5 mA. With Vdd=0.9 V, output levels of 450, 300, 150, and 0 mV were obtained in that particular embodiment.
Switched circuit elements are used to pass current from current sources Idd1 and Idd2, because in practice directly enabling/disabling of a current source has been found to be too slow. Such switching also suggests a further optimization. Just as the termination voltage VT appears as a consensus or aggregate result of the interconnection of all termination resistors from wires carrying a balanced vector signaling code, the characteristics of the code may be used to optimize the design and usage of the current sources Idd1 and Idd2. As one example, [Shokrollahi I] teaches that every Glasswing or 5b6w codeword contains exactly one “+1” symbol, and exactly two “+⅓” symbols. Thus, of the six instances of FIG. 3 (one instance for each of six wires) needed to output that code, only one will use the current source producing the “+1” output level, and exactly two will use the current source producing the “+⅓” level. Because of this consistent usage pattern, another embodiment uses a single “+1” current source across all six instances, and configures the associated selection switches as a “1 of 6” switching circuit, directing that current to the wire requiring that symbol value for the code word being output. Similarly, two current sources may be shared among six wires for the “+⅓” output level. (As an alternative embodiment, a single current source providing twice the current could potentially be shared between the two wires requiring a “+⅓” output, at the risk of uneven current sharing.) With the resistor and current values previously described for the particular embodiment, a total current consumption of 6 mA (one 3 mA current source shared among six wires, and two 1.5 mA current sources shared among six wires) will support an entire 5b6w interface. Similar optimizations may be obtained for other vector signaling codes.
 FIG. 4 is a schematic of a switching circuit configured to direct the current of Idd1 to one of a plurality wires of the multi-wire bus. As shown, current source Idd1 is connect to n switches, each switch connected to a respective wire of the multi-wire bus. In the embodiment above where Idd1 corresponds to a “+1” symbol, only one of the switches 410/420/430 may be enabled at a given time. A similar circuit may be used for the current source corresponding to the “+⅓” symbol, as well as the current sinks corresponding to the “−1” and “−⅓” symbols. Alternatively, current source Idd1 may correspond to a value of “+⅔”, and may be simultaneously connected to two wires, providing each wire with a level of “+⅓”.
 FIG. 6 is a flowchart of a method 600, in accordance with some embodiments. As shown, FIG. 6 includes obtaining 602 at least one control bit identifying a symbol of a codeword of a vector signaling code. In response to obtaining the at least one control bit, the method sets 604 a line voltage on a transmission line. As shown, setting the line voltage may include selectively sourcing current 606 via at least one current source to the transmission line to drive a line voltage above a termination voltage VT of a termination voltage source connected to the transmission line via a termination impedance element Rterm, wherein each current source of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line. In order to drive the line voltage below the termination voltage, the method may selectively sink 608 current via at least one current sink from the transmission line to drive a line voltage below the termination voltage VT, each of the at least one current sinks having an output impedance different than the characteristic impedance of the transmission line.
In some embodiments, the termination impedance element Rterm is matched to the characteristic impedance of the transmission line. In some embodiments, at least one current source or at least one current sink is coupled to the transmission line via a transmit impedance, such as resistors R1 and R2 in FIGS. 1-3. In some embodiments, a current source and a current sink are coupled to the transmission line via a common transmit impedance, as shown in FIGS. 1 and 2, where a tri-state driver 110 is coupled to the transmission line 130 via transmit impedance R1. In some embodiments, selectively sourcing or sinking current comprises enabling one or more switches according to the at least one control bit. Such an embodiment is illustrated by FIG. 3 utilizing switches 330, 340, 350, and 360. In some embodiments, at least one of the current sources is an active current source, such as Idd1 and Idd2 in FIG. 3. In some embodiments, at least one current sink is a passive current sink, illustrated by resistive current sinks R1 and R2 in FIG. 3.
In some embodiments, the method further includes selectively sourcing current to and sinking current from at least a second transmission line connected to the termination voltage source via a second termination impedance element, the current selectively sourced and sunk according to control bits identifying a second symbol of the codeword of the vector signaling code. In such an embodiment, multiple instances of a driver as shown in FIGS. 1-3 may have corresponding transmission lines connected to the termination voltage source providing VT via a respective termination impedance element Rterm. Such an embodiment utilizing a multi-transmission line system is shown in FIG. 5. In some embodiments, the method further includes switching a single current source or current sink between the transmission line and the second transmission line. A switching circuit as illustrated by FIG. 4 may provide such a switching function, in which a reduced number of current sources are used and switched between each transmission line of the plurality of transmission lines. In some embodiments, the line voltage is set to one of at least three possible values.
Example signal levels, signal frequencies, and physical dimensions described herein are provided for purposes of explanation, and are not limiting. Different vector signaling codes may be used, communicated using more or fewer wires per group, fewer or greater numbers of signal levels per wire, and/or with different code word constraints. For convenience, signal levels are described herein as voltages, rather than their equivalent current values.
Other embodiments may utilize different signaling levels, connection topology, termination methods, and/or other physical interfaces, including optical, inductive, capacitive, or electrical interconnection. Similarly, examples based on unidirectional communication from transmitter to receiver are presented for clarity of description; combined transmitter-receiver embodiments and bidirectional communication embodiments are also explicitly in accordance with some embodiments.
The examples presented herein illustrate the use of vector signaling codes carried by parallel transmission line interconnections for intra-chip and chip-to-chip communication. However, those exemplary details should not been seen as limiting the scope of the described embodiments. The methods disclosed in this application are equally applicable to other interconnection topologies and other communication media including optical, capacitive, inductive, and wireless communications which may rely on any of the characteristics of the described embodiments, including but not limited to communications protocol, signaling methods, and physical interface characteristics. Thus, descriptive terms such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “current”, “optical intensity”, “RF modulation”, etc. As used herein, the term “signal” includes any suitable behavior and/or attribute of a physical phenomenon capable of conveying information. The information conveyed by such signals may be tangible and non-transitory.

We claim:
 
1. An apparatus comprising:
a voltage termination node connected to a plurality of transmission lines via a plurality of termination impedance elements, the voltage termination node having a termination voltage corresponding to a summation of a plurality of currents flowing through the plurality of termination impedance elements, each current of the plurality of currents corresponding to a respective symbol of a plurality of symbols of a balanced codeword of a vector signaling code, each symbol of the plurality of symbols of the balanced codeword having a symbol value selected from a set of at least three symbol values;
a plurality of multi-level drivers, each multi-level driver connected to a respective transmission line of the plurality of transmission lines and to the voltage termination node via a respective termination impedance element of the plurality of termination impedance elements, each multi-level driver configured to generate a corresponding current of the plurality of currents, each multi-level driver comprising:
at least one current source connected to the respective transmission line, each current source selectively enabled to source current to the respective transmission line to drive a line voltage above the termination voltage of the termination voltage node connected to the transmission line via the respective termination impedance element of the plurality of termination impedance elements, wherein each of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line; and
at least one current sink connected to the respective transmission line, each current sink selectively enabled to sink current from the transmission line to drive a line voltage below the termination voltage, each of the at least one current sinks having an output impedance different than the characteristic impedance of the transmission line.



  
2. The apparatus of claim 1, wherein the termination impedance is matched to the characteristic impedance of the respective transmission line.

  
3. The apparatus of claim 1, wherein each multi-level driver further comprises at least one transmit impedance element connecting at least one current source or at least one current sink to the respective transmission line.

  
4. The apparatus of claim 1, wherein each current source and current sink comprises a corresponding switch configured to selectively enable sourcing or sinking of the current to the respective transmission line.

  
5. The apparatus of claim 4, wherein at least one of the current sources is an active current source connected to the respective transmission line via the corresponding switch.

  
6. The apparatus of claim 1, wherein at least one current sink is a resistive element connected to the respective transmission line.

  
7. The apparatus of claim 1, further comprising a switching circuit connected to a single current source or a current sink, the switching circuit configured to connect the single current source or current sink to one or more transmission lines of the plurality of transmission lines.

  
8. The apparatus of claim 1, wherein the voltage termination node comprises a capacitor configured to maintain the termination voltage.

  
9. A method comprising:
obtaining a plurality of control bits identifying a plurality of symbols of a balanced codeword of a vector signaling code, each symbol of the plurality of symbols of the balanced codeword having a symbol value selected from a set of at least three symbol values;
in response to obtaining the plurality of control bits, setting a line voltage on a plurality of transmission lines connected to a voltage termination node via a plurality of termination impedance elements, the voltage termination node having a termination voltage corresponding to a summation of a plurality of currents flowing through the plurality of termination impedance elements, each current of the plurality of currents corresponding to a respective symbol of the plurality of symbols of the balanced codeword, wherein setting the line voltage on each respective transmission line of the plurality of transmission lines comprises:
selectively sourcing current via at least one current source to the respective transmission line to drive the line voltage above the termination voltage of the termination voltage node connected to the respective transmission line via a respective termination impedance element of the plurality of termination impedance elements, wherein each of the at least one current sources has an output impedance different than a characteristic impedance of the transmission line; and
selectively sinking current via at least one current sink from the respective transmission line to drive the line voltage below the termination voltage, each of the at least one current sinks having an output impedance different than the characteristic impedance of the respective transmission line.



  
10. The method of claim 9, wherein the termination impedance element is matched to the characteristic impedance of the respective transmission line.

  
11. The method of claim 9, wherein at least one current source or at least one current sink is coupled to the respective transmission line via a transmit impedance.

  
12. The method of claim 9, wherein selectively sourcing or sinking current comprises enabling one or more switches according to the plurality of control bits.

  
13. The method of claim 9, wherein at least one of the current sources is an active current source.

  
14. The method of claim 9, wherein at least one current sink is a passive current sink.

  
15. The method of claim 9 further comprising switching a single current source or current sink between one or more transmission lines of the plurality of transmission lines.

  
16. The method of claim 9, wherein the termination voltage is maintained by charging and discharging a capacitor connected to the voltage termination node according to the plurality of currents.