Source: [US9288082B1](https://patents.google.com/patent/US9288082B1)

# [US9288082B1](US9288082B1.md) - Circuits for efficient detection of vector signaling codes for chip-to-chip communication using sums of differences

## Details

* Date: 2010-05-20
* Inventor: Kandou Labs SA
* Beneficiary: Roger Ulrich, Peter Hunt

## Other patents

### Backwards
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4864303A
 * [US4974211A](US4974211A.md)
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5283761A
 * [US5412689A](US5412689A.md)
 * US5511119A
 * US5553097A
 * US5599550A
 * US5659353A
 * [US5825808A](US5825808A.md)
 * US5995016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6172634B1
 * US6175230B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US20010055344A1
 * US20020034191A1
 * US20020044316A1
 * US20020057592A1
 * US20020057292A1
 * US6404820B1
 * US6417737B1
 * [US6452420B1](US6452420B1.md)
 * US20020174373A1
 * US6509773B2
 * US20030048210A1
 * US20030071745A1
 * [US6556628B1](US6556628B1.md)
 * US6563382B1
 * US20030105908A1
 * JP2003163612A
 * US20030146783A1
 * US6650638B1
 * [US6661355B2](US6661355B2.md)
 * US20030227841A1
 * US20040057525A1
 * US20040086059A1
 * [US6766342B2](US6766342B2.md)
 * [US6839429B1](US6839429B1.md)
 * US20050149833A1
 * US20050152385A1
 * US20050174841A1
 * [US6954492B1](US6954492B1.md)
 * US20050286643A1
 * [US6990138B2](US6990138B2.md)
 * US20060018344A1
 * [US6999516B1](US6999516B1.md)
 * US7053802B2
 * US20060159005A1
 * US7085153B2
 * [US7142612B2](US7142612B2.md)
 * US20060269005A1
 * US7167019B2
 * [US7180949B2](US7180949B2.md)
 * US20070260965A1
 * US20070263711A1
 * US20070283210A1
 * US7356213B1
 * US7358869B1
 * US20080104374A1
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US20080169846A1
 * US20080273623A1
 * US20090059782A1
 * US20090092196A1
 * US20090132758A1
 * US20090154500A1
 * US20090163612A1
 * CN101478286A
 * WO2009084121A1
 * US20090185636A1
 * US20090193159A1
 * US20090212861A1
 * US20090228767A1
 * US20090257542A1
 * [US7633850B2](US7633850B2.md)
 * US20100020898A1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US7706524B2
 * US20100104047A1
 * US20100180143A1
 * US20100177816A1
 * US20100205506A1
 * US7787572B2
 * US20100296550A1
 * US20110014865A1
 * US7882413B2
 * US20110051854A1
 * US20110084737A1
 * US7933770B2
 * WO2011119359A2
 * US20110268225A1
 * US8064535B2
 * [US20110299555A1](US20110299555A1.md)
 * US20110302478A1
 * US20110317559A1
 * US20120063291A1
 * [US8159376B2](US8159376B2.md)
 * US8159375B2
 * US20120213299A1
 * US8279094B2
 * US20130010892A1
 * EP2039221B1
 * US8429495B2
 * US8442099B1
 * US8443223B2
 * US20130163126A1
 * US8547272B2
 * US8588280B2
 * US8593305B1
 * US8649460B2
 * US8718184B1
 * US8782578B2
 * US20140198837A1
 * US20140254730A1
 * US20150078479A1
 * US8989317B1
### Forward
 * [US20110299555A1](US20110299555A1.md)
 * US20160013954A1
 * US9524106B1
 * US9544015B2
 * US9577664B2
 * [US9686106B2](US9686106B2.md)
 * [US9686107B2](US9686107B2.md)
 * [US9692381B2](US9692381B2.md)
 * US9692555B2
 * US9806761B1
 * US9819522B2
 * [US9832046B2](US9832046B2.md)
 * [US9838234B2](US9838234B2.md)
 * US9838017B2
 * US9852806B2
 * [US9893911B2](US9893911B2.md)
 * [US9906358B1](US9906358B1.md)
 * US9929818B2
 * US9985634B2
 * [US9985745B2](US9985745B2.md)
 * [US10003424B2](US10003424B2.md)
 * [US10003454B2](US10003454B2.md)
 * [US10003315B2](US10003315B2.md)
 * [US10057049B2](US10057049B2.md)
 * [US10056903B2](US10056903B2.md)
 * [US10091035B2](US10091035B2.md)
 * [US10116468B1](US10116468B1.md)
 * [US10153591B2](US10153591B2.md)
 * [US10200218B2](US10200218B2.md)
 * [US10200188B2](US10200188B2.md)
 * US10203226B1
 * US10243614B1
 * US10243765B2
 * [US10277431B2](US10277431B2.md)
 * [US10326623B1](US10326623B1.md)
 * US10324876B2
 * [US10333749B2](US10333749B2.md)
 * [US10333741B2](US10333741B2.md)
 * WO2019133897A1
 * US10355756B2
 * [US10372665B2](US10372665B2.md)
 * US10468078B2
 * [US10467177B2](US10467177B2.md)
 * [US10554380B2](US10554380B2.md)
 * US10666297B2
## Abstract

Abstract

In a detection circuit, inputs correspond to received indications of vector signaling code words received by a first integrated circuit from a second integrated circuit. With four inputs, the circuit compares a first pair to obtain a first difference result and compares a second pair, disjoint from the first pair, to obtain a second difference result. The first and second difference results are then summed to form an output function. A system might use a plurality of such detection circuits to arrive at an input word. The circuit can include amplification, equalization, and input selection with efficient code word detection. The vector signaling code can be a Hadamard matrix code encoding for three input bits. The circuit might also have frequency-dependent gain, a selection function that directs one of the summation function result or the first difference result to the output function, variable gain, and/or a slicer.



In a detection circuit, inputs correspond to received indications of vector signaling code words received by a first integrated circuit from a second integrated circuit. With four inputs, the circuit compares a first pair to obtain a first difference result and compares a second pair, disjoint from the first pair, to obtain a second difference result. The first and second difference results are then summed to form an output function. A system might use a plurality of such detection circuits to arrive at an input word. The circuit can include amplification, equalization, and input selection with efficient code word detection. The vector signaling code can be a Hadamard matrix code encoding for three input bits. The circuit might also have frequency-dependent gain, a selection function that directs one of the summation function result or the first difference result to the output function, variable gain, and/or a slicer.

CROSS REFERENCES
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication No. 2011/0268225 of application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”);
U.S. Patent Publication No. 2011/0302478 of application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Resilience and SSO Resilience” (hereinafter “Cronie II”);
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli, entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes” (hereinafter “Cronie III”).
U.S. patent application Ser. No. 13/463,742, filed May 3, 2012, naming Harm Cronie and Amin Shokrollahi, entitled “Finite State Encoders and Decoders for Vector Signaling Codes” (hereinafter called “Cronie IV”).
U.S. patent application Ser. No. 13/844,331, filed Mar. 15, 2013, naming Harm Cronie and Brian Holden, entitled “Sorting Decoder” (hereinafter called “Cronie V”.)
U.S. patent application Ser. No. 13/603,107, filed Sep. 4, 2012, naming Brian Holden and Amin Shokrollahi, entitled “Methods and Systems for Selection of Unions of Vector Signaling Codes for Power and Pin Efficient Chip-to-Chip Communication” (hereinafter “Holden I”).
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi, and Anant Singh, entitled “Methods and Systems for Skew Tolerance in and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication” (hereinafter “Holden II”).
TECHNICAL FIELD
The present invention relates to communications in general and in particular to the transmission of signals capable of conveying information and detection of those signals in chip-to-chip communication.
BACKGROUND
In communication systems, a goal is to transport information from one physical location to another. It is typically desirable that the transport of this information is reliable, is fast and consumes a minimal amount of resources. One common information transfer medium is the serial communications link, which may be based on a single wire circuit relative to ground or other common reference, multiple such circuits relative to ground or other common reference, or multiple circuits used in relation to each other. A common example of the latter uses differential signaling (“DS”). Differential signaling operates by sending a signal on one wire and the opposite of that signal on a matching wire. The signal information is represented by the difference between the wires, rather than their absolute values relative to ground or other fixed reference.
There are a number of signaling methods that maintain the desirable properties of DS while increasing pin efficiency over DS. Vector signaling is a method of signaling. With vector signaling, a plurality of signals on a plurality of wires is considered collectively although each of the plurality of signals might be independent. Each of the collective signals is referred to as a component and the number of plurality of wires is referred to as the “dimension” of the vector. In some embodiments, the signal on one wire is entirely dependent on the signal on another wire, as is the case with DS pairs, so in some cases the dimension of the vector might refer to the number of degrees of freedom of signals on the plurality of wires instead of exactly the number of wires in the plurality of wires.
With binary vector signaling, each component or “symbol” of the vector takes on one of two possible values. With non-binary vector signaling, each symbol has a value that is a selection from a set of more than two possible values. Any suitable subset of a vector signaling code denotes a “subcode” of that code. Such a subcode may itself be a vector signaling code.
Some vector signaling methods are described in Cronie I, Cronie II, Cronie III, Cronie IV, and Cronie V. While non-binary vector signaling methods can provide substantial improvements regarding the tradeoff of pin efficiency, power efficiency and noise resilience as compared to traditional signaling methods, there are some applications wherein additional improvements are possible, and sometimes necessary.
BRIEF SUMMARY
In a detection circuit, inputs correspond to received indications of vector signaling code words received by a first integrated circuit from a second integrated circuit. In a preferred embodiment, the number of inputs is four and the detection circuit compares a first pair of the inputs to obtain a first difference result and compares a second pair of inputs, disjoint from the first pair of inputs, to obtain a second difference result. The first difference result and the second difference result are then summed to form an output function. A system might use a plurality of such detection circuits to arrive at an input word.
In one embodiment, each input is from the set {−1, −1/3, 1/3, 1}, the vector signaling code comprises the union of all permutations of the symbol set {1, −1/3, −1/3, −1/3} and all permutations of the symbol set {−1, 1/3, 1/3, 1/3}, the system uses three of the detection circuits, and the eight possible vector signaling code words encode for three input bits.
In accordance with at least one embodiment of the invention, circuits and systems are described for the efficient reception and detection of vector signal coded data transmitted over physical channels such that the signals transmitted are resilient to common mode noise, do not require a common reference at the transmission and reception points, and can produce a higher pin efficiency than conventional differential signaling with relatively low power dissipation for encoding and decoding. In some embodiments, different voltage, current, etc. levels are used for signaling and more than two levels might be used, such as a ternary sparse signaling code wherein each wire signal has one of three values. The decoder can be a 4×4 Hadamard matrix decoder to decode a Hadamard matrix code with two differences/comparisons followed by a summation.
Hardware elements might be provided to provide storage for symbols of input information used for selecting code words, processing hardware to convert symbols to signals, parsing symbols into separate partitions, storing results, and providing the partitions in sequence as signals. Various embodiments are given with reference to specific hardware implementations of small area and low power dissipation. In hardware, a “function” might be implemented using specific circuit elements, active or passive, or might be implemented as a consequence of connections of a circuit interconnection. For example, a summation function might be implemented by wiring two current sources in parallel to form a three-wire junction such that the current on one wire of the connection is the sum (or inverse of the sum) of the currents on the other two wires. Alternatively, a particular circuit element could receive two physical values and output their sum.
This Brief Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Brief Summary is not intended to identify key or essential features of the claimed subject matter, nor is it intended to be used as an aid in determining the scope of the claimed subject matter. Other objects and/or advantages of the present invention will be apparent to one of ordinary skill in the art upon review of the Detailed Description and the included drawings.

BRIEF DESCRIPTION OF THE DRAWINGS
Various embodiments in accordance with the present disclosure will be described with reference to the drawings. Same numbers are used throughout the disclosure and figures to reference like components and features.
 FIG. 1 is a schematic diagram that depicts aspects of an example multiple wire communications channel utilizing encoding and decoding in accordance with at least one embodiment of the invention.
 FIG. 2 is schematic diagrams of example differential amplifier stage embodiments in accordance with the invention; FIG. 2 comprises FIGS. 2A, 2B, and 2C.
 FIG. 3 is a schematic diagram illustrating termination of receive inputs to a chip in accordance with at least one embodiment of the invention; FIG. 3 comprises FIGS. 3A, 3B, and 3C.
 FIG. 4 is a schematic diagram of a circuit combining computation function, signal multiplexing, and adjustable gain and equalization or peaking, in accordance with at least one embodiment of the invention.
 FIG. 5 is a block diagram showing use of the termination network of FIG. 3 and multiple instances of the circuit of FIG. 4 to provide a complete receive input system, in accordance with at least one embodiment of the invention.
 FIG. 6 is a block diagram showing use of signal feedback in accordance with at least one embodiment of the invention.
 FIG. 7 is a schematic diagram of another circuit combining computation function signal multiplexing, and adjustable gain and equalization or peaking, in accordance with at least one embodiment of the invention.
 FIG. 8 is a table illustrating logical values that might appear at various points in a detector in accordance with at least one embodiment of the invention.

DETAILED DESCRIPTION
Conventional communications systems receivers operate on individual wires or communications channels (i.e., single-ended signaling) or on pairs of wires or communications channels (i.e., differential signaling). In either case, a received signal is detected by comparison of a received value against a reference; for single-ended signaling, the reference may be a known voltage level such as ground or a calculated or predetermined offset voltage, while a differential receiver detects the signal of one wire in the pair in comparison to the signal of the other wire in the pair.
Such communications channels may be extended to groups of wires carrying signals that collectively represent an encoded value. FIG. 1 is a block diagram showing communications channel 140 connecting transmitting device 110 to receiving device 150 using an example a group of four wires 145 to communicate source data 100 to destination 180 using a vector signaling code produced by encoder 120 and interpreted by decoder 170. Also shown are connectors 130, 131, line receiver 160 and connectors 165, 166.
Holden I describes an enhancement to the vector signaling code technique that makes use of the observation that the balance between complementary signals in a differential signaling channel need not be held exactly to zero. Thus, a vector signaling code may comprise the union of subcodes, each subcode being distinguishable by its unique nonzero code word sum.
Vector signaling code receivers may perform a first operation similar to that of a conventional receiver, by making a first determination of the symbol represented by the particular received signal of each wire or communications channel. However, complete detection of the vector signaling code can require identification not merely of the individual symbols of that code, but of the particular code word represented by the set of symbols communicated as a group. A vector signaling code receiver is said to “detect” vector signaling code C if for each code word c, the receiver produces a valid and unique result Sc, which may directly correspond to receive result R, or may produce R via a mapping operation.
Holden II describes the use of weighted multi-input comparators for detection of vector signaling codes. A weighted multi-input comparator with coefficients a0, a1, . . . , am−1 is a circuit that accepts as its input a vector (x0, x1, . . . , xm−1) and outputs the signals indicated in Equation 1, with the definition of the sign-function being sign(x)=+1 if x>0, sign(x)=−1 if x<0, and sign(x) is undefined if x=0.

Output=sign(a0*x0+ . . . +am−1*xm−1)  (Eqn. 1)

A collection of such comparators each having distinct sets of input weights may serve as a detector for a vector signaling code.
Efficient Computational Element
In a detection circuit, inputs correspond to received indications of vector signaling code words received by a first integrated circuit from a second integrated circuit. In a preferred embodiment, the number of inputs is four and the detection circuit compares a first pair of the inputs to obtain a first difference result and compares a second pair of inputs, disjoint from the first pair of inputs, to obtain a second difference result. The first difference result and the second difference result are then summed to form an output function. A system might use a plurality of such detection circuits to arrive at an input word.
In one embodiment, each input is from the set {−1, −1/3, 1/3, 1}, the vector signaling code comprises the union of all permutations of the symbol set {1, −1/3, −1/3, −1/3} and all permutations of the symbol set {−1, 1/3, 1/3, 1/3}, the system uses three of the detection circuits, and the eight possible vector signaling code words encode for three input bits.
With the detection circuit performing differences ahead of performing summation, it becomes possible to provide for lowered distributed impedance and better high frequency response. In part, this is a result of capacitance appearing at lower impedance points rather than higher impedance points.
In accordance with at least one embodiment of the invention, a code herein referred to as “H4” is described. H4 is a balanced, non-sparse vector signaling code of four symbols, comprising the union of all permutations of the symbol set {1, −1/3, −1/3, −1/3} and all permutations of the symbol set {−1, 1/3, 1/3, 1/3}.
An efficient component of a detector for H4 code performs calculations of the form shown in Equation 2 where J, K, L, M are variables representing the symbol values of the four input signals values.

R=(J+L)−(K+M)  (Eqn. 2)

It may be noted that applying three instances of Equation 2 with different permutations of receive signal input values to the four variables is sufficient to detect each code word of H4. As one example and without limitation, the input permutations producing the three results R0, R1, R2 based on Equations 3, 4 and 5 are sufficient to unambiguously identify each code word of vector signaling code H4 as represented by receive signal input values A, B, C, D.

R0=(A+C)−(B+D)  (Eqn. 3)

R1=(C+D)−(A+B)  (Eqn. 4)

R2=(C+B)−(D+A)  (Eqn. 5)

Architecturally, it is convenient to perform such detection operations at or near the receiver input, and high speed capability requires an efficient, high performance embodiment.
 FIG. 2A is a schematic diagram of one example circuit performing the required calculation. It will be readily apparent to one familiar with the art that the difference of two sums function of Equation 2 may be regrouped using the associative rule into an equivalent form comprising a sum of two differences. These regrouped forms of Equations 3, 4, and 5 are shown as Equations 6, 7, and 8.

R0=(A−B)+(C−D)  (Eqn. 6)

R1=(C−A)+(D−B)  (Eqn. 7)

R2=(C−D)+(B−A)  (Eqn. 8)

 FIG. 8 is a table illustrating logical values that might appear at various points in a detector in accordance with at least one embodiment of the invention as represented by the equations above. It should be understood that this is but one example of an implementation or a few variations thereof.
The four circuit inputs of FIG. 2A are labeled J, K, L, M as at 201, and the inputs are gate inputs to differential transistor pairs 230 and 235, each transistor pair herein referred to as a differential amplifier. These differential amplifiers share load resistors 220 providing the necessary sum function, with the inherent differential function within each differential amplifier 230 and 235 providing the necessary difference elements. Thus, the complimentary outputs labeled out and outb at 240 represent the result of Equation 6, as an example, based on inputs J, K, L, M. Splitting the conventional current sink per differential pair into individual per-transistor current sinks 238 allows introduction of resistors 236 and capacitors 237 that provide a frequency-dependent gain characteristic for line equalization or peaking.
 FIG. 2B is a schematic diagram of another embodiment of the invention. In this design, resistors 256 and capacitors 257 connect from the source of each transistor to a common node 258, providing a desirable frequency-dependent gain characteristic for equalization or signal peaking.
 FIG. 2C is a schematic diagram of a further embodiment of the invention, where the common node 278 is used as a common connection to single current sink 290, rather than the multiple current sinks of FIG. 2B. Capacitors 276 are shown connecting between each transistor drain to ground, with capacitors 276 and resistors 275 again providing a desirable frequency-dependent gain characteristic for equalization or peaking.
It will be apparent to one skilled in the art that the functional equivalent of Equation 2, including specific examples such as illustrated by Equations. 6, 7, and 8, may be embodied by any of the circuits of FIG. 2, given an appropriate mapping of receive signal input values A, B, C, D to circuit inputs J, K, L, M. It will also be apparent that the described circuit topology may be applied to compute equivalent detection functions for codes other than the example H4 code.
In at least one embodiment of the invention as represented in each schematic of FIG. 2, one or both of the resistors and capacitors described as providing equalization or signal peaking are trimmable or variable, allowing the amplification and equalization or peaking characteristics to be adjusted. The initial value or adjusted value of the capacitors may include zero, without limitation. Load resistors 220 may be replaced by current sources, by current sources controlled by a common mode feedback, or by a combination of resistors and inductors to provide additional high-frequency peaking.
On-Chip Receive Signal Termination
At contemplated signal rates, conventional best practice might be to provide matched transmission line termination for current mode logic (CML) receive input signals. Examples in accordance with at least one embodiment of the invention are shown in FIG. 3.
In FIG. 3A, signal inputs 301 labeled inputs a, b, c, and d are illustrated with external blocking capacitors 310, which optionally may be used to prevent DC current flow over the interconnection. The presence of impedance anomalies such as bond wires and bonding pads is suggested at 315, representing such known sources of signal degradation at high data rates.
In at least one embodiment, the same circuitry used for vector signaling code detection over example inputs a, b, c, d, also provides “legacy mode” support for, as an example, differential signal reception on the same inputs. Such selection of “legacy mode” may require support for greater signal level inputs (as those signals may be provided by different or earlier-generation components), and this extended-range input support may be obtained by attenuating large signal inputs before subsequent processing, as examples ah, bh, ch, dh at 335.
To provide this attenuation function, the termination resistance 320 is shown comprising components 321 and 322; as one example, they represent identical resistive values summing to the required termination impedance while also providing an attenuated output within allowable on-chip signal levels. Thus, signals 330 labeled a, b, c, d represent the full input signal level, while signals 335 labeled ah, bh, ch, dh represent, continuing the example, the same values attenuated to half amplitude. Subsequent processing circuits may select either full input signals or attenuated signals using, as an example, an analog multiplexer. The values of 321 and 322 need not be identical, and in some embodiments may be adjustable or trimmable, as illustrated by 322 of FIG. 3.
Other embodiments in accordance with the invention utilize equivalent attenuator topologies known in the art, including so-called “T” and “PI” configurations, or eschew attenuation and combine elements 321 and 322 into a single resistive termination. One alternative embodiment of termination resistance 320 is shown in FIG. 3 b, where components 321 and 322 provide the desired attenuation ratio, and component 323 is trimmed or adjusted to obtain the desired termination impedance.
In FIGS. 3A and 3B, all terminations 320 connect to common mode bias source 340 and common mode filter capacitor 345. The bias voltage provided by source 340 to subsequent active circuits can be circuit- and process-dependent; one typical value is 600 mV.
Another embodiment is illustrated in FIG. 3C, which provides level-shifting where blocking capacitor 310 is not used. Rather than utilizing a common bias source 340, the common termination node is coupled to ground via common mode filter capacitor 345, which may be shared across all terminations 320. The individual full-level and attenuated outputs are obtained through RF pass capacitors 385 and bias resistors 395, with the bias level of the receiver inputs set by current source 341 flow through the resistive path of 395 and 320.
Combined Multiplexer and Computation Element
A described computational circuit of FIG. 2 may be integrated with the suggested multiplexer function, as shown in the example circuit of FIG. 4. This example comprises three components; the first selects between the difference of inputs J and K, or the difference of attenuated inputs Jh and Kh; the second performs the computation of Equation 2 on inputs J, K, L, M, or provides internal loopback of this chip's transmit signals; and the final element selects between the outputs of the first or of the second components.
This staged topology has been found to minimize loading effects, thus providing optimum performance for the given process technology. The results allow embodiment of legacy mode operation with either attenuated input signals or full level input signals, an internal signal test mode, and/or vector signaling code detection.
Selectively enabling or disabling pairs of current sinks using the control signals Enab1 through Enab6 controls the multiplexer. As examples, inputs a and b may be selected instead of inputs ah and bh by enabling current sinks using Enab1 and disabling current sinks using Enab2, and then further selected by enabling current sinks using Enab5 and disabling current sinks using Enab6 to, as an example, support a legacy mode differential receiver behavior. Conversely, selection of the computed function based on inputs a, b, c, d may be selected by enabling current sinks using Enab3 and Enab4, and further selected by disabling current sinks using Enab5 and enabling current sinks using Enab6.
One embodiment incorporates a test mode loopback of local transmit signals, which may be obtained by enabling pass transistors 470 using control signal Enab7. It will be apparent to a practitioner of the art that this multiplexer may also be used for other input selections, including alternative mappings of wire signals to computed function inputs and/or a different computed function.
Inputs to an element 400 of FIG. 4 are J, K, L, M, Jh, Lh, and the Tx signals for loopback. The final outputs of element 400 are the complimentary values muxoutp and muxoutm. Resistive and capacitive elements 450 and 460 may be incorporated as previously described to provide input gain and/or frequency-dependent equalization or peaking, and resistive elements 455 provide for controllable overall gain at the final output stage. One or more of elements 450, 455, and 460 may be trimmable or adjustable, and/or may include capacitive values of zero if no frequency dependency is desired. One or more of load resistors shown as 415, 416, and 417 may be replaced by current sources, by current sources controlled by a common mode feedback, or by a combination of a resistor and inductor to provide additional high-frequency peaking.
An alternative embodiment of 400 is shown in FIG. 7 with all input multiplexing taking place in a single stage, rather than in the cascaded stages of FIG. 4. Cascode transistors 790 are shown as an optional addition to provide additional isolation of the half-level inputs (and their associated circuit parasitic capacitance) when not enabled by control Enab13. As with the previous example, resistors 750 and capacitors 760 may be utilized to adjust gain and/or high frequency peaking or compensation, and may be trimmable or adjustable. Load resistors 715 may also be replaced by current sources, by current sources controlled by a common mode feedback, or by a combination of resistors and inductors to provide additional high-frequency peaking.
Receive Input System for Vector Signaling Code
The previously described circuits may be combined to produce a complete receive input system, as shown in the block diagram of FIG. 5. As an example, four chip-to-chip interconnection wires labeled as inputs a, b, c, d may be terminated as previously described for FIG. 3 by termination network 300.
Three instances of combined multiplexer and computation element 400 are used, each operating as previously described, e.g., for FIG. 4. The three instances of element 400 shown in FIG. 5 as 520, 530, and 540 respectively perform the computations associated with Equation 3, Equation 4, and Equation 5, based on the permutations of input signal connections shown. Under control of signals MuxSel (which within element 400 manipulate controls Enable1 through Enable7 of FIG. 4 as previously described) instance 520 may also alternatively provide a differential result of inputs a and b, a differential result of attenuated input signals ah and bh, or a loopback of internal signals Txa and Txb. Similarly, instance 540 may also alternatively provide a differential result of inputs c and d, a differential result of attenuated input signals ch and dh, or a loopback of internal signals Txc and Txd, and instance 530 may alternatively provide a loopback of internal signals Txe and Txf.
In one embodiment, the outputs of instance 530 are used only in non-legacy, non-loopback modes, thus the unused signal inputs of 530 are connected to a passive signal level such as ground. Although one familiar with the art would note that the instance of 530 could be simplified by removing unnecessary components associated with the unused functions, the amount of chip area wasted by not doing so is extremely small, while maintaining identical layouts for all instances provides consistent loading and delay characteristics throughout.
Other Variations
In at least one embodiment, all active transistor stages (e.g., of the circuit of FIG. 4 or the system of FIG. 5) are biased to be substantially in linear amplification mode. Thus, as examples, the signal outputs muxout0p, muxout1p, muxout2p, etc. of FIG. 5 represent analog signals, albeit ones that uniquely identify code words of the vector signaling code. Subsequent reception steps may include additional frequency- or time-domain equalization, sampling to capture particular time intervals, and slicing to obtain digital results. However, the possibility of incorporating such subsequent steps is not limiting; a minimal embodiment may utilize, as examples, simple threshold (e.g., Schmidt trigger) gates or high gain nonlinear amplifier stages to convert the outputs to digital values.
 FIG. 6 provides a block diagram of another embodiment, incorporating feedback around the multiplexer and VGA stages to extend frequency response and allow greater receive bandwidth.
For purposes of illustration, the previously-described components of the receive detection system are shown in FIG. 6 as representing input/computational element 610 acting on inputs 601 and 611 acting upon inputs 602, multiplexer element 620 selecting between the input/computational elements, and output amplifier 630 producing signal outputs 650. As examples suggested by the symbols on their icons, 610 and 611 may further incorporate frequency-dependent peaking or filtering action, and 630 may further incorporate adjustable gain. Portions of outputs 650 are passed through networks comprised of resistors 631 and capacitors 632 to amplifiers 640, creating a controlled negative feedback loop that extends the linearity and bandwidth of included elements 620 and 630. As suggested by 632, elements of the feedback network may be adjustable or trimmable.
Other embodiments in accordance with the invention may interface to voltage-mode or high-impedance unterminated signal inputs, and/or communicate internal signals as voltage rather than current levels. Such embodiments may incorporate the known practice of using transmission gates as multiplexing elements.
The examples illustrate the use of vector signaling codes for point-to-point wire communications. However, this should not been seen in any way as limiting the scope of the described invention. The methods disclosed in this application are equally applicable to other communication media including optical and wireless communications. Thus, descriptive terms such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “optical intensity”, “RF modulation”, etc. Similarly, specific examples provided herein are for purposes of description, and do not imply a limitation.
As used herein, “physical signal” includes any suitable behavior and/or attribute of a physical phenomenon capable of conveying information. In accordance with at least one embodiment of the invention, physical signals may be tangible and non-transitory. In accordance with at least one embodiment of the invention, interpreting a set of signals as selecting an object (e.g., a data object) includes selecting the object based at least in part on the set of signals and/or one or more attributes of the set of signals. In accordance with at least one embodiment of the invention, interpreting a set of signals as representing an object (e.g., a data object) includes determining and/or selecting the object based at least in part on a representation corresponding to the set of signals. In accordance with at least one embodiment of the invention, a same set of signals may be used to select and/or determine multiple distinct objects (e.g., data objects).

What is claimed is:
 
1. A circuit comprising:
a first differential amplifier configured to generate a first difference signal between signals received on a first pair of selected inputs representing symbols of a vector signaling code word of an orthogonal vector signaling code received via a multi-wire communications bus, and a second differential amplifier configured to generate a second difference signal between signals received on a second pair of selected inputs representing symbols of the vector signaling code word of the orthogonal vector signaling code received via the multi-wire communications bus, the first pair of selected inputs and the second pair of selected inputs being disjoint;
a summation circuit comprising load impedance elements connected to the first differential amplifier and the second differential amplifier, the summation circuit configured to generate a sum-of-differences output signal by combining the first difference signal and the second difference signal; and
an output circuit for generating, based on the sum-of-differences output signal, a portion of a respective code identification result signal that fully identifies the received code word of the orthogonal vector signaling code.


  
2. The circuit of claim 1, wherein the output circuit is implemented by distinct circuit elements.

  
3. The circuit of claim 1, wherein the output circuit is implemented by interconnections of circuit elements.

  
4. The circuit of claim 1, wherein the orthogonal vector signaling code is a Hadamard matrix code.

  
5. The circuit of claim 1, wherein each input of the first pair of selected inputs and the second pair of selected inputs carry signals selected from a set of a high positive value, a low positive value, a low negative value, and a high negative value, representable, respectively as {−1, −1/3, 1/3, 1}, wherein each code word of the orthogonal vector signaling code is a permutation of the symbol set {1, −1/3, −1/3, −1/3} or a permutation of the symbol set {−1, 1/3, 1/3, 1/3}.

  
6. The circuit of claim 1, wherein the first pair of inputs and the second pair of inputs collectively encode for a set of three input bits.

  
7. The circuit of claim 1, further comprising a first frequency-dependent gain circuit connected to the first differential amplifier and a second frequency-dependent gain circuit connected to the second differential amplifier, the first and second frequency-dependent gain circuits configured to provide providing an signal equalization or signal peaking.

  
8. The circuit of claim 1, further comprising a selection function circuit that directs one of the sum-of-differences output signal or the first difference signal to the output circuit.

  
9. The circuit of claim 8, further comprising a negative feedback loop including the output circuit, the selection circuit function, or both.

  
10. The circuit of claim 8, wherein the selection circuit is a multiplexor.

  
11. The circuit of claim 1, wherein the output circuit incorporates variable gain.

  
12. The circuit of claim 1, wherein the output circuit incorporates a digital threshold or slicer.

  
13. The circuit of claim 1, wherein the output circuit incorporates a time sampling function.

  
14. The circuit of claim 1, further comprising a sampling circuit configured to sample the portion of the respective code identification result signal.

  
15. The circuit of claim 14, further comprising a slicer configured to generate a binary output based on the sampled portion of the respective code identification result signal.

  
16. The circuit of claim 1, further comprising a threshold gate configured to generate a binary output based on the portion of the respective code identification result signal.

  
17. The circuit of claim 16, wherein the threshold gate is a Schmidt trigger.

  
18. The circuit of claim 1, wherein the received signals correspond to analog voltages.

  
19. A system comprising:
a plurality of pairs of differential amplifiers connected to a multi-wire communication bus, each pair of the plurality of pairs of differential amplifiers receiving inputs corresponding to symbols of a received code word of a vector code, and each differential amplifier of the pair of differential amplifiers configured to generate difference signals;
a plurality of load impedance element pairs, each load impedance element pair of the plurality of load impedance element pairs is connected to a respective pair of differential amplifiers, each load impedance pair configured to generate a sum-of-difference signal based on the generated difference signals; and
a plurality of output circuits, each output circuit of the plurality of output circuits configured to generate a respective code identification result signal responsive to the sum-of-difference signal, wherein the respective code identification result signals from the plurality of output circuits fully identifies the received code word.


  
20. The circuit of claim 1, wherein the load impedance elements are selected from the group consisting of:
at least two inductors;
at least two resistors; and
at least two current sources.