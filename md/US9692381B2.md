Source: [US9692381B2](https://patents.google.com/patent/US9692381B2)

# [US9692381B2](US9692381B2.md) - [US9692381B2](US9692381B2.md) - Symmetric linear equalization circuit with increased gain

## Details

* Date: 2014-05-16
* Inventor: Kandou Labs SA
* Beneficiary: Armin Tajalli

## Other patents

### Backwards
 * US668687A
 * US780883A
 * US3196351A
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4276543A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4722084A
 * US4772845A
 * US4774498A
 * US4864303A
 * US4897657A
 * [US4974211A](US4974211A.md)
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5283761A
 * US5287305A
 * US5311516A
 * US5331320A
 * [US5412689A](US5412689A.md)
 * US5449895A
 * US5459465A
 * US5461379A
 * US5511119A
 * US5553097A
 * US5566193A
 * US5599550A
 * US5659353A
 * US5727006A
 * US5802356A
 * [US5825808A](US5825808A.md)
 * US5856935A
 * US5875202A
 * US5945935A
 * US5949060A
 * US5982954A
 * US5995016A
 * US5999016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6119263A
 * US6172634B1
 * US6175230B1
 * US6232908B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US20010055344A1
 * US6346907B1
 * US20020034191A1
 * US20020044316A1
 * US6378073B1
 * US20020057592A1
 * US20020057292A1
 * US6398359B1
 * US6404820B1
 * US6417737B1
 * [US6452420B1](US6452420B1.md)
 * US20020154633A1
 * US6473877B1
 * US20020163881A1
 * US6483828B1
 * US20020174373A1
 * US6509773B2
 * US20030048210A1
 * US20030071745A1
 * [US6556628B1](US6556628B1.md)
 * US20030086366A1
 * US6563382B1
 * US20030105908A1
 * JP2003163612A
 * US20030146783A1
 * US6624699B2
 * US6650638B1
 * [US6661355B2](US6661355B2.md)
 * US20030227841A1
 * US6664355B2
 * US20040003336A1
 * US20040003337A1
 * US20040057525A1
 * US20040086059A1
 * [US6766342B2](US6766342B2.md)
 * US20040156432A1
 * US20040174373A1
 * [US6839429B1](US6839429B1.md)
 * US6839587B2
 * US6865236B1
 * US6865234B1
 * US20050152385A1
 * US20050174841A1
 * US20050213686A1
 * [US6954492B1](US6954492B1.md)
 * US6972701B2
 * US20050286643A1
 * [US6990138B2](US6990138B2.md)
 * US20060018344A1
 * [US6999516B1](US6999516B1.md)
 * US20060067413A1
 * US7023817B2
 * US7039136B2
 * US7053802B2
 * US20060115027A1
 * US20060133538A1
 * US20060159005A1
 * US7085153B2
 * US7142865B2
 * [US7142612B2](US7142612B2.md)
 * US20060269005A1
 * US7167019B2
 * US20070030796A1
 * [US7180949B2](US7180949B2.md)
 * US20070194848A1
 * US7269212B1
 * US20070260965A1
 * US20070263711A1
 * US20070265533A1
 * US20070283210A1
 * US20080013622A1
 * US7335976B2
 * US7356213B1
 * US7358869B1
 * US20080104374A1
 * US7370264B2
 * US7372390B2
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US7400276B1
 * US20080169846A1
 * US7428273B2
 * US20080273623A1
 * US20080284524A1
 * US7456778B2
 * US20090059782A1
 * EP2039221A1
 * US20090092196A1
 * US20090132758A1
 * US20090154500A1
 * CN101478286A
 * WO2009084121A1
 * US20090185636A1
 * US20090193159A1
 * US7570704B2
 * US20090212861A1
 * US20090228767A1
 * US20090251222A1
 * US20090257542A1
 * US7620116B2
 * [US7633850B2](US7633850B2.md)
 * US20090323864A1
 * US7643588B2
 * US20100023838A1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US7697915B2
 * US7706524B2
 * US20100104047A1
 * US20100122021A1
 * US20100177816A1
 * US20100180143A1
 * US20100205506A1
 * US7787572B2
 * US7808456B2
 * US20100296556A1
 * US20100296550A1
 * US7841909B2
 * US20100309964A1
 * US7869497B2
 * US20110014865A1
 * US7882413B2
 * US7899653B2
 * US20110051854A1
 * US20110072330A1
 * US20110084737A1
 * US7933770B2
 * US20110150495A1
 * WO2011119359A2
 * US8030999B2
 * US20110268225A1
 * US8064535B2
 * US20110291758A1
 * [US20110299555A1](US20110299555A1.md)
 * US20110302478A1
 * US20110317559A1
 * US20110317587A1
 * US20120008662A1
 * US8106806B2
 * US20120063291A1
 * US8149906B2
 * US8159375B2
 * [US8159376B2](US8159376B2.md)
 * US8199849B2
 * US20120152901A1
 * US20120161945A1
 * US20120213299A1
 * US8253454B2
 * US8279094B2
 * US20120257683A1
 * US8289914B2
 * US8295250B2
 * US8310389B1
 * US20130010892A1
 * US20130049863A1
 * US8406315B2
 * US8406316B2
 * US8429495B2
 * US8437440B1
 * US8443223B2
 * US8442099B1
 * US20130163126A1
 * US8498368B1
 * US20130229294A1
 * US8547272B2
 * US20130259113A1
 * US8578246B2
 * US8593305B1
 * US8604879B2
 * US8620166B2
 * US8638241B2
 * US8649460B2
 * US8649840B2
 * US8649556B2
 * US8718184B1
 * US20140132331A1
 * US8755426B1
 * US8782578B2
 * US8780687B2
 * US20140198837A1
 * US20140198841A1
 * US20140226455A1
 * US8831440B2
 * US20140254730A1
 * US8879660B1
 * US20150010044A1
 * US8949693B2
 * US8951072B2
 * US20150078479A1
 * US8989317B1
 * US9036764B1
 * US20150146771A1
 * US9069995B1
 * US9077386B1
 * US20150199543A1
 * US9093791B2
 * US9100232B1
 * US9148087B1
 * US20150333940A1
 * US20150381232A1
 * US20160020796A1
 * US20160020824A1
 * US20160036616A1
 * US9281785B2
 * [US9288082B1](US9288082B1.md)
 * US9362974B2
 * US9374250B1
### Forward
 * US9939467B1
## Abstract

Abstract

Circuits providing low noise amplification with continuous time linear equalization are described. An exemplary circuit includes four amplification elements, such as MOS transistors. The amplification elements are arranged in differential pairs, and the differential pairs are cross-coupled with a frequency-dependent coupling, such as a capacitive coupling, to enhance high-frequency gain. The outputs of the amplification elements are combined to provide an output representing inverted and un-inverted sums of differences in the input signals.



Circuits providing low noise amplification with continuous time linear equalization are described. An exemplary circuit includes four amplification elements, such as MOS transistors. The amplification elements are arranged in differential pairs, and the differential pairs are cross-coupled with a frequency-dependent coupling, such as a capacitive coupling, to enhance high-frequency gain. The outputs of the amplification elements are combined to provide an output representing inverted and un-inverted sums of differences in the input signals.

This application is a continuation of U.S. application Ser. No. 14/869,346, filed Sep. 29, 2015, entitled “SYMMETRIC LINEAR EQUALIZATION CIRCUIT WITH INCREASED GAIN”, which is a continuation of U.S. application Ser. No. 14/280,305, filed May 16, 2014, now U.S. Pat. No. 9,148,087 issued Sep. 29, 2015, entitled “Symmetric Linear Equalization Circuit with Increased Gain,” all of which are hereby incorporated by reference in their entirety for all purposes.
REFERENCES
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication No. 2011/0268225 of U.S. patent application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”);
U.S. Patent Publication No. 2011/0302478 of U.S. patent application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Resilience and SSO Resilience” (hereinafter “Cronie II”);
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli, entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes” (hereinafter “Cronie III”);
U.S. Provisional Patent Application No. 61/753,870, filed Jan. 17, 2013, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Richard Simpson, Anant Singh, Andrew Kevin John Stewart, and Giuseppe Surace, entitled “Methods and Systems for Chip-to-chip Communication with Reduced Simultaneous Switching Noise” (hereinafter called “Fox I”);
U.S. Provisional Patent Application No. 61/763,403, filed Feb. 11, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox II”);
U.S. Provisional Patent Application No. 61/773,709, filed Mar. 6, 2013, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox III”);
U.S. Provisional Patent Application No. 61/812,667, filed Apr. 16, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, and Giuseppe Surace, entitled “Methods and Systems for High Bandwidth Communications Interface” (hereinafter called “Fox IV”);
U.S. patent application Ser. No. 13/542,599, filed Jul. 5, 2012, naming Armin Tajalli, Harm Cronie, and Amin Shokrollahi entitled “Methods and Circuits for Efficient Processing and Detection of Balanced Codes” (hereafter called “Tajalli I”.)
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi, and Anant Singh, entitled “Methods and Systems for Skew Tolerance in and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication” (hereinafter called “Holden I”)
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences” (hereinafter called “Ulrich I”).
FIELD OF THE INVENTION
The present invention relates to communications systems circuits generally, and more particularly to the amplification, equalization, and frequency compensation of signal receivers for high-speed multi-wire serial interfaces used for chip-to-chip communication.
BACKGROUND
In modern digital systems, digital information has to be processed in a reliable and efficient way. In this context, digital information is to be understood as information available in discrete, i.e., discontinuous values. Bits, collection of bits, but also numbers from a finite set can be used to represent digital information.
In most chip-to-chip, or device-to-device communication systems, communication takes place over a plurality of wires to increase the aggregate bandwidth. A single or pair of these wires may be referred to as a channel or link and multiple channels create a communication bus between the electronic components. At the physical circuitry level, in chip-to-chip communication systems, buses are typically made of electrical conductors in the package between chips and motherboards, on printed circuit boards (“PCBs”) boards or in cables and connectors between PCBs. In high frequency applications, microstrip or stripline PCB traces may be used.
Common methods for transmitting signals over bus wires include single-ended and differential signaling methods. In applications requiring high speed communications, those methods can be further optimized in terms of power consumption and pin-efficiency, especially in high-speed communications. More recently, vector signaling methods as described in Cronie I, Cronie II, and Cronie III have been proposed to further optimize the trade-offs between power consumption, pin efficiency and noise robustness of chip-to-chip communication systems. In those vector signaling systems, the digital information is transformed into a different representation space in the form of a vector codeword that is chosen in order to optimize the power consumption, pin-efficiency and speed trade-offs based on the transmission channel properties and communication system design constraints.
BRIEF DESCRIPTION
Communications signal receiver circuits providing amplification and frequency compensation are described, incorporating particular design features providing increased signal gain without increased noise, thus an increased signal-to-noise or SNR ratio. Certain embodiments also provide improved signal dynamic range and linearity. In some applications the potential gain increase may be traded off for extended bandwidth, support for support additional signal inputs, and/or lower power.

BRIEF DESCRIPTION OF FIGURES
 FIGS. 1A-1C show three example prior art circuits illustrating the basic elements of single-ended signal amplification, differential signal amplification, and differential amplification with linear frequency-dependent equalization.
 FIGS. 2A and 2B illustrate aspects of the invention, with FIG. 2A showing the basic elements of the design and FIG. 2B providing an embodiment of a differential amplifier with equalization.
 FIGS. 3A and 3B show two embodiments using different approaches that extend the differential amplifier with equalization to support the four signals of an ENRZ vector signaling code receiver.
 FIG. 4 illustrates a further embodiment extending the differential amplifier with equalization to support the four signals of an ENRZ vector signaling code receiver.
 FIG. 5 shows an embodiment incorporating CMOS transistor pairs into the differential amplifier with equalization.
 FIG. 6 illustrates an embodiment extending the amplifier with equalization incorporating CMOS transistor pairs to support the four signals of an ENRZ vector signaling code receiver.
 FIG. 7 illustrates a second embodiment extending the amplifier with equalization incorporating CMOS transistor pairs to support the four signals of an ENRZ vector signaling code receiver.
 FIG. 8 illustrates a further embodiment extending the amplifier with equalization incorporating CMOS transistor pairs to support the four signals of an ENRZ vector signaling code receiver.
 FIG. 9 shows a complete embodiment of an ENRZ detector, incorporating three instances of a ENRZ vector signaling code receiver as shown in FIG. 3A, FIG. 3B, or FIG. 8.
 FIG. 10 illustrates an alternate embodiment of the circuit of FIG. 3A.

DETAILED DESCRIPTION
A receiver for vector signaling encoded information accepts multiple wire inputs corresponding to the multiple components of a codeword. Commonly, different voltage, current, etc. levels are used for signaling and more than two levels might be used to represent each codeword element, such as a ternary signaling code wherein each wire signal has one of three values. Receivers may incorporate amplification, frequency-dependent amplification, signal conditioning, and filtering such as obtained with the continuous time linear equalization or “CTLE” filtering method. These functions may be embodied individually, or combined into multifunction circuits. As will be shown, such multifunction circuits may reduce power consumption, facilitate improved signal to noise ratio, increase circuit dynamic range, and/or enable higher speed signaling.
In accordance with at least one embodiment of the invention, circuits are described for the efficient equalization and pre-sample-processing of vector signal coded data transmitted over physical channels such that the signals are resilient to common mode noise, do not require a common reference at the transmission and reception points, and can produce a higher pin efficiency than conventional differential signaling with relatively low power dissipation for encoding and decoding.
In a practical embodiment, signals may undergo significant change in amplitude, waveform, and other characteristics between transmitter and receiver, due to the transmission characteristics of communications channel. Using one contemporary embodiment as an example, 400 mV amplitude signals at the transmitter may be attenuated by the channel to less than 20 mV at the receiver, with significantly greater attenuation at higher frequencies resulting in slow signal transitions and other distortions. At these low signal amplitudes, receiver noise becomes a significant issue, with the inherent noise level of the first amplifier stage often constraining the achievable signal-to-noise ratio of the overall system. Receiver dynamic range is also significant, as the same receiver design expected to operate with high attenuation signal paths may also be used with extremely short and thus low attenuation connections.
Basic MOS Amplifier Characteristics
The basic characteristics of MOS transistor amplifiers as illustrated in FIGS. 1A-1C are well known. FIG. 1A illustrates a model of the basic operation of a MOS transistor amplifier. Supplied with source current Id from a load impedance RL, a transistor with transconductance gm may achieve a small-signal gain of gm×RL, barring any secondary circuit effects. If the inherent noise of the transistor is nrms (in RMS voltage units,) the effective signal-to-noise ratio or SNR is thus gm×RL/nrms and the current consumption is Id.
In a differential configuration such as shown in FIG. 1B, the amplification is gm×RL×(Vg1−Vg2) and the noise is √{square root over (2)}×nrms, leading to a SNR of gm×RL/√{square root over (2)}×nrms with a current consumption of 2×Id.
 FIG. 1C shows a known CTLE model of a differential amplifier circuit. Its noise characteristics and maximum achievable gain remain unchanged from the basic differential amplifier model of FIG. 1B, but the introduction of the parallel Rs and Cs combination between the transistor sources introduces a frequency-dependent gain characteristic, with gain at low frequencies considerably reduced compared to the gain at high frequencies, which approaches the maximum achievable gain value. Other examples of CTLE amplifier circuits may be found in Tajalli I.
 FIG. 2A illustrates the behavior of a differential amplifier with CTLE behavior in accordance with at least one aspect of the invention. Input nodes Vg1 and Vg2 are coupled not only to the transistor gates, but also via capacitors Cs to the source of the opposing pair's transistor. Effectively, each transistor thus provides both common-source-mode amplification of its gate input signal, while simultaneously providing common-gate-mode amplification of the other input signal, resulting in a doubling of the effective gain. In this new configuration, the maximum achievable amplification is thus 2+gm×RL while the uncorrelated noise for the transistor pair is √{square root over (2)}×nrms, leading to a SNR of √{square root over (2)}×gm×RL/nrms with a current consumption of 2×Id.
Thus, the model of FIG. 2A has twice the gain and two times better SNR with the same current consumption, compared to the known art configuration of FIG. 1C.
A practical embodiment of FIG. 2A is shown in the schematic of FIG. 2B. Differential output signals Out1 and Out2 are developed across output resistors RL, with the current sinks at each transistor source setting operating current for the differential transistor pair.
 FIG. 2B illustrates an exemplary circuit for CTLE of analog signals. As illustrated in FIG. 2B, the circuit includes a first amplification element M1 and a second amplification element M2. The first and second amplification elements are arranged in a differential configuration, such as a long-tailed pair, and they preferably have matched characteristics. The amplification elements each have an inverting input and a non-inverting input. In the example of FIG. 2B, the inverting input is the gate of each transistor, and the non-inverting input is the source of that transistor. A signal at the transistor gate is amplified in a common source configuration, and a signal at the transistor source is amplified in a common gate configuration.
A first signal input is provided at an input node Vg1 with a direct connection to the inverting input of the first amplification element M1, and a second signal input is provided at an input node Vg2 with a direct connection to the inverting input of the second amplification element M2. There is also a frequency-dependent connection from the first signal input Vg1 to the non-inverting input of the second amplification element M2. This frequency-dependent connection is made through a series capacitor with capacitance Cs. In addition, there is another frequency-dependent connection from the second signal input Vg2 to the non-inverting input of the first amplification element M1. This frequency-dependent connection is also made through a series capacitor with capacitance Cs. These frequency-dependent connections increase the gain of the differential amplification provided by the first and second amplification elements, particularly at high frequencies.
In an alternative embodiment (not illustrated), the roles of the inverting and non-inverting inputs of the amplification elements are reversed. In such an embodiment, the first signal input Vg1 is provided with a direct connection to the non-inverting input of the first amplification element M1, and a second signal input Vg2 is provided with a direct connection to the non-inverting input of the second amplification element M2. There is also a frequency-dependent connection from the first signal input Vgi to the inverting input of the second amplification element M2, and another frequency-dependent connection from the second signal input Vg2 to the inverting input of the first amplification element M1. Thus, the frequency-dependent connections utilize the opposite amplification element input from the direct connections, resulting in increased gain.
The frequency-dependent CTLE characteristics may be computed in a similar manner as with a conventional CTLE design. Generally, Cs in an embodiment such as shown in FIG. 2B will be approximately twice as large as Cs in a conventional embodiment such as that of FIG. 1C. The additional input capacitance of the transistor gate paralleled with Cs may be an issue in some applications, but is generally tractable for typical values of input impedance and CTLE pole-zero frequency. In one system design using the new embodiment, increased gains of 3-6 dB were seen over conventional designs depending on the characteristics of external circuitry. It will be apparent to one familiar with the art that, as with known equalization circuits, the frequency-determining Cs/Rs combination may be extended to networks of multiple pole-zero pairs, and that one or more of the frequency-determining elements may be represented by effective circuit impedance at a node, parasitic capacitance at a node, etc.
Extensions to Support ENRZ
Ensemble NRZ (also know as ENRZ or H4 code) is a proprietary vector signaling code providing significant benefits over conventional NRZ and differential pair operation. As described in [Fox IV], ENRZ encodes three bits of information over four wires, using all possible permutations of the signal vectors (+1, −⅓, −⅓, −⅓) and (−1, +⅓, +⅓, +⅓). Thus, ENRZ is a balanced quaternary code, although any single codeword uses only two of the four possible signal levels. The balanced codewords give ENRZ desirable pseudo-differential characteristics, including low SSO noise, induced noise immunity, and reference-less receiver operation.
The [Ulrich I] reference describes use of extended differential amplifier circuits to perform analog computations on vector signaling code signals as part of code detection. Analog computation circuits for decoding ENRZ vector codes perform calculations of the form shown in Equation 1 where J, K, L, M are variables representing the symbol values of the four input signals values.

R=(J+L)−(K+M)  (Eqn. 1)

It may be noted that applying three instances of Equation 1 with different permutations of receive signal input values to the four variables is sufficient to detect each code word of ENRZ. As one example and without limitation, the input permutations producing the three results R0, R1, R2 based on Equations 2, 3 and 4 are sufficient to unambiguously identify each code word of vector signaling code ENRZ as represented by receive signal input values A, B, C, D. As these equations describe linear combinations using only sums and differences, it will be apparent that other equivalent equations, as one example presenting a sum of two differences, may be produced using normal arithmetic factoring and grouping operations.

R 0=(A+C)−(B+D)  (Eqn. 2)

R 1=(C+D)−(A+B)  (Eqn. 3)

R 2=(C+B)−(D+A)  (Eqn. 4)

Architecturally, it is convenient to perform such detection operations at or near the receiver input, and high speed capability requires an efficient, high performance embodiment. In accordance with at least one aspect of the invention, a two input differential input circuit such as shown in FIG. 2B may be extended to provide such analog computation capability suitable for ENRZ detection or detection of other vector signaling codes with similar characteristics.
The embodiment illustrated in FIG. 3A incorporates two distinct instances of the differential input stages of FIG. 2B, with paralleled input pairs M1/M2 and M3/M4 each accepting two inputs, Vg1/Vg2 and Vg3/Vg4 respectively, using the direct plus capacitive input method of the previous example on each of the four inputs. As each differential pair computes the analog difference of its inputs, and paralleling two such pairs with a common load results in an output representing the sum of the two differential pair signals, the resulting outputs Out1 and Out2 represent the uninverted and inverted results of the equation

(Vg 1 −Vg 2)+(Vg 3 −Vg 4)

In this first ENRZ configuration, the maximum amplification is 2×gm×RL and the noise is 2×nrms, leading to a SNR of gm×RL/nrms with a current consumption of 4×Id. Compared to well-known ENRZ CTLE circuits, the embodiment of FIG. 3A has twice the gain and √{square root over (2)} better SNR with the same current consumption.
Thus, in the example of FIG. 3A, a circuit includes a first amplification element (M1) and a second amplification element (M2) with matched characteristics in a differential configuration, and a third amplification element (M3) and a fourth amplification element with matched characteristics in a differential configuration. Each of these amplification elements has a first input (e.g., the gate) and a second input (e.g., the source). A first load impedance (e.g., a resistor with resistance RL) is shared by the first amplification element and third amplification element, and an output node Out1 is provided for obtaining a signal at the first load impedance. A second load impedance is shared by the second amplification element and fourth amplification element, and an output node Out2 is provided for obtaining a signal at the second load impedance. A first signal input Vg1, second signal input Vg2, third signal input Vg3, and fourth signal input Vg4, each directly connect to a first input of the corresponding first, second, third, and fourth amplification elements, respectively. There is also a frequency-dependent connection of the first, second, third, and fourth signal inputs to the second input of the second, first, fourth, and third amplification elements, respectively. Through these connections, the signal obtained at the first and second load impedances represents inverted and non-inverted sums of differences of the input signals.
An alternative embodiment providing equivalent ENRZ CTLE functionality is illustrated in FIG. 3B, where two inputs Vg1 and Vg2 are connected to the gates of transistors M1 and M2, while the second two inputs Vg3 and Vg4 are connected via input capacitors Cs to the sources of transistors M2 and M1. In this alternative ENRZ configuration, the maximum amplification is gm×RL and the noise is √{square root over (2)}×nrms, leading to a SNR of gm×RL/√{square root over (2)}×nrms with a current consumption of 2×Id.
Thus, the power consumption is half that of the embodiment of FIG. 3A. Compared to well-known ENRZ CTLE circuits, the embodiment of FIG. 3B has lower power consumption, reduced gain and noise, as well as a simpler circuit topology.
Another alternative embodiment providing equivalent ENRZ CLTE functionality is illustrated in FIG. 10, which has the same basic structure and performance characteristics as the circuit of FIG. 3A, but with the inputs via input capacitors Cs connecting to the same side of the other differential pair.
A system embodiment of an ENRZ detector using three instances of the circuit of FIG. 3A is illustrated in FIG. 9. Each of identical ENRZ CTLE elements 910, 920, and 930 are as described in FIG. 3A. Inputs A, B, C, D are received wire signals from four wires carrying ENRZ signals, and are connected to 910, 920, and 930 as described by Equations 2, 3, and 4. For purposes of clarity, the permuted input signals A, B, C, and D are redundantly labeled to the left of elements 920 and 930 in parenthesis. Three sets of differential outputs Mode1H/Mode1L, Mode2H/Mode2L, and Mode3H/Mode3L are produced and in a preferred embodiment will represent the three bits of data encoded in the ENRZ signals.
Equivalent embodiments may also be obtained by incorporating three identical instances of any of the circuits of FIG. 3B, FIG. 8 or FIG. 10 as elements 910, 920, and 930 of FIG. 9 
The circuit of FIG. 3B includes a first amplification element (M1) and a second amplification element (M2) with matched characteristics in a differential configuration.
Each of these amplification elements has a first input and a second input, e.g. a gate and a source. A first load impedance, such as a resistor with resistance RL, is provided for the first amplification element, and a second load impedance for the second amplification element. A first signal input node Vg1 and a second signal input node Vg2, are each directly connected to a first input of the corresponding first and second amplification elements. A third signal input Vg3 is connected to the second input of the second amplification element, and a fourth signal input Vg4 is connected to the second input of the first amplification element. The signal obtained at the output nodes Out1 and Out2 at the first and second load impedances represents inverted and non-inverted sums of differences of the input signals. One familiar with the art may note that the gain from inputs Vg1 and Vg2 can potentially differ from that from inputs Vg3 and Vg4 as the former are direct inputs to transistor gate inputs of common source amplifiers, while the latter are capacitively coupled to the transistor sources of common gate amplifiers. In practical embodiments this issue is moot, as these imbalances are quite small for typical input frequency ranges and CTLE frequency/gain profiles. Also, multiple iterations of the sum of difference computation are typically performed, as one example with different orderings of input signals as described by Equations 2, 3, and 4, and subsequent interpretation of these multiple results tends to mitigate any potential imbalance.
A further embodiment as shown in FIG. 4 illustrates an alternate topology providing both direct gate input and capacitively coupled source connection of each input signal. However, where the circuit of FIG. 3A made the latter connection to the transistor on the opposite side of the same differential pair, the circuit of FIG. 4 connects to the transistor on the opposite side of the other differential pair. This functionally equivalent but topologically distinct embodiment provides additional symmetry, which may facilitate layout and/or reduce potential circuit imbalances.
Complementary Gain Stages
 FIG. 5 shows another embodiment of a differential amplifier with equalization, where each of the amplification elements is a set of complimentary MOS (CMOS) transistors. In accordance with the earlier examples, each input connects not only to the differential transistor gates, but also via capacitors Cs to the opposing differential transistor's source or drain in a fully symmetric manner. Because of the complementary nature of the P- and N-channel transistors in each set, they both provide common source amplification of their gate input signals, with their output currents effectively in parallel. Thus, differential outputs Out1 and Out2 are developed across load resistor Rd. In typical designs, the value of Rd will be approximately twice the value of RL in the previous examples to obtain comparable gain. As with the previous designs, the combinations of Cs and Rs set the pole and zero frequencies of the CTLE function.
Although transistors may have poorer high-frequency characteristics than their equivalent NMOS transistors in some integrated circuit processes, this constraint does not provide an absolute limit on overall circuit performance. Overall frequency response of this circuit in a practical embodiment is approximately an interpolation between the native frequency characteristics of its component P- and N-MOS transistors, and those frequency characteristics are also much closer to parity in current integrated circuit processes.
This circuit has also been extensively analyzed for linearity issues, and has been found to be somewhat better than known art designs, where cutoff of one of the single input transistors introduces clipping.
Further Extensions
One familiar with the art will recognize that the same approaches previously shown in FIGS. 3A and 3B to extend the basic designs of FIGS. 2A and 2B to support ENRZ code may also be applied to the design of FIG. 5. One such embodiment is illustrated in FIG. 6, which applies the approach described in FIG. 3A to the circuit of FIG. 5 to support the four inputs of an ENRZ receiver. A second such embodiment is illustrated in FIG. 7, which applies the approach described in FIG. 3B to the circuit of FIG. 5 to support the four inputs of an ENRZ receiver.
A further embodiment shown in FIG. 8 combines the complementary transistor differential amplifiers of FIG. 5, the ENRZ detecting sum-of-differences computation of FIG. 3A, and the symmetrical cross-coupling of FIG. 4. In FIG. 8, a first amplification element is made up of a set M1/M2 of complementary MOS transistors, and a second amplification element is made up of a set M3/M4 of complementary MOS transistors.
The first and second amplification elements have matched characteristics and are arranged in a differential configuration. A third amplification element is made up of a set M7/M8 of complementary MOS transistors, and a fourth amplification element is made up of a set M5/M6 of complementary MOS transistors. The third and fourth amplification elements have matched characteristics and are arranged in a differential configuration. Each of the first, second, third, and fourth amplification elements has a first input and a second input. For example, the first input of an amplification element may include one or more gates in a complementary MOS transistor pair, while the second input of an amplification pair may include one or more sources of the complementary MOS transistor pair. It should be noted that the terms “first input” and “second input” are mere labels of convenience, so the “first input” can be a transistor source, while the “second input” can be a transistor gate.
A first load impedance is shared by the first amplification element and third amplification element, and a second load impedance is shared by the second amplification element and fourth amplification element. First, second, third, and fourth signal input nodes (Vg1, Vg2, Vg3, Vg4, respectively) each are directly connected to a first input of the corresponding first, second, third, and fourth amplification elements, respectively. There is also a frequency-dependent connection of the first, second, third, and fourth signal inputs to the second input of the fourth, third, second, and first amplification elements, respectively. The signals obtained by the first output node Out1 at the first load impedance and by the second output node Out2 at the second load impedance represent inverted and non-inverted sums of differences of the input signals. Other known techniques for introducing frequency-dependent gain into an amplifier circuit are also directly applicable to the described embodiments. As one example, the load resistance described herein may optionally be comprised of a combination of resistance and inductance, or inductance alone, to provide additional high-frequency gain peaking or bandwidth extension.
The principles described herein may be extended to circuits employing various numbers of differential pairs and employing different topologies of frequency-dependent couplings. In some embodiments, an analog computation circuit includes at least two differential pairs of amplification elements. The amplification elements may include, for example, individual MOS transistors or CMOS amplifier pairs. Each of the amplification elements has an inverting input and a non-inverting input. In some embodiments, the inverting input is an input at a gate of an NMOS transistor, while the non-inverting input is an input at the source of the NMOS transistor.
Each of the differential pairs of amplification elements includes a first amplification element and a second amplification element. The first amplification elements have outputs connected to a first differential summing output node, and the second amplification elements have outputs connected to a second differential summing output node. In some embodiments, the differential summing output nodes are connected to respective load impedance. In such embodiments, the voltage across the load resistor has a value that reflects of a sum of outputs of the connected amplification elements. In other embodiments, the differential summing output nodes could be connected to a current mirror or other circuitry adapted to provide an output that reflects a sum of the outputs of the connected amplification elements.
The analog computation circuit is further provided with a plurality of gain-enhancing couplings, such as capacitive couplings. These capacitive couplings fall under two groups: a first plurality and second plurality of gain-enhancing capacitive couplings. Each of the first plurality of gain-enhancing capacitive couplings connects the inverting input of one of the first amplification elements with the non-inverting input of one of the second amplification elements. Each of the second plurality of gain-enhancing capacitive couplings connects the inverting input of one of the second amplification elements with the non-inverting input of one of the first amplification elements. These couplings operate to enhance the gain of the analog computation circuit because each input is represented twice in the output of the analog computation circuit: first as an inverting input that reduces the output at one of the output nodes, and second (through the coupling) as a non-inverting input that increases the output at the opposite output node.
The gain-enhancing capacitive couplings can be connected in various arrangements. In some embodiments, each of first and second plurality of capacitive couplings is connected between amplification elements in the same differential pair, as illustrated in FIG. 3A and FIG. 6. In other embodiments, each of the first and second plurality of capacitive couplings is connected between amplification elements in different differential pairs. As illustrated in FIG. 4 and FIG. 8. In other embodiments, some of the capacitive couplings are connected within a differential pair and other capacitive couplings are connected across different differential pairs. In one such embodiment, the couplings are connected in a cyclic coupling configuration, as illustrated in FIG. 10.
Preferably, each of the inverting inputs is coupled with a unique non-inverting input. That is, each of the inverting inputs of the first amplification elements is connected through one of the first plurality of capacitive couplings with the non-inverting input of a respective second amplification element, and conversely, each of the inverting inputs of the second amplification elements is connected through one of the second plurality of capacitive couplings with the non-inverting input of a respective first amplification element.
The analog computation circuit further includes a plurality of signal input nodes. In some embodiments, each of the signal input nodes has a direct connection to the inverting input of a respective one of the amplification elements. In other embodiments, each of the signal input nodes has a direct connection to the non-inverting input of a respective one of the amplification elements.
In some embodiments, the analog computation circuits described herein are employed in a vector signal decoder. As described above, the ENRZ vector code encodes three bits of information over four wires, using all possible permutations of the signal vectors (+1, −⅓, −⅓, −⅓) and (−1, +⅓, +⅓, +⅓). Where the voltages on the four wires are represented as (A, B, C, D), each of the analog computation circuits can decode one bit of the three-bit code by performing one of the operations described in Equations 2-4, above. Three such circuits operate in parallel on different permutations of the input voltages to return the values of R0, R1, and R2. An exemplary vector signal decoder is illustrated in FIG. 9.
Mention of particular vector signaling codes such as ENRZ in the examples herein are made for purposes of explanation, and are not limiting. Circuits and circuit design elements described herein may be utilized to amplify, equalize, and/or detect signals representing other codes. One familiar with the art will recognize that circuits and circuit design elements described herein may be readily combined with known art to produce further embodiments of the invention.

I claim:
 
1. An apparatus comprising:
a first amplification element comprising a first pair of complimentary MOS transistors, each of the first pair of complimentary MOS transistors having corresponding gate inputs and source inputs, the MOS transistors configured to receive a first signal representing a first symbol of a codeword at the corresponding gate inputs;
a second amplification element comprising a second pair of complimentary MOS transistors having corresponding gate inputs and source inputs, each of the second pair of complimentary MOS transistors configured to receive a second signal representing a second symbol of the codeword at the corresponding gate inputs;
a first frequency-dependent circuit configured to cross-couple the first input signal to the corresponding source inputs of the second pair of complimentary MOS transistors;
a second frequency-dependent circuit configured to cross-couple the second input signal to the corresponding source inputs of the first pair of complimentary MOS transistors; and,
an impedance element connected to the first and second pairs of complimentary MOS transistors, the impedance element configured to generate an amplified codeword identification signal, the first and second amplification elements configured to provide a gain corresponding to a combination of common-source gain and common-gate gain, the common-source gain applied to the corresponding gate inputs of the first and second amplification elements and the common-gate gain applied to the frequency-dependent source inputs of the first and second amplification elements, the amplified codeword identification signal used at least in part to determine a set of output bits represented by the symbols of the codeword.


  
2. The apparatus of claim 1, wherein the symbols of the codeword have values selected from a set of at least three values.

  
3. The apparatus of claim 2, wherein the symbols of the codeword have values selected from the set {±1, ±⅓}.

  
4. The apparatus of claim 3, wherein the codeword is a permutation of (+1, −⅓, −⅓, −⅓) and (−1+⅓, +⅓, +⅓).

  
5. The apparatus of claim 1, wherein the complimentary MOS transistors comprise serially-connected NMOS and PMOS transistors.

  
6. The apparatus of claim 1, wherein each pair of complementary MOS transistors comprises matched transistors.

  
7. The apparatus of claim 1, wherein the amplified codeword signal is a difference signal added to a second amplified codeword signal to form a sum-of-differences signal used in part in determining the set of output bits represented by the symbols of the codeword.

  
8. The apparatus of claim 7, wherein three sum-of-differences signals are used to determine the set of output bits.

  
9. The apparatus of claim 1, wherein the first and second frequency-dependent circuits are resistor-capacitor circuits.

  
10. The apparatus of claim 1, wherein the first and second frequency-dependent circuits are high-pass filters configured to inject high-frequency content of the first and second input signals into the source inputs of the second and first pairs of complementary MOS transistors, respectively.

  
11. A method comprising:
receiving a first signal representing a first symbol of a codeword at corresponding gate inputs of a first amplification element comprising a first pair of complimentary MOS transistors;
receiving a second signal representing a second symbol of the codeword at corresponding gate inputs of a second amplification element comprising a second pair of complimentary MOS transistors;
cross-coupling the first input signal using a first frequency-dependent circuit to corresponding source inputs of the second pair of complimentary MOS transistors;
cross-coupling the second input signal using a second frequency-dependent circuit to corresponding source inputs of the first pair of complimentary MOS transistors; and,
generating an amplified codeword identification signal across an impedance element connected to the first and second pairs of complimentary MOS transistors, the first and second amplification elements providing a gain corresponding to a combination of common-source gain and common-gate gain, the common-source gain applied to the corresponding gate inputs of the first and second amplification elements and the common-gate gain applied to the frequency-dependent source inputs of the first and second amplification elements, the amplified codeword identification signal used at least in part to determine a set of output bits represented by the symbols of the codeword.


  
12. The method of claim 11, wherein the symbols of the codeword have values selected from a set of at least three values.

  
13. The method of claim 12, wherein the symbols of the codeword have values selected from the set {±1, ±⅓}.

  
14. The method of claim 13, wherein the codeword is a permutation of (+1, −⅓, −⅓, −⅓) and (−1+⅓, +⅓, +⅓).

  
15. The method of claim 11, wherein the complimentary MOS transistors comprise serially-connected NMOS and PMOS transistors.

  
16. The method of claim 11, wherein each pair of complementary MOS transistors comprises matched transistors.

  
17. The method of claim 11, wherein the amplified codeword signal is a difference signal, and wherein the method further comprises adding the amplified codeword signal to a second amplified codeword signal to form a sum-of-differences signal used in part in determining the set of output bits represented by the symbols of the codeword.

  
18. The method of claim 17, wherein three sum-of-differences signals are used to determine the set of output bits.

  
19. The method of claim 11, wherein the first and second frequency-dependent circuits are resistor-capacitor circuits.

  
20. The method of claim 11, wherein cross-coupling the first and second input signals injects high-frequency content of the first and second input signals into the source inputs of the second and first pairs of complementary MOS transistors, respectively.