Source: [US6556628B1](https://patents.google.com/patent/US6556628B1)

# [US6556628B1](US6556628B1.md) - Methods and systems for transmitting and receiving differential signals over a plurality of conductors

## Details

* Date: 1999-04-29
* Inventor: University of North Carolina at Chapel Hill
  , 
    University of North Carolina
* Beneficiary: John W. Poulton, Stephen G. Tell, Robert E. Palmer

## Other patents

### Backwards
 * US4486739A
 * US5864587A
 * US6026124A
 * US6178198B1
 * US6359931B1
### Forward
 * US20020152340A1
 * US20030099190A1
 * US20040120419A1
 * US6792105B1
 * US20040196076A1
 * US6842037B1
 * US20050031017A1
 * US20060013331A1
 * US20060140284A1
 * US20060140283A1
 * US20060164264A1
 * US20060165185A1
 * WO2006078730A3
 * [US7142612B2](US7142612B2.md)
 * US20070009018A1
 * US20070080709A1
 * US20070136621A1
 * US20070132485A1
 * US20070160155A1
 * US20070164883A1
 * US20070217312A1
 * US20070241836A1
 * US7358869B1
 * US7363417B1
 * US7400173B1
 * US20080195784A1
 * US20080266019A1
 * US20080278280A1
 * US20080300062A1
 * EP2015533A1
 * US20090092212A1
 * US7519892B1
 * US20090195699A1
 * US7574647B1
 * US20090225873A1
 * US20090279635A1
 * US7656954B1
 * US20110038425A1
 * DE102010039716A1
 * US8208578B2
 * WO2012110634A1
 * US8472551B2
 * US8718184B1
 * US20140254711A1
 * WO2014144283A1
 * WO2014202641A1
 * US8996740B2
 * US9015566B2
 * US9020012B1
 * US9077386B1
 * US9083576B1
 * US9100232B1
 * US9106238B1
 * US9106220B2
 * US9112550B1
 * US9112815B2
 * US9124557B2
 * US9148087B1
 * US20150331820A1
 * US9203402B1
 * US9231790B2
 * US9246713B2
 * US9251873B1
 * US9268683B1
 * US9275720B2
 * CN105393512A
 * US9288089B2
 * [US9288082B1](US9288082B1.md)
 * US9300503B1
 * US9313058B2
 * US9337997B2
 * US9362962B2
 * US9363114B2
 * US9369312B1
 * US9374216B2
 * US9401828B2
 * US9419828B2
 * US9432082B2
 * US9444654B2
 * [US9450744B2](US9450744B2.md)
 * US9461862B2
 * US9479369B1
 * US9509437B2
 * [US9557760B1](US9557760B1.md)
 * US9564994B2
 * [US9577815B1](US9577815B1.md)
 * US9596109B2
 * US9602317B1
 * US9667379B2
 * US9674014B2
 * US9673961B2
 * US9711041B2
 * US9735948B2
 * US9755818B2
 * US9806761B1
 * US20170317855A1
 * [US9832046B2](US9832046B2.md)
 * US9852806B2
 * US9900186B2
 * [US9906358B1](US9906358B1.md)
 * US9985634B2
 * [US10003315B2](US10003315B2.md)
 * [US10003454B2](US10003454B2.md)
 * US10055372B2
 * [US10057049B2](US10057049B2.md)
 * [US10056903B2](US10056903B2.md)
 * [US10091035B2](US10091035B2.md)
 * [US10116468B1](US10116468B1.md)
 * [US10153591B2](US10153591B2.md)
 * [US10200188B2](US10200188B2.md)
 * [US10200218B2](US10200218B2.md)
 * US10203226B1
 * [US10277431B2](US10277431B2.md)
 * [US10326623B1](US10326623B1.md)
 * [US10372665B2](US10372665B2.md)
 * [US10467177B2](US10467177B2.md)
 * [US10554380B2](US10554380B2.md)
 * US10666297B2
## Abstract

Abstract

Methods and systems for differential signaling include transmitting differential signals over N conductors, where N is greater than 2, from a sender to a receiver. The sender includes multiple transmitters that receive digital data and produce output signals based on the digital data. The output signals result in currents on conductors between the transmitters and multiple receivers. For any given symbol, the sum of the currents on the conductors is preferably equal to zero. In addition, a voltage difference preferably exists across the input terminals of each receiver. Methods and systems for coding binary data for transmission over a multi-conductor differential signaling system include converting input binary data into symbol numbers, converting the symbol numbers into valid drive words for a multi-conductor differential signaling system, and inputting the valid drive words to multiple differential transmitters.



Methods and systems for differential signaling include transmitting differential signals over N conductors, where N is greater than 2, from a sender to a receiver. The sender includes multiple transmitters that receive digital data and produce output signals based on the digital data. The output signals result in currents on conductors between the transmitters and multiple receivers. For any given symbol, the sum of the currents on the conductors is preferably equal to zero. In addition, a voltage difference preferably exists across the input terminals of each receiver. Methods and systems for coding binary data for transmission over a multi-conductor differential signaling system include converting input binary data into symbol numbers, converting the symbol numbers into valid drive words for a multi-conductor differential signaling system, and inputting the valid drive words to multiple differential transmitters.

GOVERNMENT INTEREST
This invention was made with government support under Defense Advanced Research Projects Agency (DARPA) contract number E253. The Government has certain rights to this invention.
TECHNICAL FIELD
The present invention relates generally to improved methods and systems for transmitting and receiving differential signals. More particularly, the present invention relates to methods and systems for transmitting and receiving differential signals over a plurality of conductors.
RELATED ART
Signaling is the method by which information is communicated from one part of an electronic system to another. In single-ended signaling, a single conductor, such as a wire, is used to transmit data from a transmitter to a receiver. In binary single-ended signaling, a transmitter encodes a binary digit as a voltage value or a current value on the conductor. For example, in binary single-ended signaling systems commonly used in computer communications, a logical “1” may be indicated by a voltage of about +5 volts and a logical “0” may be indicated by a voltage of about 0 volts. A receiver converts the signal on the conductor into a binary digit by comparing a received voltage or current with a local reference voltage or current.
FIG. 1 is a circuit diagram illustrating a conventional binary single-ended signaling system. In this system, a transmitter 100 receives binary data and outputs a voltage signal on a conductor 102 based on the state of the binary data. For example, if the transmitter 100 receives a logical “1”, the transmitter 100 may output a signal of about +5V on the conductor 102. If the transmitter receives a logical “0”, the transmitter may output a signal of about 0V on the conductor 102. The two possible values, 0V and +5V, of the signal represent two possible symbols or data units of the binary single-ended signaling system. The symbols encode the data bits “0” and “1”. A receiver 104 comprises a comparator that converts the voltage on the conductor 102 to binary data by comparing the received signal to a reference voltage VREF. If the voltage of the received signal is greater than the voltage VREF, the receiver outputs a high voltage or logical “1”. If the voltage on the conductor 102 is less than the voltage VREF, the receiver 104 outputs a low voltage or logical “0”.
One problem associated with conventional single-ended signaling systems is that the requirement of a local reference voltage at the receiver results in increased power consumption. For example, the power required to transmit one bit in a single-ended signaling system includes not only the power required to send the signal over conductor 102, but also power required by a direct current voltage source to provide the reference voltage VREF at the receiver. Another problem associated with requiring a local reference at the receiver is that engineering a stable reference voltage may be difficult.
Another disadvantage associated with conventional single-ended signaling systems is that noise introduced in the signal transmitted over the conductor 102 may result in bit errors in the binary data output from the receiver 104. For example, the transmitter may encode a logical “0” as a low voltage signal on the transmission line. Additive noise may be introduced into the channel between the transmitter 100 and the receiver 104 and cause the low voltage signal to rise above the threshold voltage VREF. As a result, the receiver 104 may decode the signal as a logical “1” when a logical “0” was intended to be transmitted.
In order to alleviate the problems of requiring a local reference and bit errors caused by additive noise, differential signaling systems have been developed. In a differential signaling system, two conductors are oppositely driven to transmit a single signal. The receiver detects the difference between the voltages or currents on the two conductors. As a result, no local reference is required at the receiver. In addition, if the conductors are physically similar and positioned close to each other, noise introduced into the channel will be common to both conductors or common-mode noise. Receivers can be easily designed, e.g., using differential amplifiers, to cancel the common-mode noise.
FIG. 2 illustrates an example of a conventional differential signaling system. In FIG. 2, a transmitter 200 converts an input stream of binary data bits into a pair of equal and opposite currents at its outputs. The currents are transmitted through a pair of conductors 201 and 202 to a receiver 203. In order to transmit a logical “1” to the receiver 203, the transmitter 200 generates current flowing towards the receiver on the conductor 201 and an equal but opposite current flowing towards the transmitter 200 on the conductor 202. Similarly, in order to transmit a logical “0”, the transmitter generates a current flowing towards the transmitter on the conductor 201 and an equal but opposite current flowing towards the receiver 203 on the conductor 202.
In order to decode the received signals, the receiver 203 detects the voltage difference between ends 204 and 205 of a resistive terminator 206. If the voltage difference is positive, i.e., the voltage at end 204 is higher than the voltage at end 205, the receiver 203 may output a logical “1”. If the voltage difference is negative, i.e., the voltage at the end 204 is lower than the voltage at the end 205, the receiver 203 may output a logical “0”. In addition to converting the currents on the conductors 201 and 202 into voltages, the terminator 206 also reduces reflections on the conductors 201 and 202.
In addition to the advantages of operating without a local reference voltage and rejecting common-mode noise, differential signaling systems provide a larger signal swing for detection by the receiver than single-ended systems. For example, the voltage on each of the conductors 201 and 202 may swing from +V to −V, resulting in a voltage difference of 4V volts between symbols. Applying the same voltage ranging from −V volts to +V volts to a conductor of a single-ended signaling system results in a voltage difference of, at most, 2V volts difference between symbols. As a result of the increased voltage difference between symbols, differential signals have increased immunity to noise.
One disadvantage of differential signaling systems with respect to single-ended signaling systems is that conventional differential signaling systems require twice as many conductors as single-ended systems to transmit a given signal. That is, for a signal having M different signal levels or symbols, where M=2, one bit is transmitted per symbol in both single-ended and differential signaling systems. However, in single-ended signaling systems, the number of bits per symbol per conductor is 1; whereas, in differential signaling systems, the number of bits per symbol per conductor is 0.5. Thus, conventional two-conductor differential signaling systems are one-half as efficient as single-ended signaling systems with respect to the number of bits transmitted per symbol per conductor.
In order to improve the bits-per-conductor efficiency of differential signaling systems, pairs of differential signal conductors may be connected and driven to create additional channels per conductor. FIG. 3 illustrates one conventional method for improving the efficiency of a differential signaling channel. In FIG. 3, three differential channels X, Y, and Z are implemented using four conductors. Channels X and Y are conventional differential channels. The third channel, channel Z, is created without adding additional conductors. In the telephony industry, the third channel, channel Z, is referred to as a phantom channel.
In FIG. 3, channel X consists of a transmitter 300, conductors 301 and 302, a receiver 303, and center-tapped terminators 304 and 305. Channel Y consists of a transmitter 306, conductors 307 and 308, a receiver 309, and center-tapped terminators 310 and 311. In the illustrated circuit, the transmitter 300 transmits differential signals to the receiver 303 over the conductors 301 and 302, based on the digital input data XIn. Similarly, the transmitter 306 transmits differential signals to the receiver 309 over the conductors 307 and 308, based on the digital input data YIn.
The phantom channel, channel Z, is created by.driving the common-mode voltage of the X and Y channels. More particularly, a transmitter 312 is connected to the center taps of the terminators 305 and 311. A receiver 313 is connected to the center taps of the terminators 304 and 310. The transmitter 312 establishes a voltage difference between the center taps of the terminators 304 and 310 in response to the signal ZIn. The receiver 313 detects the voltage difference across the center taps of the terminators 304 and 310 and produces a digital output signal ZOut. The voltage difference generated by the transmitter 312 does not affect the signals XOut or YOut because the receivers 303 and 309 cancel the signal produced by the transmitter 312. The phantom channel creates an additional data path between the transmitters and receivers without requiring an additional conductor between the transmitters and receivers. Since the illustrated system is capable of transmitting three bits per symbol on four conductors, the efficiency is 0.75 bits per symbol per conductor.
FIG. 4 illustrates a well known conventional extension of the idea of driving the common-mode voltages of differential channels in which seven data channels are created using four pairs of differential conductors. In FIG. 4, channels X, Y, X′, and Y′ are conventional differential channels, as previously described. Channels Z and Z′ are phantom channels, as described with respect to FIG. 3. A seventh channel, channel W, is created by driving and detecting the common-mode voltage of the phantom channels Z and Z′. The seventh channel is referred to in the telephony industry as a ghost channel. Because eight conductors are used to transmit seven symbols, each symbol encodes one bit, the efficiency of a communications system including a ghost channel is 7/8 bits per symbol per conductor.
The idea of driving the common-mode voltages of differential channels can be further extended to include a wraith channel. A wraith channel is created by driving the common-mode voltage of two ghost channels. In a system including a wraith channel, for two signal levels, 16 conductors transmit 15 symbols, and each symbol encodes one bit. Thus, the efficiency of a system using a wraith channel is 15/16 bits per symbol per conductor, which is near the efficiency of a single-ended signaling system.
One problem with the phantom/ghost/wraith channel hierarchy is that the absolute value of signals at a given receiver may be driven outside the common-mode range of the receiver. The common-mode range is the allowable voltage range at the input terminals of the receiver. In practice, the common-mode range may be limited such that the absolute voltage at either input terminal of the receiver never exceeds the voltage on the higher power supply terminal, nor falls below the voltage on the lower power supply terminal. Thus, even though phantom, ghost, and wraith channels improve the efficiency of differential signaling systems, they are limited by common-mode voltage range of the receiver. In addition, phantom, ghost, and wraith channels are unable to achieve the efficiency in bits per symbol per conductor of a single-ended signaling system.
One conventional method that may be used to improve the efficiency of any signaling system is to transmit more than one bit per symbol. In order to transmit more than one bit per symbol, more than two symbols for encoding data are required. One method of providing multiple symbols is to utilize multiple signal levels, where each signal level represents a different symbol. This technique is referred to as amplitude modulation. For example, a signaling system may include three possible signal levels: −V, 0, and +V, corresponding to three symbols. In a single-ended signaling system, an efficiency of log2(N), where N is the number of symbols, can be achieved. Therefore, for three symbols, an efficiency of log2(3) or about 1.5 bits per symbol per conductor can be achieved. The efficiency of a corresponding differential signaling system is 0.75. However, as discussed above, single-ended signaling systems require a local reference at the receiver, and when transmitting multiple signal levels, multiple references are required at the receiver. A conventional multi-level differential signaling system requires a receiver that compares the magnitude of the received signal to one or more references. Providing multiple receiver references increases power consumption and requires the engineering of stable DC sources.
Therefore, there exists a long-felt need for a differential signaling system having improved efficiency with respect to the number of bits transmitted per symbol per conductor, without requiring a local reference at the receiver.
DISCLOSURE OF THE INVENTION
Methods and systems for differential signaling according to the present invention result in increased efficiency in bits per symbol per conductor over conventional differential signaling systems. In order to achieve this increased efficiency, output signals from differential transmitters are summed and transmitted over multiple conductors to differential receivers. Summing the output signals results in multiple signal levels being transmitted to the receivers. However, unlike conventional multi-level signaling, no local reference is required at the receivers. The receivers need only detect the sign (positive or negative) of the received signal.
As used herein, the term “symbol” refers to a data unit transmitted or received during a single time period, such as a system clock period. The time period for transmitting or receiving a symbol is referred to herein as a symbol time. In a single-conductor signaling system, a symbol may be defined as a signal voltage or current level on the conductor. In a multi-conductor signaling system, a symbol may be defined as a combination of voltage or current levels on the conductors.
It is therefore the object of the present invention to provide methods and systems for transmitting and receiving differential signals over a plurality of conductors with improved efficiency in terms of the number of bits transmitted per symbol per conductor.
It is another object of the present invention to provide methods and systems for encoding and decoding binary data to be transmitted over a multi-conductor signaling system according to embodiments of the present invention.
Some of the objects of the invention having been stated hereinabove, other objects will become evident as the description proceeds, when taken in connection with the accompanying drawings as best described hereinbelow.
BRIEF DESCRIPTION OF THE DRAWINGS
A description of the present invention will now proceed with reference to the accompanying drawings of which:
FIG. 1 is a circuit diagram illustrating a conventional single-ended signaling system;
FIG. 2 is a circuit diagram illustrating a conventional two-conductor differential signaling system;
FIG. 3 is a circuit diagram illustrating a conventional differential signaling system including a phantom channel;
FIG. 4 is a circuit diagram illustrating a conventional differential signaling system including a ghost channel;
FIG. 5 is a circuit diagram illustrating an exemplary three-conductor differential signaling system according to an embodiment of the present invention;
FIG. 5(a) is a circuit diagram illustrating signal currents flowing through the terminator of the three-conductor differential signaling system illustrated in FIG. 5;
FIG. 6 is a circuit diagram illustrating an exemplary four-conductor differential signaling system according to an embodiment of the present invention;
FIG. 6(a) is a circuit diagram illustrating signal currents flowing through the terminator of the four-conductor signaling system illustrated in FIG. 6;
FIG. 7 is a logic diagram illustrating an exemplary encoder for converting symbol numbers into valid drive words for the three-conductor differential signaling system illustrated in FIG. 5;
FIG. 8 is a logic diagram illustrating an exemplary decoder for converting data output from the differential receivers into corresponding symbol numbers for the three-conductor differential signaling system illustrated in FIG. 5;
FIG. 9 is a logic diagram illustrating an exemplary encoder for converting a five-bit symbol number into a valid drive word for the four-conductor differential signaling system illustrated in FIG. 6;
FIG. 10 is a schematic diagram including a truth table for encoding a nine-bit data word and a control bit into two five-bit symbol numbers according to an embodiment of the present invention;
FIG. 11 is a logic diagram of an encoder corresponding to the truth table illustrated in FIG. 10;
FIG. 12 is a logic diagram of a decoder corresponding to the truth table illustrated in FIG. 10;
FIG. 13 is a schematic diagram of a three-conductor differential signaling system in which the transmitters output signal voltages according to an embodiment of the present invention; and
FIG. 14 is a schematic diagram of an exemplary current-mode transmitter implemented in CMOS technology according to an embodiment of the present invention.
BEST MODE FOR CARRYING OUT THE INVENTION
Embodiments of the present invention include methods and systems for transmitting N!/(2(N−2)!) differential signals over N conductors between groups of differential transmitters and receivers, where N is an integer, preferably greater than two. The following description includes examples of differential signaling systems for N=3 and N=4. However, the multi-conductor signaling systems of the present invention may include any number of conductors.
Three Conductor Differential Signaling
FIG. 5 illustrates a three-conductor differential signaling system according to an embodiment of the present invention. In the illustrated embodiment, transmitters 500-502 transmit currents IA, IB, and IC over three conductors 503-505 to receivers 506-508. Each of the transmitters 500-502 may be a differential current transmitter that receives digital data at an input terminal, and produces first and second complementary currents at first and second output terminals. Exemplary circuit elements that may be used as the transmitters 500-502 are known as line drivers. The conductors 503-505 are each connected to more than one of the outputs of the transmitters 500-502 such that each of the currents IA, IB, and IC is the sum of the output currents from two of the transmitters.
The present invention is not limited to transmitters that produce currents based on the input data. For example, in an alternative embodiment, the transmitters 500-502 may each comprise a differential voltage transmitter that receives the digital data at an input terminal, and produces first and second complementary output voltages at first and second output terminals, based on the digital data. In such an embodiment, a resistor network or other appropriate means is preferably connected to the output of the transmitters to sum the six output voltages from the transmitters onto three conductors. A voltage-mode embodiment of a three-conductor signaling system according to the invention will be described in more detail below.
The conductors 503-505 may be any type of conductors capable of carrying an electrical signal. For example, in a computer communications system, the conductors may comprise traces on a printed circuit board. In an alternative embodiment, the conductors may comprise wires used to connect one electronic system with another electronic system for high speed serial communications. In order to facilitate noise reduction at the receiver, the conductors 503-505 are preferably physically similar to each other and positioned closely to each other. Utilizing conductors of similar structure and positioning the conductors closely to each other increases the likelihood that noise introduced into the system will be common-mode noise. Common-mode noise can be easily rejected utilizing receivers with high common-mode rejection ratios.
In the embodiment illustrated in FIG. 5, a terminator 509 includes resistors RA, RB, and RC. The resistors RA, RB, and RC preferably have resistance values selected to reduce reflections on the conductors 503-505. For example, the resistance value of each of the resistors may be chosen to have a predetermined relationship with the characteristic impedances of the conductors 503-505. For example, each of the resistance values may be equal to the average of the modal characteristic impedances of the conductors 503-505.
In addition to reducing reflections, the resistors RA, RB, and RC convert the currents IA, IB, and IC into voltages to be detected by the receivers 506-508. Because the currents on the conductors 503-505 are preferably not equal to each other, there will be a voltage difference for detection across the resistors RA, RB, and RC.
The receivers 506-508 may be any type of differential receivers. For example, in the illustrated embodiment, the receivers are comparators. Each of the receivers includes an inverting input and a non-inverting input connected across one of the resistors RA, RB, and RC. Each of the receivers 506-508 produces a digital output signal XOut-ZOut based on the voltage difference at its input terminals.
FIG. 5(a) illustrates the terminator 509 and the currents IAB, IBC, and ICA flowing through the resistors RA, RB, and RC. Applying Kirchoff's voltage and current laws, the nodal equations for the currents illustrated in FIG. 5(a) are:


 I A =I AB −I CA,  (1)




 I B =I BC −I AB, and  (2)




 I C =I CA −I BC.  (3)


The voltages across the input terminals of the receivers 506-508 are:


 V AB =I AB R A,  (4)




 V BC =I BC R B, and  (5)




 V CA =I CA R C.  (6)


Applying Kirchoff's voltage law to the terminator, the sum of the voltages across the terminator resistors is zero. As a result, when RA=RB=RC=R,


 I AB +I BC +I CA=0.  (7)


Subtracting equation (1) from equation (2)


 I A −I B =I AB −I CA −I BC +I AB2I AB =I A =I B +I BC +I CA.  (8)


From equation (7), IBC+ICA=−IAB. Thus, equation (8) can be rewritten as


2I AB =I AB −I B −I AB I AB=⅓(I A −I B).  (9)


Equations for IBC and ICA are derived in a manner similar to equation (9).


 I BC=⅓(I B −I C)  (10)




 I CA=⅓(I C −I A)  (11)


From equations (4), (5), and (6), the voltages across the terminator resistors are:


 V AB =I AB R,




 V BC =I BC R, and




 V CA =I CA R.


Thus, substituting equations (9), (10), and (11) into equations (4), (5), and (6), the voltages across the receiver inputs are:


 V AB=⅓R(I A −I B),  (12)




 V BC=⅓R(I B −I C), and  (13)




 V CA=⅓R(I C −I A),  (14)


According to an important aspect of the invention, it is preferable that a voltage or current difference exist at the input terminals of each of the receivers. In the illustrated embodiment, the voltage difference at the receivers is determined by the differences between the currents IA, IB, and IC, as defined in equations (12), (13), and (14). Thus, in order for the voltage difference across the input terminals of the receivers to be non-zero, it is preferable that IA≠IB≠IC.
According to another important aspect of the invention, it is preferable that the sum of the currents IA, IB, and IC be equal to zero for any given symbol. For example, if IA=2A and IB=−2A for a given symbol, then it is preferable that IC=0A.
According to yet another important aspect of the invention, it is preferable that the number of signal levels be equal to the number of conductors between a group of transmitters and a group of receivers. For example, in the embodiment illustrated in FIG. 5, three conductors connect the transmitters to the receivers. Thus, in such an embodiment, it is preferable that IA, IB, and IC have no more than three different signal levels. Utilizing a number of signal levels equal to the number of conductors allows received signals to be decoded without requiring a local reference at the receivers.
Table 1 shown below illustrates permissible current values for the currents IA, IB, and IC. Table 1 also illustrates the voltages appearing across the input terminals of the receivers. In the table, “i” represents the current output from one output terminal of each of the transmitters, “V” represents the voltage drop across each of the terminator resistors, and “R” represents the resistance of each of the terminator resistors. The conditions that IA, IB, and IC be unequal and sum to zero allows one of six possible symbols to be transmitted during each time period.



 
 
TABLE 1
 
 
 
Permissible Currents, Receiver Input Voltages, and Corresponding
 
Bit Values for Three-Conductor Differential Signaling
 
 
 
 
 
 
 
 
 
 
 
IA 
IB 
IC 
VA-B 
VB-C 
VC-A 
X
Y
Z
 
 
 
−2i
0
+2i
−2/3V
−2/3V
+4/3V
0
0
1
 
0
+2i
−2i
−2/3V
+4/3V
−2/3V
0
1
0
 
−2i
+2i
0
−4/3V
+2/3V
+2/3V
0
1
1
 
+2i
−2i
0
+4/3V
−2/3V
−2/3V
1
0
0
 
0
−2i
+2i
+2/3V
−4/3V
+2/3V
1
0
1
 
+2i
0
−2i
+2/3V
+2/3V
−4/3V
1
1
0
 
 
 









The leftmost three columns in Table 1 illustrate current values corresponding to each of the six symbols. The three central columns in Table 1 represent the voltage differences across the receiver inputs corresponding to each of the six symbols. The rightmost three columns in Table 1 illustrate valid input bit combinations that correspond to the permissible current values. The six symbols represent six of eight possible encodings of three binary digits. The bit combinations 000 and 111 are preferably not allowed, since these bit patterns would result in voltage differences of zero volts across the receiver inputs.
In the illustrated example, one of six possible symbols representing one of six possible bit patterns may be transmitted during each symbol time. Thus, each symbol encodes log2(6), or approximately 2.5 bits. The symbols are transmitted over three conductors. As a result, the efficiency of the three-conductor differential signaling system according to the present embodiment is log2(6)/3, or approximately 0.83 bits per symbol per conductor. Conventional two-conductor differential signaling systems are capable of transmitting data at 0.5 bits per symbol per conductor. Thus, the present embodiment is capable of transmitting data 67% more efficiently than conventional two-conductor differential signaling systems.
Moreover, no reference is required at the receiver, since each set of transmitted voltages or currents produces voltage differences at each pair of receiver inputs. In addition, since the three conductors are preferably physically similar and closely coupled to each other, noise injected into the system will be common-mode noise that can be easily rejected by the receivers. The power required by a typical three-conductor system according to the present embodiment is lower than the power required by three single-ended channels. However, the power per conductor is higher than the power per conductor of a conventional two-conductor differential signaling system by a factor of three. As a result, improved efficiency has a cost in increased power consumption.
In computer communication systems, data is commonly transferred in eight-bit units, known as bytes. Since eight bits correspond to 28=256 possible symbols, it is preferable to design a signaling system capable of producing at least 256 symbols. Since the three-conductor differential signaling system described above utilizes base-six symbols, it is preferable to extend the number of symbols transmitted by the system in powers of six to produce at least 256 symbols. For example, 64=1296 is the lowest power of six that results in greater than 256 symbols. Four of the three-conductor differential signaling systems illustrated in FIG. 5 may, be connected in parallel to produce 1296 symbols during a single symbol time. Alternatively, a single three-conductor signaling system as illustrated in FIG. 5 may send symbols over four successive time intervals to produce 1296 symbols. In either system, a surplus of 1296−256=1040 symbols results. The surplus symbols may be used for a variety of tasks, including parity, ensuring sufficient bit transitions, clock recovery, DC balancing, sending out-of-band control characters, and/or error detection. Coding for multi-conductor signaling systems according to the embodiments of the invention will be discussed in more detail below.
Four-conductor Differential Signaling
FIG. 6 illustrates a four-conductor differential signaling system according to an embodiment of the present invention. In the illustrated embodiment, transmitters 600-605 transmit currents IA, IB, IC, and ID over four conductors 606-609 to receivers 610-615. The transmitters 600-605 each comprise a differential current transmitter that receives digital data at an input terminal and produces first and second complementary currents at first and second output terminals, based on the digital data. Exemplary circuit elements that may be used as the transmitters 600-605 are referred to as line drivers. The conductors 606-609 are each connected to multiple outputs of the transmitters 600-605, such that the currents IA, IB, IC, and ID are each the sum of three of these outputs.
The present invention is not limited to transmitters that produce currents based on the input data. For example, in an alternative embodiment, the transmitters 600-605 may each comprise a differential voltage transmitter having an input that receives the digital data at an input terminal and produces first and second complementary voltages at first and second output terminals, based on the digital data. In such an embodiment, a resistor network or other appropriate means is preferably connected to the output of the transmitters to sum the 12 output voltages from the transmitters onto four conductors.
The conductors 606-609 may be any type of conductors capable of carrying an electrical signal. For example, in a computer communications system, the conductors may comprise traces on a printed circuit board. In an alternative embodiment, the conductors may comprise wires used to connect one electronic system with another electronic system for high speed serial communications. In order to facilitate noise reduction at the receiver, the conductors 606-609 are preferably physically similar to each other and positioned closely to each other. Utilizing conductors of similar structure and positioning the conductors near each other increases the likelihood that noise introduced into the system will be common-mode noise. Common-mode noise can be easily rejected utilizing a receiver with a high common-mode rejection ratio.
A terminator 616 includes resistors R1-R6. The resistors R1-R6 preferably have resistance values selected to reduce reflections on the conductors 606-609. For example, the resistance values of each of the resistors may be chosen to have a predetermined relationship with the characteristic impedances of the conductors 606-609. For example, the resistances may each be equal to the average of the modal characteristic impedances of the conductors 606-609.
In addition to reducing reflections, the resistors R1-R6 convert the currents IA, IB, IC, and ID into voltages to be detected by the receivers 610-615. Because the currents on the conductors 606-609 are preferably not equal to each other, there will be a voltage difference for detection across the resistors R1-R6.
The receivers 610-615 may be any type of differential receivers. For example, in the illustrated embodiment, the receivers are comparators. Each of the receivers includes an inverting input and a non-inverting input connected across one of the resistors R1-R6. Each of the receivers 610-615 produces a digital output signal XOut-WOut based on the voltage difference at its input terminals.
FIG. 6(a) illustrates the terminator 616 and the currents through each of the terminator resistors R1-R6. Applying Kirchoff s current law to each of the nodes in the terminator, the nodal equations are:


 I A =I AB +I AC −I DA,  (12)




 I B =I BC −I AB +I BD,  (13)


 I C =I CD −I BC −I AC, and  (15)


 I D =I DA −I BD −I CD.  (16)


Applying Kirchoff's voltage law to the loops of the terminator, the loop equations are:


 V AB +V BC +V DA=0,  (17)




 V AB +V BD +V DA=0,  (18)




 V AC +V CD +V DA=0, and  (19)




 V BC +V CD −V BD=0.  (20)


Since VAB=IABR, VBC=IBCR, VAC=IACR, and VCD=ICDR, the equations corresponding to equations (17)-(20) for the currents are:


 I AB +I BC +I DA=0,  (21)




 I AB +I BD +I DA=0,  (22)




 I AC +I CD +I DA=0, and  (23)




 I BC +I CD −I BD=0.  (24)


From equations (17)-(24), the equations for the voltages at the receiver input terminals for the four-conductor differential signaling system illustrated in FIG. 6 are:


 V AB=¼*R(I A −I B),  (25)




 V BC=¼*R(I B −I C),  (26)




 V CD=¼*R(I C −I D), and  (27)




 V DA=¼R(I D −I A).  (28)


In order for a voltage difference to be present at each of the receivers, equations (25)-(28) illustrate that it is preferable that IA≠IB≠IC≠ID. In addition, since four conductors connect the transmitters to the receivers, there are preferably four signal levels for each of the currents IA, IB, IC, and ID. Finally, for each combination of currents IA, IB, IC, and ID, it is preferable that the currents sum to zero.
Table 2 illustrates permissible values of the currents IA, IB, IC, and ID that satisfy the preferred signaling conditions. In the table, the leftmost four columns correspond to current values for each of the symbols in the four-conductor differential signaling system. For example, in the first row, the first symbol that may be transmitted corresponds to current values of IA=−3i, IB=−i, IC=i, and ID=3i. This symbol satisfies the preferred condition that the currents sum to zero because −3i−i+i+3i=0. The central six columns in the table illustrate the voltage differences across the inputs of the six differential receivers illustrated in FIG. 6. The non-zero voltage values in the six central columns indicate that each of the symbols results in non-zero voltage differences at the receivers.



 
 
TABLE 2
 
 
 
Permissible Currents, Receiver Input Voltages, and Corresponding Bit
 
Values for Four-Conductor Differential Signaling
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
IA 
IB 
IC 
ID 
VA-B 
VB-C 
VC-D 
VD-A 
VA-C 
VB-D 
X
Y
Z
U
V
W
 
 
 
−3i
−i
+i
+3i
−1/2V
−1/2V
−1/2V
+3/2V
−V
−V
0
0
0
1
0
0
 
−i
+i
+3i
−3i
−1/2V
−1/2V
+3/2V
−1/2V
−V
+V
0
0
1
0
0
1
 
−3i
−i
+3i
+i
−1/2V
−V
+1/2V
+V
−3/2V
−1/2V
0
0
1
1
0
0
 
−3i
+i
+3i
−i
−V
−1/2V
+V
+1/2V
−3/2V
+1/2V
0
0
1
1
0
1
 
+i
+3i
−3i
−i
−1/2V
+3/2V
−1/2V
−1/2V
+V
+V
0
1
0
0
1
1
 
−3i
+i
−i
+3i
−V
+1/2V
−V
+3/2V
−1/2V
−1/2V
0
1
0
1
0
0
 
−3i
+3i
−i
+i
−3/2V
+V
−1/2V
+V
−1/2V
+1/2V
0
1
0
1
0
1
 
−i
+i
−3i
+3i
−1/2V
+V
−3/2V
+V
+1/2V
−1/2V
0
1
0
1
1
0
 
−i
+3i
−3i
+i
−V
+3/2V
−V
+1/2V
+1/2V
+1/2V
0
1
0
1
1
1
 
−i
+3i
+i
−3i
−V
+1/2V
+V
−1/2V
−1/2V
+3/2V
0
1
1
0
0
1
 
+i
+3i
−i
−3i
−1/2V
+V
+1/2V
−V
+1/2V
+3/2V
0
1
1
0
1
1
 
−3i
+3i
+i
−i
−3/2V
+1/2V
+1/2V
+1/2V
−V
+V
0
1
1
1
0
1
 
+3i
−3i
−i
+i
+3/2V
−1/2V
−1/2V
−1/2V
+V
−V
1
0
0
0
1
0
 
−i
−3i
+i
+3i
+1/2V
−V
−1/2V
+V
−1/2V
−3/2V
1
0
0
1
0
0
 
+i
−3i
−i
+3i
+V
−1/2V
−V
+1/2V
+1/2V
−3/2V
1
0
0
1
1
0
 
+i
−3i
+3i
−i
+V
−3/2V
+V
−1/2V
−1/2V
−1/2V
1
0
1
0
0
0
 
+i
−i
+3i
−3i
+1/2V
−V
+3/2V
−V
−1/2V
+1/2V
1
0
1
0
0
1
 
+3i
−3i
+i
−i
+3/2V
−V
+1/2V
−V
+1/2V
−1/2V
1
0
1
0
1
0
 
+3i
−i
+i
−3i
+V
−1/2V
+V
−3/2V
+1/2V
+1/2V
1
0
1
0
1
1
 
−i
−3i
+3i
+i
+1/2V
−3/2V
+1/2V
+1/2V
−V
−V
1
0
1
1
0
0
 
+3i
−i
−3i
+i
+V
+1/2V
−V
−1/2V
+3/2V
−1/2V
1
1
0
0
1
0
 
+3i
+i
−3i
−i
+1/2V
+V
−1/2V
−V
+3/2V
+1/2V
1
1
0
0
1
1
 
+i
−i
−3i
+3i
+1/2V
+1/2V
−3/2V
+1/2V
+V
−V
1
1
0
1
1
0
 
+3i
+i
−i
−3i
+1/2V
+1/2V
+1/2V
−3/2V
+V
+V
1
1
1
0
1
1
 
 
 









The rightmost six columns represent valid input bit combinations corresponding to each symbol. For six binary data bits, there are 26=64 possible bit combinations. However, 40 of these combinations fail to satisfy the preferred signal current conditions, resulting in 24 permissible symbols. Since each symbol represents 1 of 24 potential bit combinations, each symbol encodes log2(24)=4.585 bits. In the embodiment illustrated in FIG. 6, each symbol is transmitted over four conductors. Thus, the efficiency of the system is 4.585/4=1.146 bits per symbol per conductor. The efficiency of a single-ended signaling system is 1 bit/symbol/conductor. The efficiency of a four-conductor differential signaling system according to the present embodiment is thus higher than the efficiency of a single-ended signaling system.
In order for the system illustrated in FIG. 6 to be useful in computer communications, it is preferable that a coding scheme be selected that is capable of encoding eight-bit data units. Since 28=256 symbols are required to encode all possible combinations of eight bits, it is preferable that the signaling system illustrated in FIG. 6 be extended to produce at least 256 symbols. The illustrated system is capable of producing 24 symbols. The lowest power of 24 that exceeds 256 is the second power. Thus, two of the four-conductor signaling systems illustrated in FIG. 6 may be connected in parallel to produce at least 256 symbols during a single symbol time. In an alternative arrangement, a single four-conductor signaling system as illustrated in FIG. 6 may transmit symbols in two successive time periods to produce 576 symbols. Since 242=576, there is a surplus of 576-256=320 symbols, which can be used for parity, error correction, DC balancing, or any other useful function. Coding for four-conductor differential signaling systems will be discussed in more detail below.
Although the embodiments described above with respect to FIGS. 5 and 6 are three- and four-conductor signaling systems, the present invention is not limited to these embodiments. For example, the signaling techniques according to the present invention can be extended to any N-conductor signaling system provided that the following two conditions are followed:
1. The sum of the currents flowing through the conductors between the transmitter and the receiver is preferably zero.
2. The voltage difference between any pair of receiver input terminals is preferably non-zero.
In the differential signaling systems according to embodiments of the present invention, N−1 transmitter terminals are connected to each conductor, where N is an integer, preferably greater than two. Since receivers are connected across all pairs of conductors, the second condition on the signal currents implies that each of the conductors carry different currents. Each conductor may carry a current ranging from about −(N−1)*i to no more than about +(N−1)*i, where i is the current output from a single transmitter, since there are preferably N−1 transmitter terminals attached to each conductor. In order to provide different currents on each conductor, the transmitter output terminals are preferably connected to the conductors such that the currents range from about −(N−1)*i to no more than about +(N−1)*i in steps of 2i, resulting in N distinct signal levels. The valid symbols are permutations of these currents, so that there are P(N)=N! possible states or symbols for an N-conductor signaling system. The efficiency of such a system is 2(log2(N!))/N bits per symbol per conductor. The number of transmitters (and receivers) is found by computing N things taken two at a time (N-choose-2), or


 C(N,2)=P(N,2)/2!=N!/(2(N−2)!),  (29)


where P(N,2) is the number of permutations of N things taken 2 at a time.
The present invention can also be generalized for transmitters and receivers that communicate using signal voltages rather than signal currents. In such an embodiment, both of the conditions described above for signal currents are preferably maintained. In such an embodiment, the voltages on N conductors preferably range from about −(N−1)*v to no more than about +(N−1)*v. In addition, in order to maintain the second condition, the transmitter output terminals are preferably connected to the conductors such that the voltages range from about −(N−1)*v to no more than about +(N−1)*v, in steps of 2v. The efficiency for a signaling system transmitting voltage signals rather than current signals is the same as a system that transmits current symbols, e.g., 2(log2(N!))/N bits per symbol per conductor.
Table 3 shown below illustrates the number of conductors, the number of transmitters and receivers, the number of symbols, and the efficiency of exemplary multi-conductor signaling systems according to embodiments of the present invention. In the table, the first column represents the number of conductors for N-conductor signaling systems according to embodiments of the present invention. The second column represents the number of transmitters or receivers. The number of transmitters is preferably equal to the number of receivers. As stated above, the number of transmitters and receivers is equal to N!/(2(N−2)!). The third column represents the number of symbols for each system, which is equal to N!. Finally, the fourth column represents the efficiency of each system in bits per symbol per conductor.



 
 
TABLE 3
 
 
 
Symbols and Efficiency for N-Conductor Differential Signaling
 
 
 
 
 
 
 
N!/(2 · (N-2)!)
 
 
 
 
(number of
 
 
 
transmitters =
 
Efficiency
 
N
number of
N!
(bits/symbol/
 
(# conductors)
receivers)
(# symbols)
conductor)
 
 
 
 
 
 
 
 
2
1
2
0.5
 
3
3
6
0.8617
 
4
6
24
1.1462
 
5
10
120
1.3814
 
6
15
720
1.5820
 
7
21
5,040
1.7570
 
8
28
40,320
1.9124
 
9
36
362,880
2.0521
 
10
45
3,628,800
2.1791
 
 
 











As N increases in an N-conductor signaling system according to an embodiment of the present invention, the power required to deliver a given amount of bandwidth increases more rapidly than the power for a group of conventional two-conductor differential signaling systems delivering the same bandwidth. For example, the transmission power required for an N-conductor differential signaling system according to an embodiment of the present invention increases with the number of transmitters, which is illustrated in the second column of the table. For a four-conductor system, the required transmission power is 6i2R, where i is the signal current output from one of the transmitters and R is the resistance of one of the terminator resistors. Such a system delivers 4.5 bits per symbol per conductor. In order to deliver an equivalent bandwidth, 4.5 conventional two-conductor channels would be required, which would consume 4.5i2R watts of power. However, even though some embodiments of the present invention may result in a slight increase in power consumption, the increase is more than offset by the reduction in conductors and pins between transmitters and receivers. Reducing the number of conductors and pins is especially important in computer chips where the number of pins available for input/output operations is limited.
Some factors that may limit the number of conductors in an N-conductor signaling system according to embodiments of the present invention include the complexity of the transmitter, data coding, and the maximum voltage swing at the receiver input. For example, as N increases, the number of discrete signal levels, which is equal to N, also increases. As a result, the number of differential voltages across any given pair of receiver input terminals, which is equal to the number of receivers or N!/(2*(N−2)!), increases. As the number of signal levels increases, since each transmitter is required to deliver all of these signal levels, transmitter complexity may increase. In addition, since the voltage swing at a receiver's input terminals may be limited by the receiver power supply, the permissible number of discrete signal levels may be limited. Finally, as will be discussed in more detail below, increasing N increases the complexity of data coding circuitry. As a result, it may be preferable to limit multi-conductor signaling systems according to the present invention to groups of N conductors, where N is preferably no greater than about 6.
Coding for Multi-conductor Signaling Systems
In order for multi-conductor differential signaling systems according to embodiments of the present invention to be useful, an effective method is preferably defined for encoding binary data for transmission over an N-conductor signaling system. For example, in a computer communications system, data desired to be transmitted may be in binary form. Because of the conditions placed on signal currents and receiver input voltages, some combinations of binary data may be invalid inputs for an N-conductor signaling system according to an embodiment of the present invention. Thus, a method for coding binary data that avoids invalid input bit combinations is preferably defined.
The combinations of data bits received by the transmitters of an N-conductor signaling system are referred to herein as drive words. Since an N-conductor signaling system according to embodiments of the present invention preferably has L=C(N,2) transmitters, each drive word is L bits wide. Although any invertible coding scheme may be used to map binary data into valid drive words, one method for coding the binary data according to the present invention includes defining a set of symbol numbers for an N-conductor differential signaling system, mapping input binary data into symbol numbers, and mapping the symbol numbers into valid drive words. As used herein, the term “symbol number” refers to a binary-encoded number denoting one of the base-N symbols suitable for transmission over an N-conductor differential signaling system according to embodiments of the present invention. Symbol numbers for an N-conductor differential signaling system may be M-bit binary numbers, where M=log2(N!). The symbol numbers may have decimal values ranging from 0 to N!. The mapping of the symbol numbers to valid drive words is preferably implemented in a manner that reduces the complexity of logic circuitry required to perform the mapping. The following examples illustrate exemplary mapping schemes for mapping symbol numbers to valid drive words for three- and four-conductor signaling systems.
Symbol Number to Valid Drive Word Coding for Three-Conductor Differential Signaling
Table 4 shown below illustrates exemplary valid drive words for a three-conductor signaling system according to an embodiment of the present invention. In the table, there are six valid three-bit drive words. Accordingly, in a three-conductor signaling system, six three-bit symbol numbers having decimal values from 0 to 5 may be encoded.



 
 
TABLE 4
 
 
 
Valid Drive Words for Three-Conductor Signaling Systems
 
 
 
 
 
XIn 
YIn 
ZIn 
 
 
 
0
0
1
 
0
1
0
 
0
1
1
 
1
0
0
 
1
0
1
 
1
1
0
 
 
 









One method for mapping the symbol numbers is to directly map symbol numbers to drive words, when a symbol number matches a drive word. Table 5 shown below is a truth table for mapping a three-bit symbol number b2b1b0 to a valid drive word XYZ for a three-conductor signaling system according to an embodiment of the present invention. Symbol numbers 001 and 101 map directly to drive words 001 and 101 in Table 5. Symbol number 000 may be mapped into drive word 110, utilizing a simple logic circuit or other equivalent method.



 
 
TABLE 5
 
 
 
Symbol Number to Valid Drive Word Mapping for
 
Three-Conductor Signaling System
 
 
 
 
 
 
 
 
 
 
b2
b1
b0
X
Y
Z
 
 
 
 
 
0
0
0
1
1
0
 
 
0
0
1
0
0
1
 
 
0
1
0
0
1
0
 
 
0
1
1
0
1
1
 
 
1
0
0
1
0
0
 
 
1
0
1
1
0
1
 
 
 
 









FIG. 7 illustrates an exemplary encoder for mapping symbol numbers into valid drive words for a three-conductor signaling system. The encoder illustrated in FIG. 7 may be coupled to the inputs of the transmitters illustrated in FIG. 5 to supply valid drive words based on input symbol numbers. In the illustrated embodiment, the circuit includes an AND gate 70 and two OR gates 71 and 72. The AND gate 70 includes three input terminals receiving inverted bits b0, b1, and b2 of a symbol number. Each of the OR gates 71 and 72 includes two inputs. The first input of each of the OR gates receives the output from the AND gate 70. The second input of each of the OR gates 71 and 72 receives one of the bits of the symbol number.
The encoder illustrated in FIG. 7 maps three-bit symbol numbers 000-101 to valid drive words for the three-conductor signaling system illustrated in FIG. 5. For example, when the input symbol number is 000, the output drive word is 110, as previously described. The remaining symbol numbers, 001-101, map directly to drive words 001-101.
FIG. 8 is a logic diagram illustrating an exemplary decoder for converting data output from the receivers of a three-conductor differential signaling system into corresponding symbol numbers. In the illustrated embodiment, the decoder includes a NAND gate 80 and AND gates 81 and 82. The logic circuit illustrated in FIG. 8 inverts the mapping performed by the encoder illustrated in FIG. 7.
The present invention is not limited to utilizing logic circuitry to map symbol numbers to valid drive words. For example, the mapping may be performed in software or a combination of hardware and software. If the mapping is performed in software, a look-up table or computer-implemented algorithm corresponding to Table 5 may be utilized to map and un-map the symbol numbers.
Symbol Number to Valid Drive Word Coding for a Four-conductor Differential Signaling System
As described above with respect to FIG. 6, a four-conductor signaling system is capable of transmitting 24 possible symbols, each having a corresponding drive word of six bits in width. Symbol numbers for a four-conductor signaling system may be five-bit binary numbers having decimal values ranging from 0 to 23. Thus, it is desirable to determine an efficient and invertible method for mapping the five-bit symbol numbers to valid drive words.
The mapping for converting the symbol numbers to valid drive words may be performed by logic circuitry, software, or a combination of logic circuitry and software. If the mapping is performed in software, a look-up table or computer-implemented algorithm may be used to perform the mapping.
In mapping the symbol numbers to valid drive words in either hardware or software, it is preferable to simplify the mapping. One exemplary method for simplifying the mapping includes grouping valid drive words having common bit characteristics and mapping symbol numbers to the re-grouped drive words. For example, the rightmost four columns in Table 2 illustrate the valid drive words for a four-conductor signaling system. In Table 2, the drive words are arranged in ascending order according to the decimal values corresponding to the valid drive words. Although the symbol numbers 000002-101112 could be mapped directly to the valid drive words, such a mapping would result in software or logic circuitry that is unnecessarily complex.
Table 6 shown below illustrates a reorganization of the valid drive words for a four-conductor signaling system that reduces the complexity of mapping circuitry and/or software. In Table 6, the valid drive words are arranged in four groups of six having common bit values for channels V and W. In a first group comprising rows 1-6 of Table 6, the bit values for the V and W channels are 00. In a second group comprising rows 7-12 in Table 6, the bit values for the V and W channels are 11. In a third group comprising rows 13-18 in Table 6, the bit values for the V and W channels are 01. In a fourth group comprising rows 19-24 in Table 6, the bit values for the V and W channels are 10. The bit values for the V and W channels in the first group are inverses of the bit values for the V and W channels of the second group. Similarly, the bit values for the V and W channels in the third group are inverses of the bit values for the V and W channels in the fourth group. Based on these observations, an encoder for encoding the 23 symbol numbers to valid drive words can be constructed using 23-input, four output look-up tables of six entries each, a multiplexor, and a set of XOR functions.



 
 
TABLE 6
 
 
 
Groupings of Valid Drive Words for a
 
4-Conductor Differential Signaling System
 
 
 
 
 
 
 
 
 
 
X
Y
Z
U
V
W
 
 
 
 
 
0
0
0
1
0
0
 
 
0
0
1
1
0
0
 
 
0
1
0
1
0
0
 
 
1
0
0
1
0
0
 
 
1
0
1
0
0
0
 
 
1
0
1
1
0
0
 
 
0
1
0
0
1
1
 
 
0
1
0
1
1
1
 
 
0
1
1
0
1
1
 
 
1
0
1
0
1
1
 
 
1
1
0
0
1
1
 
 
1
1
1
0
1
1
 
 
0
0
1
0
0
1
 
 
0
0
1
1
0
1
 
 
0
1
0
1
0
1
 
 
0
1
1
0
0
1
 
 
0
1
1
1
0
1
 
 
1
0
1
0
0
1
 
 
0
1
0
1
1
0
 
 
1
0
0
0
1
0
 
 
1
0
0
1
1
0
 
 
1
0
1
0
1
0
 
 
1
1
0
0
1
0
 
 
1
1
0
1
1
0
 
 
 
 









In order the further simplify the encoding and decoding circuitry, it is noted that the remaining bits of the drive words for V, W=01 are a one-bit left rotation of the drive words for V, W=00. As a result, the encoder can be designed utilizing a single look-up table having three input bits and six valid combinations of four output bits. Table 7 illustrates bit combinations on which such an encoder may be based. Table 8 is a permutation of Table 7, in which the lowermost two rows are re-arranged such that the LSB alternates between 0 and 1.



 
 
TABLE 7
 
 
 
X, Y, Z and U Bit Values for V, W = 00
 
 
 
 
 
 
 
 
X
Y
Z
U
 
 
 
 
 
0
1
0
1
 
 
1
0
0
0
 
 
1
0
0
1
 
 
1
0
1
0
 
 
1
1
0
0
 
 
1
1
0
1
 
 
 
 












 
 
TABLE 8
 
 
 
Re-Arranged Drive Words of Table 7 so that
 
U Alternates between 0 and 1
 
 
 
 
 
 
 
 
X
Y
Z
U
 
 
 
 
 
0
1
0
1
 
 
1
0
0
0
 
 
1
0
0
1
 
 
1
0
1
0
 
 
1
1
0
1
 
 
1
1
0
0
 
 
 
 









FIG. 9 illustrates an encoder based on Table 8. The encoder illustrated in FIG. 9 converts a five-bit symbol number b0-b4 into a valid drive word UVWXYZ for a four-conductor differential signaling system according to an embodiment of the present invention. The encoder illustrated in FIG. 9 includes only twenty-one logic gates, thus illustrating the value of rearranging the valid drive codes. However, the present invention is not limited to the exact number of logic gates illustrated in FIG. 9. For example, the number of inverters may be reduced by utilizing a single inverter for each signal requiring inversion. In the illustrated embodiment, inverters 90 and 92 are connected to NAND gates 94 and 96 to invert the signal b2. These inverters may be replaced by a single inverter having an output connected to both NAND gate 94 and NAND gate 96. Similar reductions can be made for the signals b3 and b4.
Binary Data to Symbol Number Coding for a Four-conductor Differential Signaling System
The previous section illustrates methods and systems for encoding five-bit symbol numbers into valid drive words for a four-conductor signaling system. This section illustrates exemplary methods and systems for encoding binary data into symbol numbers. According to a first method, a nine-bit data word D{8:0} and an additional control bit are encoded into two five-bit symbol numbers, b0{4:0} and b1{4:0}. Two instances of the encoder illustrated in FIG. 9 may then be used to drive a four-conductor signaling system according to an embodiment of the present invention.
Encoding a nine-bit data word into two five-bit symbol numbers can be accomplished utilizing any suitable method, e.g., logic circuitry and/or a look-up table implemented in a read-only memory. Since the look-up table may be large, especially for values of N greater than four, it is preferable to simplify the logic.
In this example, a data word having nine bits is encoded into two symbol numbers of five bits each. Since 8 is the largest power of 2 that is a common factor of both 32 and 24, the three lowest-order bits of each portion of the nine-bit data word can be mapped directly to each five-bit symbol number. As a result, only two bits of each portion remain for processing.
In order to encode the nine-bit data word into five-bit symbol numbers, six of the bits of the nine bit data word are mapped directly to the symbol number. For example, where the bits of the data word are D0-D8 are the bits of the data word, b00-b05 are the bits of the first five bit symbol number, and b10-b15 are the bits of the second symbol number, the mapping may be performed as follows: b00=D0, b01=D1, b10=D5, b11=D6, and B12=D7. The remaining bits of the data word, D3, D4, and D8 may be passed through logic circuitry to generate the high order two bits of each five-bit symbol number.
Table 9 shown below is a truth table illustrating four functions of the three bits D3, D4, and D8. The tenth bit, illustrated by the column labeled “K” in Table 8 may be utilized for transmission of 64 control words, in addition to the 512 data words represented by each combination of four bits. Based on Table 9, a logic circuit or a look-up table may be implemented for mapping the remaining three bits of the data word and the control bit into the symbol numbers.



 
 
TABLE 9
 
 
 
Truth Table for Encoding D3, D4, D8, and K into Symbol Numbers
 
 
 
 
 
 
 
 
 
 
 
 
K
D8
D4
D3
b14
b13
b04
b03
 
 
 
 
 
0
0
0
0
0
0
0
0
 
 
0
0
0
1
0
0
0
1
 
 
0
0
1
0
0
0
1
0
 
 
0
0
1
1
1
0
0
0
 
 
0
1
0
0
0
1
0
0
 
 
0
1
0
1
0
1
0
1
 
 
0
1
1
0
0
1
1
0
 
 
0
1
1
1
1
0
0
1
 
 
1
0
0
0
1
0
1
0
 
 
 
 









FIG. 10 is a pseudo-schematic diagram implementing an encoder for encoding a nine-bit data word plus a control bit into two five-bit symbol numbers according to an embodiment of the present invention. The logic circuit illustrated in FIG. 10 may be connected to two encoders, as illustrated in FIG. 9, so that the binary data can be encoded into symbol numbers and then into valid drive words for signaling over a four-conductor differential signaling system according to an embodiment of the present invention.
FIGS. 11 and 12 are exemplary logic diagrams of an encoder and a decoder implementing the truth table portion of FIG. 10. More particularly, FIG. 11 is an encoder that implements the conversion from the left half of the truth table illustrated in FIG. 10 to the right half of the truth table illustrated in FIG. 10. FIG. 12 is a decoder implementing conversion from the right half of the truth table illustrated in FIG. 10 to the left half of the truth table illustrated in FIG. 10. Although the logic circuits illustrated in FIGS. 11 and 12 include a plurality of inverters, one of ordinary skill in the art will recognize that a single inverter may be provided for inverting each signal. For example, as illustrated in FIG. 11, separate inverters 1100 and 1102 are included for inverting the signal D3 at the input of a NAND gate 1104 and an AND gate 1106. These inverters may be replaced by a single inverter having an output connected to both the NAND gate 1104 and the AND gate 1106. Similar substitutions may be made for other signals in FIGS. 11 and 12. Multiple inverters are shown in order to more clearly illustrate circuit connections.
The present invention is not limited to the logic circuits illustrated in FIGS. 11 and 12 for the encoder and the decoder. Equivalent logic circuitry that implements the truth table illustrated in FIG. 10 is within the scope of the invention.
DC Balanced Coding
According to another aspect of the invention, it may be preferable to encode binary data such that direct current transmitted across a data channel is DC balanced. DC balancing is especially important when the transmitters and receivers in an N-conductor signaling system according to an embodiment of the present invention have separate power supplies. In such an embodiment, it is preferable to insert coupling capacitors in the conductors between the transmitters and receivers to prevent DC currents from flowing between the transmitters and receivers. In order to prevent excessive charge from building on the coupling capacitors, it may be desirable do structure drive words such that the number of 1's and 0's transmitted are substantially equal.
Voltage Mode Signaling
As stated above, the differential signal transmitters in the multi-conductor signaling systems according to embodiments of the present invention may output either signal voltages or signal currents onto the conductors. In embodiments that output signal currents, for example, as illustrated in FIG. 5, signals from N−1 of the N!/(2*(N−2)!) transmitters are summed onto each of the N conductors in a multi-conductor system. Current summation is accomplished by connecting the transmitter terminals to the conductors. In embodiments where the transmitters output signal voltages, a mechanism for adding the voltages from multiple transmitters before applying the voltages to the conductors is required.
One method for summing voltages from voltage mode transmitters is a resistor network. FIG. 13 illustrates a three-conductor differential signaling system in which the transmitters output signal voltages according to an embodiment of the present invention. In FIG. 13, transmitters 1300-1303 output signal voltages based on digital input data XIn, YIn, and ZIn. A plurality of external series resistors Rs convert the voltage outputs of the transmitters to currents, which are summed onto three transmission line conductors 1304-1306. Realizable voltage transmitters have non-zero internal impedance Rint. For proper impedance matching, it is preferable that 2*Rs+Rint=RT, where RT is the termination resistance. Because the resistors Rs convert the output voltages of the transmitters 1301-1303 into currents, receivers 1307-1309 operate in a similar manner to the receivers in FIG. 3.
The present invention is not limited to the three-conductor voltage mode embodiment illustrated in FIG. 13. For example, the embodiment illustrated in FIG. 13 may be extended to N-conductor signaling systems where N is greater than three.
CMOS Current-mode Implementation
Current-mode transmitters suitable for use in embodiments of the present invention can be readily implemented in CMOS technology. FIG. 14 illustrates an exemplary implementation of a suitable current-mode transmitter. In the illustrated example, transistors 1400 and 1401 are biased in the linear or saturation region by setting bias voltages VBiasN and VBiasP to the appropriate values. The transistors 1400 and 1401 operate as current sources and both carry the signaling current lout. Transistors m1-m4 are arranged in an H-bridge configuration to steer the output current into the line. The transistors m1-m4 are controlled by a digital signal Data. Drivers 1402 and 1403 supply the transistors m1-m4 with non-inverted and inverted versions of the signal Data. When Data is high, m1 and m4 are turned ON, and m2 and m3 are turned OFF. In this condition, IOUT is driven into OutH and pulled out of OutL. When the signal Data is LOW, m2 and m3 are ON and the currents at the two output terminals OutH and OutL are reversed.
The present invention is not limited to the current-mode transmitter illustrated in FIG. 14. Any transmitter capable of switching a current into two halves of a differential transmission line are within the scope of the invention. For example, circuits designed to be compatible with the ANSI/TIA/EIA-644-1995 low voltage differential signaling (LVDS) standard could be used in a multi-conductor signaling system with little or no changes to the signaling techniques described above.
Equalization
Frequency-dependent attenuation on realizable transmission lines leads to inter-symbol interference. For example, most transmission lines function as low-pass filters. As a result, high-frequency portions of a transmitted signal are attenuated more than the low-frequency portions. The frequency-dependent attenuation causes low-frequency symbols to interfere with high-frequency symbols. For fairly modest amounts of attenuation (6dB at the highest bit transmission frequency), this effect causes symbols to become undetectable. Equalization can be used to extend the bit transmission frequency considerably.
Equalization essentially introduces a filter, which can be placed in the transmission line at either the transmitter or receiver to compensate for the frequency-dependent attenuation of the line. The frequency response of an exemplary equalization filter suitable for use with the present invention may be the inverse of the frequency response of the transmission line being compensated. For example, the filter may be designed such that it has a gain near unity at frequencies where the transmission line attenuation is near 0 dB and a gain that increases with transmission line attenuation at frequencies where the transmission line attenuation is greater than 0 dB.
Exemplary equalization filters suitable for use with embodiments of the present invention are described in detail in “Transmitter Equalization for 4-GBPS Signaling,” IEEE Micro, January/February 1997, pp. 48-56 and “A Tracking Clock Recovery Receiver for 4-GBPS Signaling,” IEEE Micro, January-February 1998, pp. 25-27, the disclosures of which are incorporated herein by reference. Exemplary equalization filters suitable for use with embodiments of the present invention include continuous-time active or passive filters that selectively amplify high-frequency components of a transmitted signal. However, in a preferred embodiment of the invention, the equalization filter may comprises a discrete-time finite-impulse-response (FIR) equalizer. Such a filter may be implemented using a transition filter. A transition filter counts elapsed time between transitions in a transmitted signal and adjusts the gain based on the elapsed time. For example, if transitions occur in rapid succession, a high-frequency signal is being transmitted and the filter preferably increases the gain. If a long time period elapses between transitions, a low-frequency signal is being transmitted and the filter preferably does not amplify the signal.
Equalization filters can be used effectively in multi-conductor signaling. Each of the N!/(2*(N−2)!) channels on an N-conductor transmission system can be equalized independently, since the waves on the line for each channel are independent, by the principle of superposition. Thus, equalization filters may be incorporated within each differential transmitter, e.g., in transmitters 500-502 illustrated in FIG. 5, to compensate for transmission line interference in each channel.
It will be understood that various details of the invention may be changed without departing from the scope of the invention. Furthermore, the foregoing description is for the purpose of illustration only, and not for the purpose of limitation—the invention being defined by the claims.

What is claimed is: 
 
1. A multi-conductor differential signaling method comprising transmitting K differential signals from a plurality of differential transmitters to a plurality of differential receivers over N conductors, N being an integer greater than two and K being equal to N!/(2(N−2)!), wherein:
(a) each of the differential transmitters includes an inverting output and a non-inverting output, the inverting and non-inverting outputs being continuously connected to different conductors of the N conductors; 
(b) the K differential signals produce N currents on the N conductors and the N currents sum to substantially zero, and 
(c) the K differential signals produce K voltage differences between the N conductors and none of the voltage differences between the N conductors is equal to zero. 

  
2. The method of claim 1, wherein N=3.

  
3. The method of claim 1, wherein N=4.

  
4. The method of claim 1, wherein N is greater than 4.

  
5. The method of claim 1, wherein transmitting K differential signals includes outputting K differential voltage signals from K differential voltage transmitters.

  
6. The method of claim 1, wherein transmitting K differential signals includes outputting K differential current signals from K differential current transmitters.

  
7. The method of claim 1, wherein transmitting K differential signals includes transmitting 2log2(N!))/N bits per symbol per conductor.

  
8. The method of claim 1, wherein transmitting the K differential signals includes equalizing high- and low-frequency portions of each of the K differential signals to compensate for frequency-dependent transmission line attenuation.

  
9. The method of claim 8, wherein equalizing the high and low frequency portions includes passing each of the K differential signals through a transition filter.

  
10. A method for encoding binary data on an N-conductor differential signaling system comprising:
(a) receiving binary data to be transmitted over the N-conductor differential signaling system; 
(b) converting the binary data into symbol numbers, where each symbol number corresponds to a valid drive word to be input into differential transmitters of the N-conductor differential signaling system, each of the differential transmitters including an inverting output and a non-inverting output, the inverting and non-inverting outputs being continuously connected to different conductors of the N conductors; and 
(c) converting the symbol numbers into valid drive words the valid drive word comprising combinations of bits such that currents on the N conductors sum to zero and voltages across each pair of conductors of the N conductors do not sum to zero and inputting the valid drive words into the transmitters. 

  
11. The method of claim 10 wherein:
(a) receiving binary data includes receiving a nine-bit data word; 
(b) converting the binary data includes mapping the nine-bit data word into two five-bit symbol numbers; and 
(c) converting the symbol numbers into valid drive words includes converting the two five-bit symbol numbers into valid drive words for a four-conductor differential signaling system. 

  
12. The method of claim 10, wherein converting the symbol numbers into valid drive words includes DC balancing the valid drive words.

  
13. The method of claim 12, wherein DC balancing the valid drive words includes structuring the drive words such that the number of 1's and 0's transmitted over a time period are substantially equal.

  
14. A multi-conductor differential signaling system for transmitting differential signals between a sender and a receiver comprising:
(a) a plurality of differential transmitters for transmitting K differential signals on N conductors, N being an integer greater than 2 and K being equal to N!/(2(N−2)!), wherein: 
(i) each of the differential transmitters includes an inverting output and a non-inverting output, the inverting and non-inverting outputs being continuously connected to different conductors of the N conductors; 
(ii) the K differential signals produce N currents on the N conductors and the N currents sum to substantially zero; and 
(iii) the K differential signals produce K voltage differences between the N conductors and none of the voltage differences between the N conductors is equal to zero; and 
(b) a plurality of differential receivers for receiving the K differential signals and converting the K differential signals to digital data. 

  
15. The multi-conductor differential signaling system of claim 14, wherein the plurality of differential transmitters comprise differential current transmitters.

  
16. The multi-conductor differential signaling system of claim 15, wherein the plurality of differential transmitters comprise differential voltage transmitters.

  
17. The multi-conductor differential signaling system of claim 14, wherein N=3.

  
18. The multi-conductor differential signaling system of claim 14, wherein N=4.

  
19. The multi-conductor differential signaling system of claim 14, wherein N is greater than 4.

  
20. The multi-conductor differential signaling system of claim 14, comprising a first encoder connected to the plurality of differential transmitters for receiving symbol numbers and converting the symbol numbers into valid drive words for driving the plurality of differential transmitters to produce the K differential signals.

  
21. The multi-conductor differential signaling system of claim 20, comprising a second encoder connected to the first encoder for receiving binary data, converting the binary data into symbol numbers, and outputting the symbol numbers to the first encoder.

  
22. The multi-conductor signaling system of claim 20, wherein the first encoder comprises a logic circuit.

  
23. The multi-conductor differential signaling system of claim 20, wherein the first encoder comprises a lookup table embodied in a read only memory.

  
24. The multi-conductor differential signaling system of claim 21, wherein the second encoder comprises a logic circuit.

  
25. The multi-conductor differential signaling system of claim 21, wherein the second encoder comprises a lookup table embodied in a read only memory.

  
26. The multi-conductor differential signaling system of claim 14, wherein the plurality of differential transmitters transmit 2log2(N!))/N bits per symbol per conductor.

  
27. The multi-conductor differential signaling system of claim 14, wherein the plurality of differential transmitters comprises K differential transmitters and the plurality of differential receivers comprises K differential receivers.

  
28. The multi-conductor differential signaling system of claim 14, wherein the differential receivers convert the K differential signals into digital data without comparing the K differential signals to reference voltages at the receivers.

  
29. The multi-conductor differential signaling system of claim 14, comprising a plurality of equalization filters respectively coupled to the differential transmitters for amplifying high-frequency portions of each of the K differential signals more than low-frequency portions to compensate for frequency-dependent transmission line attenuation.

  
30. The multi-conductor differential signaling system of claim 29, wherein the equalization filters comprise transition filters.

  
31. The method of claim 1 wherein the non-inverting output of each differential transmitter is connected to the inverting output of another of the differential transmitters and to at least one of the conductors.

  
32. The method of claim 10 wherein the non-inverting output of each differential transmitter is connected to the inverting output of another of the differential transmitters and to at least one of the conductors.

  
33. The system of claim 14 wherein the non-inverting output of each differential transmitter is connected to the inverting output of another of the differential transmitters and to at least one of the conductors.