# US9985745B2 - US9985745B2 - Vector signaling with reduced receiver complexity 
        - Google Patents

## Details

* Date: 2013-06-25
* Inventor: Kandou Labs SA
* Beneficiary: Amin Shokrollahi
## Other patents

### Backwards
 * US668687A
 *US780883A
 *US3196351A
 *US3636463A
 *US3939468A
 *US4163258A
 *US4181967A
 *US4206316A
 *US4276543A
 *US4486739A
 *US4499550A
 *US4722084A
 *US4772845A
 *US4774498A
 *US4864303A
 *US4897657A
 *US4974211A
 *US5017924A
 *US5053974A
 *US5166956A
 *US5168509A
 *US5266907A
 *US5283761A
 *US5287305A
 *US5311516A
 *US5331320A
 *US5412689A
 *US5449895A
 *US5459465A
 *US5461379A
 *US5510736A
 *US5511119A
 *US5553097A
 *US5566193A
 *US5599550A
 *US5626651A
 *US5629651A
 *US5659353A
 *US5727006A
 *US5748948A
 *US5802356A
 *US5825808A
 *US5856935A
 *US5875202A
 *US5945935A
 *US5949060A
 *US5982954A
 *US5995016A
 *US6005895A
 *US6084883A
 *US6119263A
 *US6172634B1
 *US6175230B1
 *US6232908B1
 *US20010006538A1
 *US6278740B1
 *US6316987B1
 *US20010055344A1
 *US6346907B1
 *US20020034191A1
 *US20020044316A1
 *US6378073B1
 *US6384758B1
 *US20020057592A1
 *US6398359B1
 *US6404820B1
 *US6417737B1
 *US6433800B1
 *US6452420B1
 *US20020154633A1
 *US6473877B1
 *US20020163881A1
 *US20020167339A1
 *US6483828B1
 *US20020174373A1
 *US20020181607A1
 *US6509773B2
 *US20030016770A1
 *US20030016763A1
 *US6522699B1
 *US20030046618A1
 *US6556628B1
 *US20030085763A1
 *US6563382B1
 *JP2003163612A
 *US20030146783A1
 *US6621427B2
 *US20030174023A1
 *US6624699B2
 *US20030185310A1
 *US6650638B1
 *US20030218558A1
 *US6661355B2
 *US6664355B2
 *US6690739B1
 *US20040027185A1
 *US6766342B2
 *US20040146117A1
 *US6772351B1
 *US20040155802A1
 *US20040161019A1
 *US20040169529A1
 *US6839429B1
 *US6839587B2
 *WO2005002162A1
 *US6854030B2
 *US6865234B1
 *US6865236B1
 *US20050063493A1
 *US6876317B2
 *US20050134380A1
 *US6927709B2
 *US20050174841A1
 *US20050195000A1
 *US20050201491A1
 *US20050213686A1
 *US20050220182A1
 *US6954492B1
 *US6963622B2
 *US6973613B2
 *US6972701B2
 *US20050270098A1
 *US6976194B2
 *US6990138B2
 *US6993311B2
 *US6999516B1
 *US20060036668A1
 *US7023817B2
 *US7039136B2
 *US20060097786A1
 *US20060103463A1
 *US7053802B2
 *US20060120486A1
 *US20060126751A1
 *US20060133538A1
 *US20060140324A1
 *US7080288B2
 *US20060159005A1
 *US7082557B2
 *US7085153B2
 *US20060233291A1
 *US7127003B2
 *CN1864346A
 *US7142865B2
 *US7142612B2
 *US20070001723A1
 *US20070002954A1
 *US7164631B2
 *US7167019B2
 *US20070030796A1
 *US7176823B2
 *US7180949B2
 *US7199728B2
 *US20070103338A1
 *US20070121716A1
 *US7231558B2
 *US20070182487A1
 *US20070204205A1
 *US20070201546A1
 *US7269130B2
 *US7269212B1
 *US20070263711A1
 *US20070283210A1
 *US20080007367A1
 *US20080012598A1
 *US7335976B2
 *US7336112B1
 *US7339990B2
 *US7346819B2
 *US7348989B2
 *US7356213B1
 *US7358869B1
 *US7362697B2
 *US7366942B2
 *US20080104374A1
 *US7370264B2
 *US7372390B2
 *EP1926267A1
 *US7389333B2
 *US20080159448A1
 *US7397302B2
 *US7400276B1
 *US20080192621A1
 *US7462956B2
 *US20080317188A1
 *US7496162B2
 *US20090059782A1
 *US20090115523A1
 *US7535957B2
 *US7539532B2
 *US20090154604A1
 *CN101478286A
 *WO2009084121A1
 *US20090195281A1
 *US7599390B2
 *US20090262876A1
 *US7613234B2
 *US7616075B2
 *US7620116B2
 *US7633850B2
 *US20090316730A1
 *US7639596B2
 *US20090323864A1
 *US7650525B1
 *US7656321B2
 *US20100046644A1
 *WO2010031824A1
 *US20100081451A1
 *US7694204B2
 *US7697915B2
 *US7698088B2
 *US7706456B2
 *US7706524B2
 *US20100148819A1
 *US20100180143A1
 *US7768312B2
 *US20100215112A1
 *US20100215087A1
 *US7787572B2
 *US20100235673A1
 *US7804361B2
 *US7808456B2
 *US20100271107A1
 *US20100283894A1
 *US20100296556A1
 *US7841909B2
 *US20100309964A1
 *US7869497B2
 *US7869546B2
 *US20110014865A1
 *US7882413B2
 *US20110028089A1
 *US20110032977A1
 *US7899653B2
 *US20110051854A1
 *US20110072330A1
 *US20110074488A1
 *US20110084737A1
 *US7933770B2
 *US20110103508A1
 *US8000664B2
 *US20110228864A1
 *WO2011119359A2
 *US8030999B2
 *US8036300B2
 *US8050332B2
 *US20110268225A1
 *US8055095B2
 *US8064535B2
 *US20110299555A1
 *US20110302478A1
 *US8085172B2
 *US20110317559A1
 *US8106806B2
 *US8149906B2
 *US20120082203A1
 *US8159376B2
 *US8180931B2
 *US8185807B2
 *US20120133438A1
 *US8199863B2
 *US8199849B2
 *US20120152901A1
 *US20120161945A1
 *US8218670B2
 *US8233544B2
 *US8245094B2
 *US20120213299A1
 *US8253454B2
 *US8279745B2
 *US8279094B2
 *US20120257683A1
 *US8289914B2
 *US8295250B2
 *US8295336B2
 *US8310389B1
 *US8341492B2
 *US20130013870A1
 *US20130010892A1
 *US8359445B2
 *US8365035B2
 *EP2039221B1
 *US8406316B2
 *US8429492B2
 *US8429495B2
 *US20130106513A1
 *US8437440B1
 *US20130114663A1
 *US20130114519A1
 *US8443223B2
 *US8442099B1
 *US20130129019A1
 *US20130147553A1
 *US8472513B2
 *US20130188656A1
 *US8498368B1
 *US20130195155A1
 *US20130202065A1
 *US20130215954A1
 *US8520348B2
 *US8547272B2
 *US20130259113A1
 *US20130271194A1
 *US8578246B2
 *US8588254B2
 *US20130307614A1
 *US8593305B1
 *US20130314142A1
 *US20130315501A1
 *US8604879B2
 *US8602643B2
 *US20130346830A1
 *US8620166B2
 *US8638241B2
 *US8643437B2
 *US8649460B2
 *US8674861B2
 *US8687968B2
 *US8718184B1
 *US20140159769A1
 *US8755426B1
 *US20140177696A1
 *US8773964B2
 *US8782578B2
 *US8780687B2
 *US8831440B2
 *US20140269130A1
 *US20140266440A1
 *US8841936B2
 *US8879660B1
 *US8898504B2
 *US8938171B2
 *US8951072B2
 *US20150049798A1
 *US8975948B2
 *US20150070201A1
 *US20150078479A1
 *US8989317B1
 *US9036764B1
 *US20150146771A1
 *US9059816B1
 *US9069995B1
 *US9077386B1
 *US9083576B1
 *US9093791B2
 *US9100232B1
 *US9124557B2
 *US20150249559A1
 *US9148087B1
 *US9152495B2
 *US9172412B2
 *US9178503B2
 *US9183085B1
 *US20150333940A1
 *US9197470B2
 *US20150349835A1
 *US20150381232A1
 *US20150380087A1
 *US20160020796A1
 *US20160020824A1
 *US20160036616A1
 *US9281785B2
 *US9288082B1
 *US9292716B2
 *US9300503B1
 *US9306621B2
 *US9331962B2
 *US9374250B1
 *US9432298B1
 *US20160261435A1
 *US9455744B2
 *US9455765B2
 *US9479369B1
 *US9634797B2
 *US20170310456A1
 *US20170317855A1
 *US20170317449A1
### Forward
 * US20170317855A1
## Abstract

Abstract

Methods and apparatuses are described to determine subsets of vector signaling codes capable of detection by smaller sets of comparators than required to detect the full code. The resulting lower receiver complexity allows systems utilizing such subset codes to be less complex and require less power.



Methods and apparatuses are described to determine subsets of vector signaling codes capable of detection by smaller sets of comparators than required to detect the full code. The resulting lower receiver complexity allows systems utilizing such subset codes to be less complex and require less power.

CROSS REFERENCES
This application is a continuation of U.S. application Ser. No. 15/340,415, filed Nov. 1, 2016, which is a continuation of U.S. application Ser. No. 15/006,736, filed Jan. 26, 2016, which is a continuation of U.S. application Ser. No. 14/313,966, filed Jun. 24, 2014, which claims priority to U.S. provisional application No. 61/839,360 filed on Jun. 25, 2013, all of which are incorporated herein by reference in their entirety.
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication 2011/0268,225 of application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”)
U.S. Patent Publication 2011/0302478 of application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Resilience and SSO Resilience” (hereinafter “Cronie II”.)
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes” (hereafter called “Cronie III”.)
U.S. patent application Ser. No. 13/542,599, filed Jul. 5, 2012, naming Armin Tajalli, Harm Cronie, and Amin Shokrollahi entitled “Methods and Circuits for Efficient Processing and Detection of Balanced Codes” (hereafter called “Tajalli I”.)
U.S. patent application Ser. No. 13/603,107, filed Sep. 4, 2012, naming Brian Holden and Amin Shokrollahi entitled “Selection of Unions of Vector Signaling Codes for Pin-Efficient Communications” (hereafter called “Holden I”.)
The following additional references have been cited in this application: U.S. Pat. No. 8,159,375, filed Sep. 30, 2008 and issued Apr. 17, 2012, naming Aliazam Abbasfar and entitled “Simplified receiver for use in multi-wire communications” (hereafter called “Abbasfar I”.)
U.S. Pat. No. 6,005,895, filed Dec. 20, 1996 and issued Dec. 21, 1999, naming Donald V. Perino and John B Dillon and entitled “Apparatus and method for multilevel signaling” (hereinafter called “Perino I”.)
U.S. Pat. No. 6,359,931, filed Oct. 15, 1999 and issued Mar. 19, 2002, naming Donald V. Perino and John B Dillon and entitled “Apparatus and method for multilevel signaling” (hereinafter called “Perino II”.)
U.S. Pat. No. 6,556,628, filed Apr. 29, 1999 and issued Apr. 29, 2003, naming John W Poulton, Stephen G Tell, and Robert E Palmer and entitled “Methods and Systems for Transmitting and Receiving differential signals over a plurality of conductors” (hereinafter called “Poulton I”.)
U.S. Pat. No. 3,196,351, filed Jun. 26, 1962 and issued Jul. 20, 1965, naming David Slepian and entitled “Permutation Code Signaling” (hereinafter called “Slepian I”.)
U.S. Pat. No. 6,452,420, filed May 24, 2001 and issued Sep. 17, 2002, naming Hee Wong and entitled “Multi-dimensional differential signaling” (hereinafter called “Wong I”.)
FIELD OF THE INVENTION
The present invention relates to communications in general and in particular to transmission of signals capable of conveying information.
BACKGROUND
Communication of information as signals encoded on groups of wires is known, with larger groups allowing use of a larger code space and thus permitting more efficient communication of information. However, the number of differential comparators required to receive such group-encoded signals grows on the order of n2, where n is the size of the group, severely impacting the complexity and power consumption of practical embodiments having more than a few inputs.

BRIEF DESCRIPTION OF THE DRAWINGS
Various embodiments in accordance with the present disclosure will be described with reference to the drawings. Same numbers are used throughout the disclosure and figures to reference like components and features.
 FIG. 1 is a block diagram of an embodiment in accordance with the invention.
 FIG. 2 is a schematic of a Sparse Comparator unit or SCU in accordance with at least one embodiment of the invention.
 FIG. 3 is a schematic of another SCU in accordance with at least one embodiment of the invention.
 FIG. 4 is a flow chart illustrating the procedure for graph optimization in accordance with the invention.
 FIG. 5 is a flow chart illustrating a procedure to obtain all sets T of M comparators, in accordance with at least one embodiment of the invention.
 FIG. 6 is a graph illustrating the maximum independent set of one example.
 FIG. 7 is a graph illustrating the maximum independent set of a second example.
 FIG. 8 is a graph illustrating the maximum independent set of a third example.
 FIGS. 9A, 9B, and 9C illustrate examples of different codes obtained through the optimization method of FIG. 5 in accordance with the invention.
 FIG. 10 shows a code on six wires with 48 code words, obtained in accordance with the invention.
 FIG. 11 is a block diagram of a generalized SCU illustrating a method of design in accordance with at least one embodiment of the invention.
 FIG. 12 is a block diagram embodying one SCU design in accordance with the invention.
 FIG. 13 is a finite graph illustrating the maximum independent set of an example.
 FIG. 14 shows a code of 32 code words decodable by the set of comparators of FIG. 3, in accordance with at least one embodiment of the invention.
 FIGS. 15 through 19 are block diagrams illustrating elements of the recursive SCU design process, in accordance with at least one embodiment of the invention.

DETAILED DESCRIPTION
 FIG. 1 is a schematic of an exemplary embodiment of a signaling system according to this disclosure. The system receives an input word 105 consisting of K bits through an external interface. These bits are transformed by an encoder 110 into N values, the values collectively forming a code word in a vector signaling code of length N. Driver 120 outputs these values on the multi-conductor transmission line 125 consisting of N conductors, wherein the first output value of encoder 110 is output on the first wire, and the N-th output value is output on the N-th wire. A receiver front-end 130 samples the analog values on the wires, and forwards them to Sparse Comparator Unit (SCU) 140. Receiver front-end 130 may perform additional tasks, such as equalization of the received values through various means, for example using a Continuous Linear Time Equalizer (CTLE), or a Decision Feedback Equalizer (DFE), or other equalization means. If equalization is used, then equalized values are forwarded to the SCU. In other embodiments, equalization may be performed within the SCU, or directly after the SCU.
The task of SCU 140 is to compare values of the wires against one-another and output M values, each value being a 1 or a −1 (or belonging to any other set with two elements, for example 0 and 1), to a decoding unit 150. These M values 145 correspond to the results of M comparison operations performed by the SCU. Generally, M<N*(N−1)/2, as the number of comparators is “sparse” for any but trivially small numbers of inputs N to SCU 140. Decoder 150 creates output word 155 consisting of K bits using well-known methods such as a look-up table or Boolean logic. Some embodiments allow output word 155 to be obtained directly from the M values 145, eliminating the processing latency and complexity of a separate decoder 150. Unless there is an uncorrectable error in the signaling system, data word 155 is an exact copy of input word 105.
The operation of SCU 140 is further exemplified in FIG. 2, representing another embodiment in accordance with the invention. In this example, the number N of transmission lines is 4, and the number M of values output by the SCU is also 4, which is less than 4*(4−1)/2=6. The SCU comprises 4 comparators 220, 230, 240, and 250, called C[1] through C[4]. It receives values TR[1], . . . , TR[4] as shown at 210 from the receiver front-end (as 130 of FIG. 1.) Comparator C[1] in 220 outputs the sign of TR[1]−TR[4] as 261; comparator C[2] outputs the sign of TR[2]−TR[4] as 262; comparator C[3] outputs the sign of TR[3]−TR[2] as 263; and comparator C[4] outputs the sign of TR[3]−TR[4] as 264.
A further embodiment showing the operation of SCU 140 in accordance with the invention is exemplified in FIG. 3. In this example, the number N of transmission lines is 6, and the number M of values output by the SCU is 5, which is less than 6*(6−1)/2=15. The SCI comprises 5 comparators 350, 355, 360, 365, and 370, called C[1] through C[5]. It receives values TR[1] . . . TR[6] as shown at 310 from receiver front-end (as 130 of FIG. 1.) Comparator C[1] in 3200 outputs the sign of TR[1]−TR[2] as 391; comparator C[2] in 330 outputs the sign of TR[3]−TR[4] as 392, and comparator C[3] in 340 outputs the sign of TR[5]−TR[6] as 393. SCU 140 further comprises three averaging units 370, 375, and 380. The task of these averaging units is to compute the average value of their inputs, or as an alternative embodiment, their sum. Hence, averaging unit 370 computes (TR[1]+TR[2])/2, averaging unit 375 computes (TR[3]+TR[4])/2, etc. The outputs of these averaging units are forwarded to comparators 350 and 360. In effect, comparator 350 computes the sign of (TR[1]+TR[2]−TR[3]−TR[4]) at 394 and comparator 360 computes the sign of (TR[1]+TR[2]−TR[5]−TR[6]) at 395.
Whether or not the comparator results of the SCU are sufficient to recover the transmitted values on the multiconductor transmission line 125 of FIG. 1, or equivalently, whether these comparison values provide enough information to uniquely recover the code word of the vector signaling code transmitted on these conductors, depends crucially both on the code and on the particular set of comparators. Where for example permutation modulation codes, as defined in Slepian I, are used, exactly N*(N−1)/2 comparators are necessary and sufficient to recover the code word. To reduce the number of comparators for permutation modulation codes, particularly such codes where N is large, this application discloses a method in which a carefully designed subset of maximum size of a given permutation modulation code is chosen according to how many comparators can be used in the SCU.
One way to choose a vector signaling code on N wires with fewer than N*(N−1)/2 comparators is by combining two vector signaling codes, each on fewer than N wires. For example, by combining a permutation modulation code with 12 code words obtained as all distinct permutations of (1,0,0,−1) with itself, it is possible to obtain a subset of a permutation modulation code on 8 wires with 12*12=144 code words. The code has therefore pin-efficiency at least 7/8, since we are capable of transmitting 7 bits on the 8 wires. The code words of this code have the property that the first 4 coordinates and the next 4 coordinates each independently belong to the permutation modulation code generated by (−1,0,0,1). These code words form a subset of the permutation modulation code obtained from all 420 distinct permutations of the vector (−1,−1,0,0,0,0,1,1). The number of comparators needed for this code is 12: one set of 6 comparators for the first 4 wires, and one set of 6 comparators for the second set of wires, which is substantially less than the 28 comparators needed for the code generated by (−1,−1,0,0,0,0,1,1). On the other hand, the pin-efficiency of this code is merely 7/8, which is less than the pin-efficiency 1.5 of the larger code. Another example is provided by the code obtained from all 24 permutations of (−1,−1/3,1/3,1). This code also requires 6 comparisons of the 4 wire values; combining the code with itself leads to a code with 24*24=576 code words. This code would be capable of sending 9 bits on 8 wires with 12 comparators. However, in some applications one may want to send only 8 bits on 8 wires, and would like to reduce the number of comparators. Simple combining of permutation modulation codes does not work then, and a new procedure is needed, which is herein described. Yet another application is the code obtained from all 6 distinct permutations of (−1,0,1). Combining this code with itself, it is possible to obtain a code with 36 code words requiring 6 comparators. It is possible to send slightly more than 5 bits over 6 wires with this code. However, in some applications it could be much more important to reduce the number of comparators to 5, even if the number of code words is reduced to 32 instead of 36. As will be seen later, one of the procedures outlined below creates a code with 32 elements for which the 5 comparators in the SCU of FIG. 3 are sufficient to decode the code words.
Other constraints beyond total number of comparators may influence the design of practical embodiments of the invention. As examples and without implication of limitation, it may be desirable to minimize complexity of decoder 150 or eliminate it entirely by allowing some number of SCU results M to be mapped directly to some number of output bits K, eliminate ambiguous comparator outputs by insuring that all codes in the selected subset present distinctly different values to each comparator input, and/or reduce complexity of encoder 110 by judicious selection of how inputs 105 map to the N values of the transmitted code word. As will be readily apparent to one familiar with the art, these and other secondary design characteristics are affected by the size and composition of the set of code words used, as well as by the composition of the SCU that detects them.
Design of Codes and SCU's using Graph Optimization
A procedure is now described which can be used to design sub-codes of a given code, and SCU's with a given number of comparators such that the SCU's contain sufficient information to uniquely determine the code words. A comparator comparing two values a and b will as an example output +1 or −1, depending on whether a−b is positive or negative. If a and b are values on two wires corresponding to code words coordinate values c and d, respectively, that have been subjected to channel noise, and if c and d are distinct, then it can be assumed that the result of the comparator on values a and b is the same as the result of the comparison of c and d. In other words, sign(a−b)=sign(c−d). If the noise on the communication channel is too large for this equality to hold, then noise mitigation techniques, such as equalization, or crosstalk cancellation, or other techniques have to be applied to the values on the multiconductor transmission line such as 125 of FIG. 1 before the wire values are compared against one another.
If the values c and d in the code word are the same, then the output of the comparator is inherently unreliable, because depending on random noise on the channel (which is very hard to avoid), the value a can be slightly larger or smaller than b. Therefore, a given comparator comparing wires k and m can distinguish two transmitted code words (c[1], . . . , c[N]) and (x[1], . . . , x[N]) if sign(c[k]−c[m])*sign(x[k]−x[m])<0, that is, the quantities c[k]−c[m] and x[k]−x[m] are nonzero and of opposite signs. A set of comparators C[1], . . . , C[M] is therefore sufficient for decoding a code if every two distinct code words are distinguishable by at least one of these comparators. In such a situation the code is called “decodable” by the set of comparators. The procedure described below determines a subcode of largest size that is decodable by the given set of comparators, for a given set of comparators and a given code called the “large code”.
The procedure uses the mathematical concept of a finite graph, as explained in several textbooks known to those of skill in the art. In the present graph, the nodes are the elements of the large code. There is an edge between two such nodes if the corresponding code words of the large code are not distinguishable by the set of comparators C[1], . . . , C[m]. A “maximum independent set” (hereinafter called MIS) in this graph is a subset of the nodes of largest size such that there is no edge between any two nodes in this set. A MIS therefore determines a largest subcode of the large code that is decodable by the given set of comparators.
The procedure is outlined in FIG. 4. After setting up the graph described above, a large independent set is computed in Step 430. Whether this set is a maximum independent set depends on the computational resources available to the process in FIG. 4. As is known to those of skill in the art, finding a maximum independent set is a hard computational problem for large instances of the graph. However, heuristic algorithms exist that output a large independent set, as known to those of skill in the art, and these may be preferred in some embodiments.
In applications, it may not be a-priori clear which set of comparators gives rise to the largest set decodable by any set of comparators with a given size. The procedure in FIG. 5 alleviates this problem by generating all sets T of M comparators, applying the procedure in FIG. 4 to all members of this set T, recording the size of the resulting output, and keeping it if it has the largest size seen so far in Step 550. The final output of this procedure in Step 560 is a code of maximum size that is decodable by M comparators.
In some cases the output of the procedure in FIG. 4 may be a code that is obtained by combining two smaller permutation modulation codes, each on a smaller set of wires. For example, suppose that the large code A consists of all 30 distinct permutations of the vector (+1,+1,0,−1,−1), and that the number M is 4. A possible output of the procedure in FIG. 5 could be the following set consisting of 12 elements, and the comparators 1:3, 2:5, 4:3, 1:4, wherein a:b means a comparator comparing the values of wires a and b:



 
 
 
 
 
 
 
 
Wire 1
Wire 2
Wire 3
Wire 4
Wire 5
 
 
 
 
 
 
 
 
 
 
 
1
1
0
−1
−1
 
1
−1
0
−1
1
 
1
1
−1
0
−1
 
1
−1
−1
0
1
 
0
1
1
−1
−1
 
0
−1
1
−1
1
 
0
1
−1
1
−1
 
0
−1
−1
1
1
 
−1
1
1
0
−1
 
−1
−1
0
1
1
 
−1
1
0
1
−1
 
−1
−1
0
1
1
 
 
 









Though it may not be immediately apparent at first observation, this code is a combination of the code obtained from all 6 permutations of (1,0,−1) on wires 1, 3, 4, and the code consisting of the code words (+1,−1) and (−1,+1) on wires 1 and 5.
This is easily seen by setting up a second form of graph, called a “comparator graph” in the following descriptions, and checking whether this graph is connected. Herein, the comparator graph is a graph in which the nodes are the indices of the wires, and there is an edge between nodes a and b if and only if a:b is one of the comparators. The comparator graph of the example above is given in FIG. 6. As can be seen, this graph is not connected, which means that there are two nodes in the graph (for example node 1 and node 2) for which there is no path between them consisting of edges of the graph. As can be easily appreciated by those of skill in the art, a set of comparators output by the procedure in FIG. 5 corresponds to the trivial case of combining codes of smaller length if and only if the corresponding comparator graph is not connected. Because of possible deficiencies associated with this type of code construction, this application is mostly concerned with the case where the comparator graph is connected and hence the code and the comparators cannot be obtained through simple concatenation of codes on smaller numbers of wires.
An example embodiment in accordance with the invention that applies the procedure outlined in FIG. 4 is now described with reference to the graph of FIG. 7. In this example, the large code consists of the 6 distinct permutations of the vector (1,0,−1), and the comparators are 1:2 and 2:3. The nodes in this graph are labeled by the elements of the large code, and there is an edge drawn between two nodes if and only if they are not distinguishable by the set of comparators. For example, the results of the comparators on the vector (1,−1,0) are +1,−1 and the results of the comparators on the vector (0,−1,1) are also +1,−1; thus they are shown as indistinguishable using those comparators by edge 710. The same argument may be made for the two nodes connected by edge 720. The circled code words form an independent set in this graph, and in fact, they form a maximum independent set, as can be easily seen. (That is, the two binary decisions obtained from the two comparators 1:2 and 2:3 enumerate four distinct combinations, which are severally represented by the circled code words of FIG. 7.) This gives us therefore 4 code words decodable by the set of 2 comparators 1:2, 2:3.
Another example embodiment in accordance with the invention is shown in the graph of FIG. 8. In this example, the large code consists of the 12 distinct permutations of the vector (1,0,0,−1), and the comparators are 1:2, 1:3, 1:4, and 2:3. Since any comparator presented with the two 0 values will produce an ambiguous result, two vectors are indistinguishable by that comparator. The circled code words form an independent set in this graph, and in fact, they form a maximum independent set, as can be easily seen. This gives us therefore 8 code words decodable by the set of 4 comparators 1:2, 1:3, 1:4, 2:3. Without the present teachings, 6 comparators would have been needed to distinguish these 8 code words.
 FIGS. 9A, 9B, and 9C show different codes obtained through the optimization method outlined in FIG. 5 in accordance with the invention. The codes are organized in tables. The top row outside the table shows the index of the wires. The table itself shows the code words, one per row. The lower box shows the sequence of comparators used. The code in FIG. 9A corresponds to the graph in FIG. 7, and the code in FIG. 9B corresponds to the graph in FIG. 8. The code shown in the graph FIG. 9C is a quaternary code with 18 code words and 5 (instead of 6) comparators. The code words can be further normalized so their coordinates have values between any given two numbers, for example 1 and −1, or 1 and 0. This code is also interesting in that by leaving out the third and fourth code words, we would obtain a code with 16 code words capable of transmitting on average 1 bit per wire such that, under randomized transmission, all wires would take equally often the values −3, −1, 1, and 3. Such balanced codes may be preferred in certain applications over codes not exhibiting this property. In this case the number of comparators is optimal, since, as can be seen by anyone of average skill in the art, 4 comparators producing binary results would be able to decode a code with at most 16=24 code words. As will be apparent to one familiar with the art, a code in which there are no duplicated values is unlikely to produce ambiguous outputs from pairwise signal comparators, and the four decoded binary results for sixteen codewords may allow decoder-less output of received data, which are desirable design characteristics.
Many other embodiments in accordance with the invention may be produced using the procedure outlined in FIG. 5. For example, FIG. 10 shows a code on 6 wires with 48 code words that is decodable by 10 comparators. This code is a subcode of the permutation modulation code obtained from all 90 distinct permutations of the vector (1,1,0,0,−1,−1). Without the present teachings, a decoder for this code would have required 15 comparators, 50% more comparators than given in this example.
In summary, it is observed that some applications are more sensitive to detection resource requirements (such as the required number of differential comparators) than to pin density. Therefore, it is desirable to apply the methods illustrated in FIG. 4 and FIG. 5 to find a subcode of the large code that may be fully detected by a selected (and smaller) number of comparators. A comparator graph may be drawn of the proposed subcode and comparator set to identify sets of codes in the large code that are indistinguishable by the selected comparator set, and thus contain codes that are redundant to the selected subcode. The design of SCU's based on the above coding schemes and selected subcode is straightforward, as can be appreciated from those of skill in the art.
Design of More General SCU's
A more general embodiment of the SCU 140 in accordance with the invention is now described with reference to FIG. 11. In this embodiment the N transmission lines 1102 may be divided into multiple groups of sizes N[1], N[2], . . . . For simplicity, in FIG. 11 only the case of three groups is illustrated, but in general there is no limitation on the number of groups. There are N1 wires in the first group, N2 wires in the second, and N3 wires in the third group. The SCU comprises an inner SCU unit SCU[in] 1130 and multiple arithmetic units 1105, 1110, and 1120, denoted by F1, F2, F3. These arithmetic units take as input values on some (or all) of the wires within their group, perform computations on these values, and output result values which are forwarded to the inner SCU 1130. In FIG. 11, the first group of wires contributes T1 values to F1, the second group T2 values to F2, and the third group T3 values to F3. Moreover, S1 values of the wires in the first group, S2 wire values in the second group, and S3 wire values in the third group are also forwarded to the inner SCU 1130. The sum S1+T1 can be larger than N1, meaning that some of the wire values may be needed in the corresponding arithmetic unit, and may concurrently be forwarded to the inner SCU 1130. The inner SCU 1130 consists of simple comparators.
As one example, the direct connections S1, S2, and S3 connected to inner SCU 1130 may comprise a decoding of separate codes on lines N1, N2, and N3 (producing by themselves a disconnected and thus undesirable comparator graph,) and the additional connections T1, T2, and T3 and functions F1, F2, and F3 provide to inner SCU 1130 the additional information necessary to provide graph connection and enlarge the resulting fully detected subcode.
If the comparators in the inner SCU 1130 are known in advance, and if the structure of the arithmetic units is also known in advance, then the code design problem can be accomplished using a procedure very similar to that outlined in FIG. 4. As an example embodiment in accordance with the invention, consider the case in which N1=1, N2=2, that F1 is a null operation, so the value of wire 1 is directly forwarded to the inner SCU 1130, F2 forms the average of its incoming values, T2=2, S2=2, and there are two comparators in the inner SCU 1250, one comparing the values of wires 2 and 3, and the other comparing the average of wires 2 and 3 with the value on wire 1. FIG. 12 shows a schematic of the SCU in this case: the wires a, b, c are divided into a group of one wire a, and a group of two wires b, c. The first comparator 1230 compares a against (b+c)/2 and the second comparator 1240 compares b against c. If the large code is chosen to be the code consisting of all six permutations of (1,0,−1), then the finite graph corresponding to the code words and the comparators is given in FIG. 13. The circled code words form a maximum independent set. These are four code words, which means that the code is optimal for the total number of comparators.
Another embodiment in accordance with the invention is the SCU in FIG. 3. Here, the incoming wires TR[1], . . . , TR[6] are subdivided into groups of 2 wires each, with TR[1], TR[2] forming the first group, TR[3], TR[4] forming the second group, and TR[5], TR[6] forming the last group. The inner SCU consists of the 5 comparators C[1], . . . , C[5]. The arithmetic units are averaging units, or alternatively, summation units. Application of the procedure in FIG. 4 to the large code given by all the 90 permutations of the vector (1,1,0,0,−1,−1) reveals a code of size 32, which is decodable by the set of comparators in FIG. 3. The code itself is given in FIG. 14. The existence of this code shows that a more general version of the SCU containing arithmetic units is genuinely stronger than the case in which such units are disallowed: it can be shown that for the large code above, and allowing only for comparators, the largest code that can be constructed which is decodable with 5 comparators has a size of only 24, so to create a code with 32 code words, the arithmetic units are needed.
Recursive Design of SCU's
When the number of wires is large, or when the large code has many code words, or when the structure of the arithmetic units 1105, 1110, and 1120 of FIG. 11 are not known in advance, the process of FIG. 5 may not be computationally efficient enough for the design of a code. Moreover, in such cases, the codes delivered by the process of FIG. 5 may be difficult to encode or to decode. A recursive procedure is now described to design larger SCU's starting from smaller SCU's, or smaller non-sparse comparator units. For purposes of description, the term SCU is herein used interchangeably for both sparse and non-sparse comparator units used as such subcomponents of larger Sparse Comparator Units.
If the processes of FIG. 4 and FIG. 5 represent “top down” analysis finding an optimal subset of a large code space, this recursive approach may be seen as a “bottom up” design method starting with small, easily decoded but otherwise unconnected regions of code space and connecting them to provide a unified and enlarged codespace.
With reference to the embodiment of FIG. 15 in accordance with the invention, the SCU 140 in this case is comprised of several local SCU's denoted SCU1 1505, SCU2 1510, and SCU3 1520, an arithmetic unit 1550, and a global comparator unit 1530. In general there can be more or fewer than 3 local SCU's; the number three has been chosen for illustrative purposes only. In this case, the incoming wires have been divided into three groups 1502 with N1, N2, and N3 wires, respectively. S1 of the first set of wires, S2 of the second set of wires, and S3 of the third set of wires enter an arithmetic unit 1550. The arithmetic unit output L values that are forwarded to the global comparator unit 1530, which in turn outputs M4 values. The global comparator unit may only comprise simple comparators, or it may again be an SCU according to FIG. 11. T1 of the wire values of the first set enter a local SCU 1505 which outputs M1 values, whereas T2 and T3 of the wire values of the second and third set enter their respective local SCU's 1510 and 1520, and output M2 and M3 values, respectively.
In operation, the local SCU's 1505, 1510, and 1520 correspond to one or more codes of length N1, N2, and N3, respectively, which are decodable by their corresponding SCU's. Without the arithmetic unit 1550 and the comparator unit 1530, these codes would be used independently on the communication wires, and thus a comparator graph of the resulting system would be unconnected. The arithmetic unit and the comparator unit have the effect of enlarging the codespace in such a way that the new codespace is decodable by a small number of comparators.
Examples of additional embodiments in accordance with the invention utilizing this recursive construction will now be given. In all these examples the overall code obtained will have a coarse and a fine structure. The coarse structure is detected via the global SCU 1530, whereas the fine structure is detected via the local SCU's 1505, 1510, and 1520. Where there are n local SCU's, the coarse structure is that of a code of length n.
One interpretation of this coarse/fine structure is that the fine structure represents local SCU detection of codewords within regions of code space that would be otherwise disconnected, and the coarse structure represents identification of the particular region by the global SCU. Combined, the coarse and fine information fully detects all codes in the combined codespace. As a trivial example, the local SCUs might represent differential comparators on two distinct wire pairs. Each differential comparator is oblivious to any common-mode signal carried by their input wires. However, a global SCU may detect such common mode differences between wire pairs, providing the additional information that allows detection of the complete input code.
In at least one embodiment in accordance with the invention, the global SCU consists of one comparator only. The corresponding code is called the “global” code hereinafter.
In a further embodiment of the invention, shown in FIG. 16, there is only one local SCU consisting of one comparator 1610. The corresponding coarse structure of the code is therefore that of a differential code given by the code words (1,−1) and (−1,1). There are three incoming wires denoted a, b, c, divided into two groups, one consisting of the wires a, b, and the other consisting of the wire c. The arithmetic unit consists of an average unit 1620 whose output is the average of its input values (or alternatively, the sum of its input values.) The global SCU consists of only one comparator 1650. The number of signals leaving the SCU 140 is 2. The code corresponding to this configuration can be described as follows: In the differential code a 1 at the first position is replaced by (0,1) or by (1,0), and a −1 at the first position is replaced by (0,−1) or (−1,0). The sum of the values of the first two wires is always equal to the first component of a given code word in the differential code, and the value of the last wire is equal to the value of the second component of the code word in the global code. The averaging (or summing) unit recovers the value 1 or −1 on the first two positions, and compares it against the value of the third wire. The outcome is a ternary vector signaling code of length 3, having 4 code words, and decodable by the optimal number 2 of comparators.
This SCU can now itself be used as the global SCU in a recursive application, representing another embodiment in accordance with the invention. In each code word of the code obtained in the previous example, a “1” is replaced by either (1,0) or (0,1), a “−1” is replaced by either (−1,0) or (0,−1), and a “0” is replaced by either (1,−1) or (−1,1). The resulting code, is of length 6, has 32 code words, and is decodable by 5 comparators, which is the optimal number of comparators for this code. Its SCU is shown in FIG. 17. As can be seen, the global SCU 1530 of this SCU is the same as the SCU in FIG. 16. The arithmetic unit 1550 consists of three averaging (or summing) units. The local SCU's consist of only one comparator, comparing values of adjacent wires.
If the SCU of this code is used as the global SCU in another recursive application, representing additional embodiments also in accordance with the invention with 1's, 0's, and −1's changed according to the above scheme, another ternary code of length 12 is obtained which has 211=2048 code words and is the decodable by the optimal number of 11 comparators. This sequence of examples can be continued in a similar manner.
A different way of generalizing the example of FIG. 16 in accordance with the invention is to keep the global SCU to consist of one comparator only, and to change the structure of the local SCU's 1505-1520 in FIG. 15. This leads to embodiments in accordance with the invention replacing in the differential code {(1,−1), (−1,1)}, a “1” by some vector with sum equal to 1 (or some other positive number), and a “−1” by some vector with sum equal to −1 (or the negative of the first sum). As an example, suppose that the “1” is replaced by any of the 12 permutations of the vector (1,1,0,−1), whereas a “−1” is replaced by any of the 12 permutations of the vector (−1,−1,0,1). An SCU that decodes this code is given in FIG. 18. The wires are subdivided into two groups of 4 wires. The local SCU's use each 6 comparators to compare the values of the wires in each group against one another. The arithmetic unit computes the average (or alternatively, the sum) of the first and the second groups of wires, and compares them with one comparator, which makes up the global SCU. The resulting code consists of 288 code words which are permutations of the vector (1,1,1,0,0,−1,−1,−1) and which is decodable with 6+6+1=13 comparators.
At least one embodiment in accordance with the invention replaces the global SCU with a comparator unit accepting three inputs, and computing all three comparisons of pairs of its inputs. The corresponding code for this SCU is the code consisting of all permutations of (1,0,−1). If a “1” is replaced by (0,1) or (1,0), a “−1” is replaced by (0,−1) or (−1,0), and “0” is replaced by (1,−1) or (−1,1), a ternary code of length 6 is obtained with 48 code words which is decodable by the SCU of FIG. 19 with 6 comparators. The number of comparators needed for this code is optimal. By concatenating this code with the code consisting of all 6 permutations of the vector (1,0,−1) in further embodiments in accordance with the invention, a ternary code is obtained on 9 wires capable of transmitting 48*6=288 code words and which is decodable by an SCU with the optimal number of 9 comparators.
The examples presented herein illustrate the use of vector signaling codes for point-to-point chip-to-chip interconnection. However, this should not been seen in any way as limiting the scope of the described invention. The methods disclosed in this application are equally applicable to other interconnection topologies and other communication media including optical, capacitive, inductive, and wireless communications, which may rely on any of the characteristics of the described invention, including minimization of reception or detection resources by selective modification or subset selection of code space. The methods disclosed in this application are equally applicable to embodiments where the encoded information is stored and subsequently retrieved, specifically including dynamic and static random-access memory, non-volatile memory, and flash programmable memory. Descriptive terms such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “optical intensity”, “RF modulation”, “stored charge”, etc. As used herein, the term “physical signal” includes any suitable behavior and/or attribute of a physical phenomenon capable of conveying information. Physical signals may be tangible and non-transitory.

What is claimed is:
 
1. An apparatus comprising:
an arithmetic unit connected to a plurality of wires of a multi-wire bus comprising four wires, the arithmetic unit comprising at least first and second averaging units connected to first and second pairs of wires of the multi-wire bus, respectively, the first and second pairs of wires being disjoint, the first and second pairs of wires carrying permutations of base vectors (1,0) and (0,−1), respectively, the first and second averaging units configured to generate first and second common mode values respectively based on averages of the base vectors carried by the first and second pairs of wires, respectively; and
a comparator unit comprising a two-input comparator configured to receive the first and second common mode values from the arithmetic unit, and to responsively form a binary output representing a common mode difference between the received first and second common mode values, the binary output used at least in part in determining a set of output bits.


  
2. The apparatus of claim 1, wherein the permutations of the base vectors on the first and second pairs of wires of the multi-wire bus correspond to a codeword of a vector signaling code.

  
3. The apparatus of claim 1, further comprising a sparse comparator unit connected to the multi-wire bus configured to generate second and third binary outputs.

  
4. The apparatus of claim 3, wherein the sparse comparator unit comprises first and second local two-input comparators connected to the first and second pairs of wires of the multi-wire bus, respectively.

  
5. The apparatus of claim 1, wherein the first and second pairs of wires are adjacent wires.

  
6. A method comprising:
receiving a plurality of signals via wires of a multi-wire bus comprising four wires;
generating first and second common mode values using first and second averaging units, the first and second averaging units receiving permutations of base vectors (1,0) and (0,−1) on the first and second pairs of wires of the multi-wire bus, respectively, the first and second pairs of wires being disjoint, the first and common mode values corresponding to averages of the base vectors carried by the first and second pairs of wires, respectively; and
forming a binary output at a comparator unit comprising a two-input comparator, the comparator unit receiving the first and second common mode values from the first and second averaging units, the binary output representing common mode difference between the received first and second common mode values, the binary output used at least in part in determining a set of output bits.


  
7. The method of claim 6, wherein the permutations of the base vectors on the first and second pairs of wires correspond to symbols of a codeword of a vector signaling code.

  
8. The method of claim 6, further comprising generating second and third binary outputs using a sparse comparator unit connected to the multi-wire bus.

  
9. The method of claim 8, wherein the sparse comparator unit comprises first and second local two-input comparators connected to the first and second pairs of wires of the multi-wire bus, respectively.

  
10. The method of claim 6, wherein the first and pairs of wires are to adjacent wires.