Source: [US10003424B2](https://patents.google.com/patent/US10003424B2)

# [US10003424B2](US10003424B2.md) - [US10003424B2](US10003424B2.md) - Bus reversible orthogonal differential vector signaling codes

## Details

* Date: 2014-07-17
* Inventor: Kandou Labs SA
* Beneficiary: Roger Ulrich, Amin Shokrollahi

## Other patents

### Backwards
 * US668687A
 * US780883A
 * US3196351A
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4276543A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4722084A
 * US4772845A
 * US4774498A
 * US4864303A
 * US4897657A
 * [US4974211A](US4974211A.md)
 * US5017924A
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5266907A
 * US5283761A
 * US5287305A
 * US5311516A
 * [US5412689A](US5412689A.md)
 * US5449895A
 * US5459465A
 * US5511119A
 * US5553097A
 * US5566193A
 * US5599550A
 * US5626651A
 * US5629651A
 * US5659353A
 * US5727006A
 * US5748948A
 * US5802356A
 * [US5825808A](US5825808A.md)
 * US5856935A
 * US5875202A
 * US5945935A
 * US5949060A
 * US5982954A
 * US5995016A
 * US5999016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6119263A
 * US6172634B1
 * US6175230B1
 * US6232908B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US6316987B1
 * US20010055344A1
 * US6346907B1
 * US20020034191A1
 * US20020044316A1
 * US6378073B1
 * US20020057592A1
 * US20020057292A1
 * US6398359B1
 * US6404820B1
 * US6417737B1
 * [US6452420B1](US6452420B1.md)
 * US20020154633A1
 * US6473877B1
 * US20020163881A1
 * US20020167339A1
 * US6483828B1
 * US20020174373A1
 * US20020181607A1
 * US6509773B2
 * US20030016770A1
 * US6522699B1
 * US20030046618A1
 * US20030048210A1
 * US20030071745A1
 * [US6556628B1](US6556628B1.md)
 * US20030086366A1
 * US20030085763A1
 * US6563382B1
 * US20030105908A1
 * JP2003163612A
 * US20030146783A1
 * US20030174023A1
 * US6624699B2
 * US20030185310A1
 * US6650638B1
 * US20030218558A1
 * [US6661355B2](US6661355B2.md)
 * US20030227841A1
 * US6664355B2
 * US20040003336A1
 * US20040003337A1
 * US6690739B1
 * US20040027185A1
 * US20040057525A1
 * US20040086059A1
 * [US6766342B2](US6766342B2.md)
 * US20040146117A1
 * US6772351B1
 * US20040155802A1
 * US20040156432A1
 * US20040161019A1
 * US20040169529A1
 * US20040174373A1
 * US6839587B2
 * [US6839429B1](US6839429B1.md)
 * WO2005002162A1
 * US6865234B1
 * US6865236B1
 * US20050063493A1
 * US6876317B2
 * US20050134380A1
 * US20050149833A1
 * US20050152385A1
 * US20050174841A1
 * US20050195000A1
 * US20050201491A1
 * US20050213686A1
 * US20050220182A1
 * [US6954492B1](US6954492B1.md)
 * US6972701B2
 * US20050286643A1
 * [US6990138B2](US6990138B2.md)
 * US20060018344A1
 * US6991038B2
 * US6993311B2
 * [US6999516B1](US6999516B1.md)
 * US20060036668A1
 * US20060067413A1
 * US7023817B2
 * US7039136B2
 * US20060097786A1
 * US20060103463A1
 * US7053802B2
 * US20060115027A1
 * US20060120486A1
 * US20060126751A1
 * US20060133538A1
 * US20060140324A1
 * US7080288B2
 * US20060159005A1
 * US7082557B2
 * US7085153B2
 * US20060233291A1
 * CN1864346A
 * [US7142612B2](US7142612B2.md)
 * US7142865B2
 * US20060269005A1
 * US20070001723A1
 * US20070002954A1
 * US7167019B2
 * US20070030796A1
 * US7176823B2
 * [US7180949B2](US7180949B2.md)
 * US7199728B2
 * US20070103338A1
 * US20070121716A1
 * US7231558B2
 * US20070204205A1
 * US7269130B2
 * US7269212B1
 * US20070260965A1
 * US20070265533A1
 * US20070263711A1
 * US20070283210A1
 * US20080007367A1
 * US20080012598A1
 * US20080013622A1
 * US7336112B1
 * US7335976B2
 * US7346819B2
 * US7356213B1
 * US7358869B1
 * US7362697B2
 * US7366942B2
 * US20080104374A1
 * US7372390B2
 * EP1926267A1
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US7397302B2
 * US7400276B1
 * US20080169846A1
 * US20080192621A1
 * US20080273623A1
 * US20080284524A1
 * US20080317188A1
 * US20090059782A1
 * US20090092196A1
 * US20090115523A1
 * US20090132758A1
 * US20090154500A1
 * CN101478286A
 * WO2009084121A1
 * US20090185636A1
 * US20090193159A1
 * US20090195281A1
 * US20090212861A1
 * US20090228767A1
 * US20090257542A1
 * US20090262876A1
 * US7613234B2
 * US7620116B2
 * [US7633850B2](US7633850B2.md)
 * US20090316730A1
 * US20090323864A1
 * US7650525B1
 * US20100023838A1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US20100081451A1
 * US7698088B2
 * US7697915B2
 * US7706524B2
 * US20100104047A1
 * US20100122021A1
 * US20100148819A1
 * US20100180143A1
 * US20100177816A1
 * US7768312B2
 * US20100205506A1
 * US20100215087A1
 * US20100215112A1
 * US7787572B2
 * US20100235673A1
 * US7808456B2
 * US20100296550A1
 * US20100296556A1
 * US7841909B2
 * US20100309964A1
 * US7869497B2
 * US20110014865A1
 * US7882413B2
 * US7899653B2
 * US20110051854A1
 * US20110072330A1
 * US20110084737A1
 * US7933770B2
 * US20110103508A1
 * US8000664B2
 * US20110228864A1
 * WO2011119359A2
 * US20110268225A1
 * US8064535B2
 * US20110302478A1
 * [US20110299555A1](US20110299555A1.md)
 * US20110317559A1
 * US20110317587A1
 * US8106806B2
 * US20120063291A1
 * US8149906B2
 * US20120082203A1
 * [US8159376B2](US8159376B2.md)
 * US8199849B2
 * US20120152901A1
 * US20120161945A1
 * US20120213299A1
 * US8253454B2
 * US8279094B2
 * US20120257683A1
 * US8289914B2
 * US8295250B2
 * US8295336B2
 * US8310389B1
 * US20130010892A1
 * US20130013870A1
 * US8359445B2
 * EP2039221B1
 * US8406316B2
 * US8429492B2
 * US8429495B2
 * US8437440B1
 * US20130114519A1
 * US8443223B2
 * US8442099B1
 * US20130129019A1
 * US20130147553A1
 * US20130163126A1
 * US20130188656A1
 * US8498368B1
 * US20130195155A1
 * US20130202065A1
 * US8547272B2
 * US20130259113A1
 * US20130271194A1
 * US8578246B2
 * US8593305B1
 * US20130315501A1
 * US20130314142A1
 * US8602643B2
 * US8604879B2
 * US20130346830A1
 * US8620166B2
 * US8638241B2
 * US8643437B2
 * US8649556B2
 * US8649460B2
 * US8649840B2
 * US8674861B2
 * US8718184B1
 * US20140132331A1
 * US20140159769A1
 * US8755426B1
 * US8780687B2
 * US8782578B2
 * US20140198841A1
 * US20140198837A1
 * US20140226455A1
 * US20140254730A1
 * US8879660B1
 * US8898504B2
 * US20150010044A1
 * US8938171B2
 * US8951072B2
 * US20150070201A1
 * US20150078479A1
 * US8989317B1
 * US9036764B1
 * US20150146771A1
 * US9059816B1
 * US9069995B1
 * US9077386B1
 * US9083576B1
 * US20150199543A1
 * US9093791B2
 * US9100232B1
 * US20150249559A1
 * US9148087B1
 * US9152495B2
 * US9178503B2
 * US9183085B1
 * US20150333940A1
 * US20150349835A1
 * US20150381232A1
 * US20150380087A1
 * US20160020796A1
 * US20160020824A1
 * US20160036616A1
 * US9281785B2
 * [US9288082B1](US9288082B1.md)
 * US9300503B1
 * US9374250B1
 * US9432298B1
 * US20160261435A1
 * US9634797B2
 * US20170310456A1
 * US20170317855A1
 * US20170317449A1
### Forward
 * US20180302181A1
## Abstract

Abstract

Properties and the construction method of Orthogonal Differential Vector Signaling Codes are disclosed which are tolerant of order-reversal, as may occur when physical routing of communications channel wires causes the bus signal order to be reversed. Operation using the described codes with such bus-reversed signals can avoid complete logical or physical reordering of received signals or other significant duplication of receiver resources.



Properties and the construction method of Orthogonal Differential Vector Signaling Codes are disclosed which are tolerant of order-reversal, as may occur when physical routing of communications channel wires causes the bus signal order to be reversed. Operation using the described codes with such bus-reversed signals can avoid complete logical or physical reordering of received signals or other significant duplication of receiver resources.

This application is a continuation of U.S. application Ser. No. 14/796,645, filed Jul. 10, 2015, which claims the benefit of U.S. Provisional Patent Application 62/025,712, filed Jul. 17, 2014, naming Roger Ulrich, entitled “Bus Reversable Orthogonal Differential Vector Signaling Code” all of which are hereby incorporated by reference in their entirety for all purposes.
REFERENCES
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication No. 2011/0268225 of U.S. patent application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”);
U.S. Patent Publication No. 2011/0302478 of U.S. patent application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Rejection and SSO Resilience”, (hereinafter “Cronie II”);
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli, entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes” (hereinafter “Cronie III”);
U.S. Patent Publication No. 2011/0299555 of U.S. patent application Ser. No. 13/154,009, filed Jun. 6, 2011, naming Harm Cronie and Amin Shokrollahi, entitled “Error Control Coding for Orthogonal Differential Vector Signaling” (hereinafter “Cronie IV”);
U.S. Provisional Patent Application No. 61/763,403, filed Feb. 11, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox I”);
U.S. Provisional Patent Application No. 61/773,709, filed Mar. 6, 2013, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox II”);
U.S. Provisional Patent Application No. 61/812,667, filed Apr. 16, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, and Giuseppe Surace, entitled “Methods and Systems for High Bandwidth Communications Interface” (hereinafter called “Fox III”);
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi, and Anant Singh, entitled “Methods and Systems for Skew Tolerance and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication” (hereinafter called “Holden I”);
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences” (hereinafter called “Ulrich I”).
U.S. patent application Ser. No. 14/315,306, filed Jun. 25, 2014, naming Roger Ulrich, entitled “Multilevel Driver for High Speed Chip-to-Chip Communications” (hereinafter called “Ulrich II”).
U.S. Provisional Patent Application No. 61/934,804, filed Feb. 2, 2014, naming Ali Hormati and Amin Shokrollahi, entitled “Method for Code Evaluation using ISI Ratio” (hereinafter called “Hormati I”).
U.S. Provisional Patent Application No. 61/992,711, filed May 13, 2014, naming Amin Shokrollahi, entitled “Vector Signaling Code with Improved Noise Margin” (hereinafter called “Shokrollahi I”).
U.S. Provisional Patent Application No. 62/023,163, filed Jul. 10, 2014, naming Amin Shokrollahi and Roger Ulrich, entitled “Vector Signaling Code with Improved Noise Margin” (hereinafter called “Shokrollahi II”).
BACKGROUND
In communication systems, a goal is to transport information from one physical location to another. It is typically desirable that the transport of this information is reliable, is fast and consumes a minimal amount of resources. One common information transfer medium is the serial communications link, which may be based on a single wire circuit relative to ground or other common reference, or multiple such circuits relative to ground or other common reference. A common example uses singled-ended signaling (“SES”). SES operates by sending a signal on one wire, and measuring the signal relative to a fixed reference at the receiver. A serial communication link may also be based on multiple circuits used in relation to each other. A common example of the latter uses differential signaling (“DS”). Differential signaling operates by sending a signal on one wire and the opposite of that signal on a matching wire. The signal information is represented by the difference between the wires, rather than their absolute values relative to ground or other fixed reference.
There are a number of signaling methods that maintain the desirable properties of DS while increasing pin efficiency over DS. Vector signaling is a method of signaling. With vector signaling, a plurality of signals on a plurality of wires is considered collectively although each of the plurality of signals might be independent. Each of the collective signals is referred to as a component and the number of plurality of wires is referred to as the “dimension” of the vector. In some embodiments, the signal on one wire is entirely dependent on the signal on another wire, as is the case with DS pairs, so in some cases the dimension of the vector might refer to the number of degrees of freedom of signals on the plurality of wires instead of exactly the number of wires in the plurality of wires.
With binary vector signaling, each component or “symbol” of the vector takes on one of two possible values. With non-binary vector signaling, each symbol has a value that is a selection from a set of more than two possible values. The set of values that a symbol of the vector may take on is called the “alphabet” of the vector signaling code. A vector signaling code, as described herein, is a collection C of vectors of the same length N, called codewords. Any suitable subset of a vector signaling code denotes a “subcode” of that code. Such a subcode may itself be a vector signaling code. Orthogonal Differential Vector Signaling codes (ODVS) as described in [Cronie I] are one specific example of a vector signaling code as used in descriptions herein.
In operation, the coordinates of the codewords are bounded, and we choose to represent them by real numbers between −1 and 1. The ratio between the binary logarithm of the size of C and the length N is called the pin-efficiency of the vector signaling code.
A vector signaling code is called “balanced” if for all its codewords the sum of the coordinates is always zero. Balanced vector signaling codes have several important properties. For example, as is well-known to those of skill in the art, balanced codewords lead to lower electromagnetic interference (EMI) noise than non-balanced ones. Also, if common mode resistant communication is required, it is advisable to use balanced codewords, since otherwise power is spent on generating a common mode component that is cancelled at the receiver.
Additional examples of vector signaling methods are described in Cronie I, Cronie II, Cronie III, Cronie IV, Fox I, Fox II, Fox III, Holden I, Shokrollahi I, and Hormati I.
BRIEF DESCRIPTION
Properties and the construction method of Orthogonal Differential Vector Signaling Codes are disclosed which are tolerant of order-reversal, as may occur when physical routing of communications channel wires causes the bus signal order to be reversed. Operation using the described codes with such bus-reversed signals can avoid complete logical or physical reordering of received signals or other significant duplication of receiver resources.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 shows a prior art configuration of a transmitter and receiver interconnected by a multiwire channel that may be bus reversed.
 FIG. 2 shows a system in accordance with at least one embodiment, capable of communicating information from a transmitting device to a receiving device over a communications channel which may be bus-reversed.
 FIG. 3 shows one embodiment of a receiver producing received data from non-bus-reversed received signals, and producing the same received data if the received signals are bus-reversed.
 FIG. 4 is a block diagram of a procedure to find reversal-amenable permutations of a matrix.
 FIG. 5 is a block diagram of an additional procedure to find reversal-amenable permutations of a matrix if matrix columns are permuted.
 FIG. 6 shows a method in accordance with at least one embodiment.

DETAILED DESCRIPTION
The concept of orthogonal vector signaling has been introduced in [Croniel]. As presented there, an orthogonal differential vector signaling (ODVS) code may be obtained via the multiplication

(0,x 2 , . . . ,x n)·M/a  [Eqn. 1]

wherein M is an orthogonal n×n-matrix in which the sum of the columns is zero except at the first position, x2, . . . , xn belong to a set S describing the original modulation of these symbols, and a is a normalization constant which ensures that all the coordinates of the resulting vector are between −1 and +1. In the following, we call an orthogonal matrix for which the sum of the columns is zero except in the first position an “ODVS generating matrix.”

For example, in case of binary modulation, the set S may be chosen to be {−1,+1}. In case of ternary modulation, the set S may be chosen as {−1,0,1}, in case of quaternary modulation, the set S may be chosen as {−3,−1,1,3}, and in case of quintary modulation S may be chosen as {−2,−1,0,1,2}.
In operation, the matrix M does not need to be orthogonal. It suffices that all its rows are pairwise orthogonal (even if the rows are not of Euclidean norm 1). In the following, we call such matrices s-orthogonal (scaled orthogonal).
For proper working of this scheme it is not necessary that all the xi are modulated by the same set S.
Detection of the transmitted signals can be accomplished with the matrix M in the following manner. Each row of M is scaled in such a way as to ensure that the sum of the positive entries in that row is equal to 1. Then the entries of each row of the new matrix (except for the first) are used as coefficients of a multi-input comparator as defined in [Holden I]. For example, if n=6, the values on the 6 wires (possibly after equalization) are denoted by a, b, c, d, e, f, and the row is [½,¼,−½,¼,−½,0], then the multi-input comparator would calculate the value
        a 2  +   b + d  2  -  (   c + e  2  )      [  Eqn .     ⁢ 2  ]       
and would slice the result. In case of binary modulation, such slicing is performed by a digital comparator, whereas for higher order modulation a stack of digital comparators with distinct threshold references may be used as taught in [Shokrollahi II]. Alternatively, the result may be passed through an Analog-to-Digital converter with appropriate precision.

In a typical application using an ODVS code to communicate between two integrated circuit devices, multiple chip pins or pads are interconnected as a parallel bus. Following conventional best practice, one chip will be designed to have the required number of I/O pins sequentially assigned to the communications interface function, as one example along its rightmost package edge, and the other chip will be designed to have the same connections assigned, continuing the example, along its leftmost package edge such that a series of equal-length straight signal traces may connect the pins in consecutive order.
However, even when integrated circuit devices are designed to facilitate such optimized physical interconnection, the desired results may be impractical to achieve in practice. The physical placement of the two chips may preclude direct equal-length connections, requiring trace routing at right angles or using vias, which introduce impedance anomalies and signal path length differences. In the worst case, often occurring with “flip chip” packaging and/or actives-both-sides PCB designs, the only available routing path between the two devices results in the sequential order of the I/O pin signals being reversed between the two devices. Such situations may also occur if symmetrical “plug in either way” connectors are used for interconnections. This is typically referred to as “bus reversal” since effectively the signals on the wires are presented to the receiver in reversed sequential order.
 FIG. 1 illustrates a prior art transmitting device 110 connected to a receiving device 130 via a multiwire channel 120 which may (or may not) be bus reversed. If the bus is not reversed, transmitted channel signals w0in, . . . , w5in correspond directly to received channel signals w0out, . . . , w5out. If the bus is reversed, the signal w0in appears at w5out, w1in appears at w4out, w2in appears at w3out, w3in appears at w2out, w4in appears at w1out, and w5in appears at w0out. To insure that received data rxb0-rxb4 in receiving device 130 duplicates transmitted data txb0-txb4 in the transmitting device, receiver 130 must include a selectable permutation device 132 to permute the received signal order back to its intended order, prior to analog detection and processing 135.
Such known solutions for bus reversal generally rely on physical reordering of the received bus signals using analog multiplexers or other steering logic at the input of the receiving chip, at the cost of significant receiver complexity. At very high signaling rates, these additional circuit elements introduce impedance anomalies leading to signal degradation. Moreover, it may be impractical to route the necessary signals from one end of the bus across the receiver chip to multiplexers at the other end of the bus to perform such physical bus reordering and still meet timing constraints. Similarly, even though the receiver is typically aware of a reversed bus, it may not be practical to include both a receiver for when the bus wires are reversed, and one for the case of normal operation, as this will lead to area and power penalties.
One familiar with the art may observe that some known art receive solutions, such as use of single-ended line receivers to detect incoming signals, might permit the selectable permutation device 132 to operate in the digital domain, after the line receivers. However, such solutions will not in general be available if differential receivers are used, as will often be the case for high speed, high performance interconnections.
Furthermore, if an ODVS code is used, ignoring bus reversal may have a disastrous effect on differentially detected received signals. For example, consider an ODVS code generated by the s-orthogonal matrix M given below:







M
=


(



1


1


1




1



-
1



0




1


1



-
2




)

.





[

Eqn
.

 

⁢
3

]







Consider the encoding of the vector (0, 1, −1) as the codeword (0, 1, −1) (after normalization by division by 2, i.e., with a=2 in Eqn. 1). A bus-reversed communications channel would transform this vector into (−1, 1, 0), which is not even a valid codeword. Trying to detect this codeword with the comparators (1,−1,0) and (½, ½, −1) would lead to the vector (0, −2, 0) which is not the same as the original encoded vector (and cannot even be detected reliably because the last “0” in the vector introduces an ambiguous comparator state.)
However, ODVS code embodiments also exist where bus reversal does not have a disastrous effect and for which compensation can be very efficiently applied using simple digital logic. In one such embodiment, the ODVS code is generated by the Hadamard matrix







H
=


(



1


1


1


1




1



-
1



1



-
1





1


1



-
1




-
1





1



-
1




-
1



1



)

.





[

Eqn
.

 

⁢
4

]







A vector (0,x, y, z) is encoded with this matrix to

((x+y+z)/a,(y−x−z)/a,(x−y−z)/3,(z−x−y)/a)  [Eqn. 5]

wherein a is chosen to normalize the resulting values to the range −1 to +1. Bus reversal transforms these values into a set of permuted symbols corresponding to

((z−x−y)/a,(x−y−z)/a,(y−x−z)/a,(x+y+z)/a)  [Eqn. 5]

and final detection of this vector by the comparators (1, −1, 1, −1)/2, (1,1,−1,−1)/2, and (1,−1,−1,1)/2 yields the vector

2(−x,−y,z)/a.  [Eqn. 6]

This is, up to a sign change on the first two entries and scaling, equal to the original bits (x, y, z). This sign change can be easily implemented in digital logic after detection of the signals by the analog receiver. A sign change may correspond to a binary inversion, a signal negation, or any other relevant sign changes known to one of skill in the art.
We call an ODVS code “reversal-amenable” if bus reversal has a similar effect on the signals as for the matrix H. This means that a wire permutation (including but not limited to a full bus reversal) of a codeword, followed by the comparators given by the matrix produces a possibly permuted vector of input bits in which some of the entries may have a reversed sign. An orthogonal generating matrix that generates such an ODVS code is called “reversal-amenable.” In applications, a reversal-amenable ODVS code may be preferable to one that is not reversal-amenable. Even if some permutation of the resulting received bits is required to return to non-bus-reversed order, the amount of permutation required will be less than the full bus reversal required by prior art solutions, such permutation may be performed by post-detection digital logic (versus by analog circuitry at the chip input) and, for embodiments using multiple phases of receive signal processing, the required permutations and sign reversals can be done at lower speed within each of the multiple processing phases. Embodiments requiring an explicit decoding operation to recover received data from the detected signals may also advantageously incorporate the required permutation and negation operations for compensation for bus reversal into the decoder logic.
A system incorporating such a reversal-amenable ODVS code in accordance with at least one embodiment is illustrated in FIG. 2. Transmitting device 220 encodes transmit data txb0, . . . , txb4 to produce an ODVS code, which is emitted as signals w0in, . . . , w5in to communications channel 220. Communications channel 220 may or may not reverse the consecutive ordering of signals w0in, . . . , w5in during transmission to w0out, . . . , w5out, where they are received by receiving device 230. Without explicit permutation or other controllable redirection being performed on the received signals, analog decoder and processing devices shown as 235, which may include without limitation differential line receivers, comparators, multi-input comparators and other analog processing elements detects received signals rxb0int, . . . , rxb4int, which are subsequently processed by digital reversing unit 238 to obtain the received signals rxb0, . . . , rxb4.
Construction of Reversal-Amenable ODVS Codes
In some cases, a reversal-amenable ODVS code may be obtained from a general ODVS code by judiciously permuting the columns of the generating matrix M in Eqn. 1. For example, by permuting columns 2 and 3 of the matrix M in Eqn. 3, we obtain a reversal-amenable ODVS code: A vector (0,x, y) is encoded with the new matrix to a set of original symbols (x+y, −2y, y−x)/a, wherein a is chosen to make sure that the entries of this vector are between −1 and +1. Application of bus reversal leads to the vector of permuted symbols (y−x, −2y, x+y)/a, and final detection via the comparators (1,0,−1), (½,−1, ½) leads to the vector of output bits (−2x, 3y)/a which is (up to scaling and sign) equal to the original bits.
The following description is of a method to detect whether an orthogonal generating matrix generating an ODVS code can be made reversal-amenable by a permutation of the columns, and for finding a right permutation of the columns that allows this. To this end, the descriptive terminology of matrices and permutations is used herein, as described in standard textbooks on linear algebra and group theory.
A quadratic matrix is called “monomial” if it has exactly one nonzero entry in every row and every column. It is called a “permutation matrix” if it is monomial and the nonzero entry in every row and column is 1. If A is any matrix with n columns and P is a permutation matrix with n rows, then A·P is obtained by permuting the columns of A according to P. Similarly, if A has n rows, then P·A is obtained from A by permuting the rows of A according to P.
The “reversal” matrix R with n rows and columns is the matrix
       R =  (    0   0   …   0   1     0   0   …   1   0     ⋮   ⋮   ⋱   ⋮   ⋮     0   1   …   0   0     1   0   …   0   0    )      [  Eqn .     ⁢ 7  ]       
i.e., the matrix has only 1's on its main anti-diagonal and is zero elsewhere.

An ODVS generating matrix A is called “P-amenable” if A·P·AT is a monomial matrix, wherein AT is the transpose of A and P is a permutation matrix. If A is P-amenable, then a wire permutation corresponding to a permutation of the communication wires according to the matrix P can be easily adjusted at the receiver: the codewords of the ODVS code generated by A are the vectors (0|x)·A/a, wherein x is a vector of length n−1 (if A has size n) and a is a normalization constant. Permutation of the wires corresponds to multiplication of this result by P, and detection of the results corresponds to the multiplication of the new result by AT·D, where D is the diagonal matrix that has as its k-th diagonal entry the sum of the positive entries of the k-th row of A. In total, therefore, the coding and detection of the signals in the presence of a permutation of the wires according to P corresponds to the multiplication

(0|x)·A·P·A T ·D/a.  [Eqn. 8]

The input vector x can now be re-assembled if A·P·AT is a monomial matrix.
As can be seen by anyone of moderate skill in the art, a reversal-amenable ODVS code is one that is generated by an R-amenable matrix A.
A procedure is now described to compute a permutation matrix U (if it exists) such that A·U is R-amenable. Constructing the ODVS code using A·U would then lead to a reversal-amenable ODVS code. To this end, we call a permutation matrix P with n rows a “matching” if P2 is the identity matrix and either there is no j such that P[j,j]=1 (in case n is even) or there is exactly one j such that P[j,j]=1 (in case n is odd). Here and in the following A[i,j] denotes the (i,j)-entry of matrix A. As is known to those who are somewhat versed in the theory of finite groups, or even only the theory of permutation groups, a matrix P is a matching if and only if there is a permutation matrix U such that U·P·UT=R.
    Step 1: Determine whether there is a matching P such that A is P-amenable (for example by calculating A·P·AT for all matchings P via the procedure below and checking whether the result is monomial). Step 2: If there is no such matching P, return NO. Step 3: If there is such a matching P, then proceed as follows:
         Step 3.1: Initialize set T as {1,2, . . . , n} and s=1. Step 3.2: Pick an element i from T and determine j such that P=1.
             Step 3.2.1: if j=i, then (necessarily n is odd) set U[j. (n+1)/2]=1. Step 3.2.2: if j≠i, then set U[i,s]=1, U[j,n−s+1]=1, remove i,j from T, and increase s by 1. Step 3.2.3: If T is empty, stop, else go to Step 3.2. 
 
   
This procedure is illustrated as the block diagram of FIG. 4.
Amenability to Arbitrary Permutations
In the discussions above we concentrated mostly on reversal-amenable ODVS codes. However, the techniques described can be used to check whether there is a permutation of the columns of an ODVS generating matrix to make it amenable to a given wire permutation, and if so, to calculate one such permutation.
As is known to those of moderate skill in the art, any permutation matrix can be written as a product of disjoint “cycles” wherein a cycle is a permutation matrix cyclically permuting the elements of a subset of {1, . . . , n} (called “permuted subset”) and leaving all other elements of this set invariant. The size of the permuted subset is called the “length” of the cycles. Such cycles are called disjoint if the permuted subsets of the cycles are all disjoint. The “cycle structure” of a permutation matrix is the vector obtained from the lengths of the disjoint cycles the product of which is the given permutation matrix.
As is taught by the theory of finite permutation groups, for two permutation matrices P and P′ there is a permutation matrix U such that P′=U·P·UT if and only if P and P′ have the same cycle structure.
The procedure above to check whether an ODVS matrix is reversal-amenable can therefore be modified by those of skill in the art to check whether there is a permutation of the columns that makes an ODVS matrix amenable to any permutation matrix P, and to compute the permutation. One example of such an additional procedure is:
    Step 1: Determine whether there is a matching Q with the same cycle structure as P such that A is Q-amenable (for example by calculating A·Q·AT for all permutations Q that have the same cycle structure as P and checking whether the result is monomial). Step 2: If there is no such matching Q, return NO. Step 3: If there is such a matching Q, then proceed as follows:
         Step 3.1: For all permuted subsets {k1, . . . , kt} of P such that P[k1,k2]=P[k2,k3]= . . . =P[kt,k1]=1,
             Step 3.1.1: determine a permuted subset {j1, . . . , jt} of Q such that Q[j1,j2]=Q[j2,j3]= . . . =Q[jt,j1]=1, Step 3.1.2: set U[k1,j1]=U[k2,j2]= . . . =U[kt,jt]=1. 
 next subset. 
   
This additional procedure is illustrated as the block diagram of FIG. 5.
Examples for Reversal-Amenability
For the following examples we will use the following economical representation of permutation matrices via vectors. Specifically, a vector [a1, a2, . . . , an] with a1, a2, . . . , an in {1,2, . . . , n} corresponds to the matrix having ones in positions (1, a1), (2, a2), . . . , (n, an). So, for example, the vector [2,3,1] would correspond to the permutation matrix








(



0


1


0




0


0


1




1


0


0



)

.




[

Eqn
.

 

⁢
9

]







A first example embodiment is an ODVS code generated by the matrix previously described in [Shokrollahi II]:







M
=


(



1


1


1


1


1


1




1



-
1



0


0


0


0




1


1



-
2



0


0


0




0


0


0


1



-
1



0




0


0


0


1


1



-
2





1


1


1


1



-
1




-
1




)

.





[

Eqn
.

 

⁢
10

]







In this case there is no matching P such that M·P·MT is diagonal but there are exactly two matching P for which this matrix is monomial. Of these two, one, namely P=[4,5,6,1,2,3] has the property that M·P·MT has only one negative entry (corresponding to negating a bit in case of a bus reversal):








M
·
P
·

M
T


=


(



6


0


0


0


0


0




0


0


0


2


0


0




0


0


0


0


6


0




0


2


0


0


0


0




0


0


6


0


0


0




0


0


0


0


0



-
6




)

.





[

Eqn
.

 

⁢
11

]







Applying the procedure above leads to a matrix U and new ODVS code generating matrix M·U which is the result of permuting columns 4 and 6 of the matrix M:








M
·
U

=


(



1


1


1


1


1


1




1



-
1



0


0


0


0




1


1



-
2



0


0


0




0


0


0


0



-
1



1




0


0


0



-
2



1


1




1


1


1



-
1




-
1



1



)

.





[

Eqn
.

 

⁢
12

]







As illustrated in FIG. 3, the ODVS code generated by M·U, allows a receiving device (such as previously shown as 230 in the system diagram of FIG. 2) to tolerate bus reversal. Without bus reversal, communications channel 320 delivers transmitted signals w0in, . . . , w5in directly and without permutation to w0out, . . . , w5out, allowing the analog decoder and processing of 235 to detect received signals rxb0int, . . . , rxb4int, which are passed directly through reversal unit 340 to received data rxb0, . . . , rxb5. When bus reversal occurs, communications channel 360 reverses the ordering of transmitted signals w0in, . . . , w5in to w0out, . . . , w5out. However, the structure of the reversal-tolerant ODVS code permits analog decoder and processing 235 to detect valid information despite the bus reversed received data. In this example, the proper received data rxb0, . . . , rxb4 is obtained if reversal unit 380 exchanges bits 1 and 3, exchanges bits 2 and 4, and negates bit 5. In at least one embodiment, negating comprises binary inversion, i.e. flipping a ‘0’ to a ‘1’, or a ‘1’ to a ‘0’. In another embodiment, negating comprises flipping the sign of a value, i.e. a ‘+1’ to a ‘−1’, or a ‘−1’ to a ‘+1’. However, embodiments should not be so limited.
In other words, if the input bits are (x1, . . . , x5), then the output of the receiver is (x3, x4, x1, x2, −x5). The codewords of this code (herein subsequently called the “Glasswing code”) are given in Table 1.



 
 
 
 
 
TABLE 1
 
 
 
 
 
±[1, ⅓, −⅓, −1, −⅓, ⅓]
±[1, ⅓, −⅓, ⅓, −1, −⅓]
 
 
±[⅓, 1, −⅓, −1, −⅓, ⅓]
±[⅓, 1, −⅓, ⅓, −1, −⅓]
 
 
±[⅓, −⅓, 1, −1, −⅓, ⅓]
±[⅓, −⅓, 1, ⅓, −1, −⅓]
 
 
±[−⅓, ⅓, 1, −1, −⅓, ⅓]
±[−⅓, ⅓, 1, ⅓, −1, −⅓]
 
 
±[1, ⅓, −⅓, −1, ⅓, −⅓]
±[1, ⅓, −⅓, ⅓, −⅓, −1]
 
 
±[⅓, 1, −⅓, −1, ⅓, −⅓]
±[⅓, 1, −⅓, ⅓, −⅓, −1]
 
 
±[⅓, −⅓, 1, −1, ⅓, −⅓]
±[⅓, −⅓, 1, ⅓, −⅓, −1]
 
 
±[−⅓, ⅓, 1, −1, ⅓, −⅓]
±[−⅓, ⅓, 1, ⅓, −⅓, −1]
 
 
 
 







One embodiment of an encoder for this code accepts 5 input bits a, b, c, d, e and produces 6 pairs of bits [x1, y1], . . . , [x6, y6]. The operational meaning of these bit pairs is that a pair [x,y] corresponds to the value −(2·(−1)x+(−1)y)/3 on the corresponding wire. The encoding is then given as follows:

[x 1 ,y 1]=[mux(NOR(a,b),NAND(a,b),e),a⊕b⊕  e]  [Eqn. 13]

[x 2 ,y 2]=[mux(NOR( a,b),NAND( a,b),e),a⊕b⊕e]  [Eqn. 14]

[x 3 ,y 3 ]=[b,  e]  [Eqn. 15]

[x 4 ,y 4 ]=[d,e]  [Eqn. 16]

[x 5 ,y 5]=[mux(NOR( c,d),NAND( c,d),c⊕d⊕  e]  [Eqn. 17]

[x 6 ,y 6]=[mux(NOR(c,d),NAND(c,d), e),c⊕d⊕e]  [Eqn. 18]

    Here, mux(x,y,e) is x if e=1 and it is y if e=0. Moreover, a is the inverse of a and ⊕ is the XOR operation.
    A second embodiment is a code for 3 wires, derived from the matrix M1 from Eqn. 3. Applying the procedure above, the matrix
        M ′  =  (    1   1   1     1   0    - 1      1    - 2    1    )      [  Eqn .     ⁢ 19  ]       
is produced, which may be seen to be reversal-amenable. If x1, x2 denote the input bits, then the output of the receiver in the presence of a bus reversal is −x1, x2.

One example of a non reversal-amenable code for 4 wires may be seen by considering the generating matrix M of Eqn. 20







M
=


(



1


1


1


1




1



-
1



0


0




1


1



-
2



0




1


1


1



-
3




)

.





[

Eqn
.

 

⁢
20

]







In this case, there is no matching P for which M·P·MT is monomial. This matrix and the corresponding OPDVS code is therefore not reversal-amenable.
A third example embodiment is an ODVS code for five wires generated by the matrix
       M =  (    1   1   1   1   1     1    - 1    0   0   0     0   0   1    - 1    0     1   1    - 1     - 1    0     1   1   1   1    - 4     )      [  Eqn .     ⁢ 21  ]       
as previously described in [Shokrollahi II]. Applying the procedure above, the matrix M′ given as

        M ′  =  (    1   1   1   1   1     1   0   0   0    - 1      0   1   0    - 1    0     1    - 1    0    - 1    1     1   1    - 4    1   1    )      [  Eqn .     ⁢ 22  ]       
has the property that the associated ODVS code is reversal-amenable. if x1, . . . , x4 denote the input bits, then the output bits of the receiver in the presence of a wire permutation corresponding to a bus reversal is −x1, −x2, x3, x4 thus requiring only two signal negations (as one example, using two XOR gates to perform the necessary negations,) to recover the original data during bus-reversed operation.

A fourth example embodiment is of an ODVS code for 6 wires generated by the matrix previously described in [Shokrollahi II]







M
=


(



1


1


1


1


1


1




1



-
1



0


0


0


0




0


0


1



-
1



0


0




0


0


0


0


1



-
1





1


1



-
1




-
1



0


0




1


1


1


1



-
2




-
2




)

.





[

Eqn
.

 

⁢
23

]







Applying the procedure above, the matrix M′ given as
        M ′  =  (    1   1   1   1   1   1     1   0   0   0   0    - 1      0   1   0   0    - 1    0     0   0   1    - 1    0   0     1    - 1    0   0    - 1    1     1   1    - 2     - 2    1   1    )      [  Eqn .     ⁢ 24  ]       
has the property that the associated ODVS code is reversal-amenable. In case of a wire permutation corresponding to a bus reversal, the first three bits need to be inverted. In other words, if x1, . . . , x5 denote the input bits, then the output of the receiver in the presence of a bus reversal is −x1, −x2, −x3, x4, x5.

A fifth example embodiment is of an ODVS code for 9 wires generated by the matrix previously described in [Shokrollahi II]:







M
=


(



1


1


1


1


1


1


1


1


1




1



-
1



0


0


0


0


0


0


0




0


0


1



-
1



0


0


0


0


0




0


0


0


0


1



-
1



0


0


0




0


0


0


0


0


0


1



-
1



0




1


1



-
1




-
1



0


0


0


0


0




0


0


0


0


1


1



-
1




-
1



0




1


1


1


1



-
1




-
1




-
1




-
1



0




1


1


1


1


1


1


1


1



-
8




)

.





[

Eqn
.

 

⁢
25

]







Applying the procedure above, the matrix M′ given as
        M ′  =  (    1   1   1   1   1   1   1   1   1     1   0   0   0   0   0   0   0    - 1      0   1   0   0   0   0   0    - 1    0     0   0   1   0   0   0    - 1    0   0     0   0   0   1   0    - 1    0   0   0     1    - 1    0   0   0   0   0    - 1    1     0   0   1    - 1    0    - 1    1   0   0     1   1    - 1     - 1    0    - 1     - 1    1   1     1   1   1   1    - 8    1   1   1   1    )      [  Eqn .     ⁢ 26  ]       
is reversal-amenable. If x1, . . . , x8 denote the input bits, then the output of the receiver in the presence of a bus reversal is −x1, −x2, −x3, −x4, x5, x6, x7, x8.

There are several interesting matching P such that M·P·MT is monomial. For example, using P=[5, 6, 7, 8, 1, 2, 3, 4, 9] yields a new matrix M′
        M ′  =  (    1   1   1   1   1   1   1   1   1     1    - 1    0   0   0   0   0   0   0     0   0   1    - 1    0   0   0   0   0     0   0   0   0   0   0   0    - 1    1     0   0   0   0   0    - 1    1   0   0     1   1    - 1     - 1    0   0   0   0   0     0   0   0   0   0    - 1     - 1    1   1     1   1   1   1   0    - 1     - 1     - 1     - 1      1   1   1   1    - 8    1   1   1   1    )      [  Eqn .     ⁢ 27  ]       
which is also reversal-amenable. In this case, the output of the receiver in the presence of a bus reversal is x3, x4, x1, x2, x6, x5, −x7, x8 so only one negation is necessary to obtain the original bits, at the cost of some additional data reordering.

The examples presented herein illustrate the use of orthogonal differential vector signaling codes for point-to-point interconnection of a transmitting device and a receiving device for descriptive simplicity. However, this should not been seen in any way as limiting the scope of any described embodiments. The methods disclosed in this application are equally applicable to other interconnection topologies, including multi-drop and star-wired interconnection of more than two devices, and other communications protocols including full-duplex as well as half-duplex and simplex communications. Similarly, wired communications are used as illustrative examples, with other embodiments also being applicable to other communication media including optical, capacitive, inductive, and wireless communications. Thus, descriptive terms such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “optical intensity”, “RF modulation”, etc. As used herein, the term “physical signal” includes any suitable behavior and/or attribute of a physical phenomenon capable of conveying information. Physical signals may be tangible and non-transitory.
Embodiments
As shown in FIG. 6, a method 600 in accordance with at least one embodiment, comprises receiving, in step 602, a set of permuted symbols on a transmission bus having a wire permutation, wherein the received set of permuted symbols correspond to an original set of symbols of a codeword permuted according to the wire permutation, the wire permutation representable by a permutation matrix P, the original set of symbols representing a set of input bits, forming, in step 604, a set of output bits from the received set of permuted symbols using a set of comparators having input weights based on respective rows of a P-amenable orthogonal matrix, wherein the P-amenable orthogonal matrix is based on an orthogonal generating matrix and the permutation matrix P, the set of output bits corresponding to the set of input bits, and outputting, in step 606, the set of output bits.
In at least one embodiment forming the set of output bits further comprises generating a set of comparator outputs, wherein the comparator outputs correspond to the output bits.
In at least one embodiment, forming the set of output bits further comprises generating a set of comparator outputs, and performing a logical reordering of the set of comparator outputs.
In at least one embodiment, forming the set of output bits further comprises generating a set of comparator outputs, and performing a binary inversion of at least one of the comparator outputs.
In at least one embodiment, the codeword is part of an Orthogonal Differential Vector Signaling (ODVS) code.
In at least one embodiment, the P-amenable orthogonal matrix is representable as:
      M ′  =  (    1   1   1     1   0    - 1      1    - 2    1    )   ,    
and for a set of input bits represented as [x1 x2], a set of comparator outputs represented as [−x1 x2], forming the set of output bits comprises a binary inversion of comparator output −x1.

In another embodiment, the P-amenable orthogonal matrix is representable as:
      M ′  =  (    1   1   1   1   1     1   0   0   0    - 1      0   1   0    - 1    0     1    - 1    0    - 1    1     1   1    - 4    1   1    )   ,    
and for a set of input bits represented as [x1 x2 x3 x4] a set of comparator outputs represented as [−x1−x2 x3 x4], forming the set of output bits comprises a binary inversion of comparator outputs −x1 and −x2.

In another embodiment, the P-amenable orthogonal matrix is representable as:
      M ′  =  (    1   1   1   1   1   1     1   0   0   0   0    - 1      0   1   0   0    - 1    0     0   0   1    - 1    0   0     1    - 1    0   0    - 1    1     1   1    - 2     - 2    1   1    )   ,    
and for a set of input bits represented as [x1 x2 x3 x4 x5], a set of comparator outputs represented as [−x1−x2−x3 x4 x5], forming the set of output bits comprises a binary inversion of comparator outputs −x1, −x2, and −x3.

In at least one embodiment, the permutation matrix P is represented as:
     P =  (    0   0   …   0   1     0   0   …   1   0     ⋮   ⋮   ⋱   ⋮   ⋮     0   1   …   0   0     1   0   …   0   0    )   ,    
corresponding to a full transmission bus reversal.

In at least one embodiment, the permutation matrix P is represented as:
     P =  (    1   0   …   0   0     0   1   …   0   0     ⋮   ⋮   ⋱   ⋮   ⋮     0   0   …   1   0     0   0   …   0   1    )   ,    
corresponding to no transmission bus permutation.

In accordance with at least one embodiment, an apparatus comprises a transmission bus configured to receive a set of permuted symbols, wherein the permuted symbols represent a wire permutation of a set of original symbols based on a permutation matrix P, the wire permutation matrix P associated with the transmission bus, and wherein the set of original symbols represents a set of input bits, and a decoder configured to generate a set of output bits based on the set of permuted symbols using a set of comparators having input weights based on a P-amenable orthogonal matrix, the P-amenable orthogonal matrix based on a an orthogonal generating matrix and the permutation matrix P, wherein the set of output bits corresponds to the set of input bits.
In accordance with that least one embodiment, the plurality of comparators are configured to generate a set of comparator outputs, and wherein the set of output bits corresponds to the set of comparator outputs.
In accordance with that least one embodiment, the plurality of comparators are configured to generate a set of comparator outputs, and generating the set of output bits comprises a logical reordering of the comparator outputs.
In accordance with that least one embodiment, the plurality of comparators are configured to generate a set of comparator outputs, and generating the set of output bits comprises a binary inversion of at least one of the comparator outputs.
In accordance with that least one embodiment, the permutation matrix P is represented as:




P
=


(



1


0


…


0


0




0


1


…


0


0




⋮


⋮


⋱


⋮


⋮




0


0


…


1


0




0


0


…


0


1



)

.





In accordance with that least one embodiment, the permutation matrix P corresponds to a full reversal matrix R, the full reversal matrix R represented as:




R
=

(



0


0


…


0


1




0


0


…


1


0




⋮


⋮


⋱


⋮


⋮




0


1


…


0


0




1


0


…


0


0



)





In accordance with that least one embodiment, the orthogonal generating matrix is represented by M:
     M =  (    1   1   1   1   1     1    - 1    0   0   0     0   0   1    - 1    0     1   1    - 1     - 1    0     1   1   1   1    - 4     )   ,    
the P-amenable orthogonal matrix is represented by M′:

      M ′  =  (    1   1   1   1   1     1   0   0   0    - 1      0   1   0    - 1    0     1    - 1    0    - 1    1     1   1    - 4    1   1    )   ,    
and for a set of input bits represented as [x1 x2 x3 x4] and a set of comparator outputs represented as [−x1—x2 x3 x4], forming the set of output bits comprises inverting comparator outputs −x1 and −x2.

In accordance with that least one embodiment, the orthogonal generating matrix is represented by M:
     M =  (    1   1   1   1   1   1     1    - 1    0   0   0   0     0   0   1    - 1    0   0     0   0   0   0   1    - 1      1   1    - 1     - 1    0   0     1   1   1   1    - 2     - 2     )   ,    
the P-amenable orthogonal matrix is represented by M′:

      M ′  =  (    1   1   1   1   1   1     1   0   0   0   0    - 1      0   1   0   0    - 1    0     0   0   1    - 1    0   0     1    - 1    0   0    - 1    1     1   1    - 2     - 2    1   1    )   ,    
and for a set of input bits represented as [x1 x2 x3 x4 x5] and a set of comparator outputs represented as [−x1−x2−x3 x4 x5], forming the set of output bits comprises inverting comparator outputs −x1, −x2, and −x3.

In accordance with that least one embodiment, an apparatus comprises an encoder configured to receive a set of input bits and responsively generate a set of symbols of a codeword based on the set of input bits and a P-amenable orthogonal matrix, the P-amenable orthogonal matrix based on orthogonal generating matrix and a permutation matrix P, and a transmission bus configured to form a set of permuted symbols, wherein the permuted symbols represent a wire permutation of the set of symbols of the codeword, the wire permutation based on the permutation matrix P, the permutation matrix P associated with the transmission bus, and to transmit the set of permuted symbols.
In accordance with at least one embodiment, the P-amenable orthogonal matrix represents a permutation of columns of the orthogonal generating matrix.

We claim:
 
1. A method comprising:
receiving a set of input bits and responsively generating a set of symbols of a codeword based on the set of input bits and a P-amenable orthogonal matrix, the P-amenable orthogonal matrix based on orthogonal generating matrix and a permutation matrix P; and,
forming a set of permuted symbols using a multi-wire transmission bus, wherein the set of permuted symbols represents a wire permutation of the set of symbols of the codeword, the wire permutation based on the permutation matrix P, the permutation matrix P associated with the multi-wire transmission bus; and
transmitting the set of permuted symbols on the multi-wire transmission bus.


  
2. The method of claim 1, wherein the P-amenable orthogonal matrix represents a permutation of columns of the orthogonal generating matrix.

  
3. The method of claim 1, wherein the orthogonal generating matrix is represented by M:





M
=

(



1


1


1




1



-
1



0




1


1



-
2




)


,




and the P-amenable orthogonal matrix is represented by M′:





M
′

=


(



1


1


1




1


0



-
1





1



-
2



1



)

.






  
4. The method of claim 1, wherein the orthogonal generating matrix is represented by M:





M
=

(



1


1


1


1


1




1



-
1



0


0


0




0


0


1



-
1



0




1


1



-
1




-
1



0




1


1


1


1



-
4




)


,




and the P-amenable orthogonal matrix is represented by M′:





M
′

=


(



1


1


1


1


1




1


0


0


0



-
1





0


1


0



-
1



0




1



-
1



0



-
1



1




1


1



-
4



1


1



)

.






  
5. The method of claim 1, wherein the orthogonal generating matrix is represented by M:





M
=

(



1


1


1


1


1


1




1



-
1



0


0


0


0




0


0


1



-
1



0


0




0


0


0


0


1



-
1





1


1



-
1




-
1



0



0
,





1


1


1


1



-
2




-
2




)


,




and the P-amenable orthogonal matrix is represented by M′:





M
′

=


(



1


1


1


1


1


1




1


0


0


0


0



-
1





0


1


0


0



-
1



0




0


0


1



-
1



0


0




1



-
1



0


0



-
1



1




1


1



-
2




-
2



1


1



)

.






  
6. The method of claim 1, wherein the permutation matrix P is a monomial matrix having a single ‘1’ value in each column and in each row and ‘0’ values elsewhere, each respective column associated with a respective symbol of the permuted set of symbols, wherein each respective column selects a respective symbol of an original set of symbols as the respective symbol of the permuted set of symbols, the selection based on a location of the ‘1’ value in the respective column.

  
7. The method of claim 1, wherein the permutation matrix P is represented as:





P
=

(



0


0


…


0


1




0


0


…


1


0




⋮


⋮


⋱


⋮


⋮




0


1


…


0


0




1


0


…


0


0



)


,




corresponding to a full transmission bus reversal.

  
8. The method of claim 1, wherein generating the codeword comprises weighting elements of each row of the P-amenable orthogonal matrix with a respective input, and forming an element-wise summation of the weighted rows of the P-amenable orthogonal matrix.

  
9. The method of claim 1, wherein each input bit has a value representing an antipodal weight, wherein each input has a value selected from a set of two values having equal magnitude and opposite sign.

  
10. The method of claim 1, wherein 5 input bits are encoded into 6 symbols of the codeword.

  
11. The method of claim 10, wherein the codeword has symbol values selected from a set [±1, ±⅓].

  
12. The method of claim 1, wherein the orthogonal generating matrix is a Hadamard matrix H.

  
13. The method of claim 12, wherein the Hadamard matrix H is represented as:




H
=


(



1


1


1


1




1



-
1



1



-
1





1


1



-
1




-
1





1



-
1




-
1



1



)

.






  
14. The method of claim 1, wherein the P-Amenable orthogonal matrix is obtained by permuting columns of the orthogonal generating matrix.

  
15. The method of claim 1, wherein the codeword is part of an orthogonal differential vector signaling (ODVS) code.

  
16. The method of claim 1, further comprising:
receiving the set of permuted symbols via the multi-wire transmission bus; and
forming a set of output bits from the received set of permuted symbols using a set of comparators having input weights based on respective rows of the P-amenable orthogonal matrix, wherein the P-amenable orthogonal matrix is based on the orthogonal generating matrix and the permutation matrix P, the set of output bits corresponding to the set of input bits; and,
outputting the set of output bits.


  
17. The method of claim 16, wherein forming the set of output bits comprises performing Boolean logic on outputs from the set of comparators.

  
18. The method of claim 17, wherein the Boolean logic comprises a logical reordering of the comparator outputs.

  
19. The method of claim 17, wherein the Boolean logic comprises a binary inversion of at least one of the comparator outputs.

  
20. The method of claim 16, wherein each comparator has a set of input weights selected from a respective row of a scaled version of the P-amendable orthogonal matrix, wherein a sum of positive entries in the respective row of the scaled version of the P-amendable orthogonal matrix is equal to one.