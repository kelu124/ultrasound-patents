Source: [US6721235B2](https://patents.google.com/patent/US6721235B2)

# [US6721235B2](US6721235B2.md) - Steerable beamforming system

## Details

* Date: 1997-02-03
* Inventor: TeraTech Corp
* Beneficiary: Alice M. Chiang, Steven R. Broadstone

## Other patents

### Backwards
 * US3928839A
 * US4034483A
 * US4152678A
 * [US4159462](US4159462.md)A
 * US4227417A
 * US4233678A
 * [US4241608](US4241608.md)A
 * US4244037A
 * US4245333A
 * US4253168A
 * [US4254662A](US4254662A.md)
 * US4267584A
 * US4274148A
 * US4277787A
 * US4307613A
 * US4313184A
 * US4336607A
 * US4401957A
 * GB2130798A
 * US4464726A
 * US4544927A
 * US4616231A
 * US4947176A
 * US4992999A
 * US5014250A
 * US5029144A
 * US5030953A
 * US5031625A
 * US5089983A
 * US5126962A
 * US5200931A
 * US5200755A
 * US5228007A
 * US5235558A
 * US5276452A
 * EP0371133B1
 * EP0593822A1
 * US5309409A
 * US5343211A
 * US5386830A
 * US5517537A
 * US5530680A
 * US5535150A
 * US5533383A
 * US5546807A
 * US5555534A
 * [US5590658A](US5590658A.md)
 * US5623930A
 * US5685308A
 * WO1998034294A2
 * US5825898A
 * US5894450A
 * US5904652A
 * US6084827A
 * [US6292433B1](US6292433B1.md)
### Forward
 * US20050113699A1
 * US20050113694A1
 * US20050179587A1
 * US20070271063A1
 * WO2008002464A2
 * US20090326375A1
 * US20100010351A1
 * US20100174194A1
 * CN102121987A
 * US20130261463A1
 * US8900149B2
 * CN104871480A
## Abstract

Abstract

The present invention relates to a multiple beamforming processor formed with an integrated circuit in which a plurality of beams can be formed simultaneously.



The present invention relates to a multiple beamforming processor formed with an integrated circuit in which a plurality of beams can be formed simultaneously.

RELATED APPLICATIONS
This application claims the benefit of U.S. Application No. 60/199,529 filed Apr. 25, 2000 and is a Continuation-in-Part Application of U.S. application Ser. No. 09/828,266 filed Apr. 6, 2001 which claims the benefit of U.S. Application No. 60/195,587 filed Apr. 6, 2000 and claims priority to U.S. application Ser. No. 09/364,699 filed on Jul. 30, 1999, now U.S. Pat. No. 6,292,433, which is a Continuation of PCT/US98/02291 filed on Feb. 3, 1998, and a Continuation-in-Part of U.S. application Ser. No. 08/965,663 filed on Nov. 6, 1997, now U.S. Pat. No. 6,111,816, which claims the benefit of U.S. Application No. 60/036,837 filed on Feb. 3, 1997, the contents of the above applications being incorporated herein by reference in their entirety.
BACKGROUND OF THE INVENTION
In numerous application there is a need to perform beamforming operations to acquire spatial information regarding a particular region of interest. Various systems have been developed to perform such beamforming operations which frequently depend upon the particular applications.
One application involves beamsteering and/or beamforming in medical ultrasound systems used to image internal organs. For undersea acoustic mine-field reconnaissance and mine hunting applications, high-resolution imaging sonars are needed for clutter rejection, obstacle avoidance, and identification of possible mines. needed for use in a diver's hands, in a remote imaging sonar on an unmanned undersea vehicle, or with a small surface-craft sonar.
SUMMARY OF THE INVENTION
The present invention relates to a high-resolution, three-dimensional imaging system based on a large-area electronically steerable two-dimensional array. The large aperture provides a beamwidth less than 0.3°. Beamforming, or beamsteering, can be performed using time-domain delay-and-sum operations. A delay-and-sum beamformer allows a 2D array to “look” for signals propagating in a particular direction. By adjusting the delays associated with each element of the array, the array's directivity can be electronically steered toward the source of radiation. By systematically varying the beamformer's delays and its shading along a 2D imaging plane, a 2D scan response of the array can be measured and resulting 2D images representing the 3D radiation sources can be created. The proposed system can provide continuous real-time 128-by-128-pixel scanned images throughout a 14° field of view. The proposed delay-and sum beamforming approach allows target range information to be obtained from the time-of-flight calculations. When a target area is identified by the proposed electronically steerable sonar system, the beamforming electronics can be adjusted to zoom-in to a smaller field-of-view for high-resolution imagery.
Components of the system include a large-area, low-insertion loss and high-bandwidth sparse array, a 32-channel beamforming processor, a bank of low-noise amplifiers, and CDP FIR filters for baseband signal conversion. The beamforming electronics and FIR filters use low-power, high-throughput charge-domain-processing (CDP) technology. At a 40 MHZ clock rate, the beamformer can provide a continuous computation throughput of 10.2 billion operations per second and a delay update rate of 28 billion bits/s and dissipate approximately 1 W of electric power. A technology comparison (shown in Table 1) of the present low-power, 2D beamformer, a commonly-used microprocessor and a digital signal processor (DSP) the Texas Instruments' TMS320C6201 processor, demonstrates the more than an order-of magnitude power savings offered by a preferred embodiment of the invention.
In a preferred embodiment of the invention uses a shading procedure to increase the ratio of the main lobe relative to the side lobes to provide a difference of at least 20 dB, and preferably of at least 25 dB to provide the desired image quality. The small size of the array, such as a 10 cm×10 cm system, or alternatively a 20 cm×20 cm system, can provide a low power, high resolution system suitable for use by divers or small vessels, for example.
For a preferred embodiment of the invention having a system where multiple beams have to be processed in parallel to achieve a higher frame rate system, the resulting electronics can rapidly become both bulky and costly as the number of beams increases. The present invention relates to a single-chip multiple beamforming processor based on a time-multiplexed delay generation architecture. The integrated circuit combines programmable delays with a sequentially addressable digital delay selection which results in a compact, low-power multiple beamforming processor.
In general, this parallel beamforming can be performed on digital or analog signals. Applications of this system include medical ultrasound imaging, sonar and radar. With the reduction in size, weight and power, these systems can be included in portable low power battery operated systems.
BRIEF DESCRIPTION OF THE DRAWINGS
FIG. 1 shows pseudorandom array-element placement based on the minimization of the weighted side lobe energy.
FIG. 2 shows a 2-D array response along a slice through the y axis (elevation) of the sparsely sampled 225×225 element 2D sonar array. The array response assumes a 600 kHz incident waveform steered directly ahead of the array and plotted over a steering angle of 14 degrees.
FIG. 3 illustrates a 32-channel CDP beamformer having the capability to dynamically focus and steer the energy detected by the two-dimensional sonar array.
FIG. 4 is a schematic illustration of the 2D array tiles that comprise the ECCAL sonar array. Each tile comprises a pattern of pseudorandomly selected elements. The differential delays computed within a tile are approximated to be in the far-field. The outputs from each of the tiles are combined using global, near-field delays.
FIG. 5 is a block diagram representing the four registers within a forward-difference computing engine. Each register contains an integer corresponding to the appropriate difference of a previously computed finite-degree, multidimensional polynomial. As depicted, this engine realizes new time-of-flight delays in the time of a single addition for a cross-sectional scan.
FIG. 6 illustrates a processing sequence in accordance with a preferred embodiment of the invention.
FIG. 7 illustrates a portable sonar or ultrasound system in accordance with the inventions.
FIG. 8 is a schematic view of a time multiplexed multiple beamforming processor in accordance with the invention.
FIGS. 9A and 9B illustrate imaging patterns for multiple beamforming systems.
FIG. 10 is a schematic illustration of a two dimensional array used to scan multiple beams at different depths.
FIGS. 11A-11C illustrate embodiments of a portable sonar system in accordance with the invention.
The foregoing and other objects, features and advantages of the invention will be apparent from the following more particular description of preferred embodiments of the invention, as illustrated in the accompanying drawings in which like reference characters refer to the same parts throughout the different views. The drawings are not necessarily to scale, emphasis instead being placed upon illustrating the principles of the invention.
DETAILED DESCRIPTION OF THE INVENTION
The present CDP beamformer processing system is a time domain processor that simultaneously processes the returns of a large, sparsely packed two dimensional array. This can be used in a sonar system, for example, that utilizes a single-ping transmit. The lower power, highly integrated CDP beamformer provides real time processing of the entire array, and thus, enables a low cost unit suitable for use in autonomous underwater vehicle (AUV) platforms. Imaging a full 3D volume with a single-ping excitation dictates the use of a large diameter sparsely sampled array. A smaller diameter, more completely filled array does not have the required resolution. The electronics for a large, filled array does not fit within the AUV. In addition, a mechanically scanned imaging system can not have the frame rate capability to create a complete 3D volumetric image with one transmit burst.
Beamformer devices used in conjunction with the present invention, including the use of such systems in medical ultrasound applications are described in U.S. application Ser. No. 09/364,699 filed on Jul. 30, 1999, in International Application No. PCT/US98/02291 filed on Feb. 3, 1998 and in U.S. application Ser. No. 08/965,663 filed on Nov. 6, 1997, the entire contents of the above applications being incorporated herein by reference.
To make a sparse array practical, the combination of low insertion loss and wide bandwidth performance is important for realizing acceptable imaging performance with low illumination levels. Quarter-wave matching layers with low acoustic impedance, but physically solid backing results in a robust array that loses only 3-4 dB in the conversion of received signal energy to electrical energy. Array bandwidths of 75% or more are typical of this design and construction process. Also, the transducer array employs element positioning and an interconnect system suitable for the beamformer circuitry. The electronics are mounted on printed-circuit boards that are attached to the transducer elements via flexible cables. In practice, a majority of the array elements are connected to outputs using the flexible cables. However, only a small fraction of the total number of elements are wired to the circuit boards. Nevertheless, the large number of array element connections are sufficient to insure a unique pattern of active-element locations in the final array.
The array described addresses AUV and diver-mounted imaging applications using a two-dimensional array with a diameter of 20 cm and a frequency of 2 MHZ. The minimum range requirement of three meters, and the need for resolution on the order of less than one centimeter, dictates as large of an aperture as possible that can be housed within a compact package. To interrogate a fourteen-degree scanning volume and also minimize the impact of grating lobes, an element pitch or separation of less than 0.78 mm is desirable. Thus, a fully populated array has at least 256 elements on a side. Given existing technology, however, the processing of the number of channels is impractical. Thus, a pseudo random array design is used to achieve this resolution within the limited number of processing channels that can be provided.
The single-ping transmitter can be a single-element spherical section that has the same beam width as that of the individual elements. The transmitter can be mounted either in the center of the array or on one of the sides of the array. If the CDP beamformer has sufficient flexibility in the receive dynamic focusing control, a side mounted transmitter has packaging advantages.
As an example, assuming a 20 cm diameter array with 225 active elements and approximately 1.04 λ element-pitch, the resulting filling factor is 0.34%. The output signal to noise ratio of the array is proportional to the number of active-elements, so this filling factor corresponds to a loss in sensitivity of −23 dB when compared to a filled array of the same dimensions. To compensate for this loss, a transmitted signal of modest bandwidth (approximately 670 kHz) is chosen to increase array sensitivity. In the approach presented here, the sensitivity is increased on the order of 10 dB.



 
 
TABLE 1
 
 
 
Technology Comparison for the 2D Beamformer
 
 
 
 
 
 
 
Intel
Texas Instruments
TeraTech
 
 
Digital CMOS
Digital CMOS
CCD/CMOS
 
 
 
 
 
 
 
 
 
Technology
0.25 mm
0.18 mm
0.6 mm
 
 
5 Metal
5 Metal
2 Metal
 
Architecture
Pentium Pro
TMS320C6201
Dedicated
 
Signal Resolution
64 Bits
Floating Point
Processor
 
Reference Weights
64 Bits
Floating Point
Sampled
 
 
 
 
Analog
 
 
 
 
8 bits
 
Maximum Throughput
0.4
1.86
10.2
 
Rates
 
(Billion Operations/
 
second)
 
Number of chips
24
2
1
 
(32 Channels)
 
Power Dissipation
600 W
12 W
1 W
 
 
 











The positioning the elements of the array follows the approach in which care must be taken to eliminate any periodicity that would produce grating lobes that compete with the main lobe. Pseudorandom or random arrays can be used (FIG. 1). The geometry of element placement has been developed to maximize the efficiency of the CDP beamformers while minimizing grating and side lobe clutter.
The primary goal of the optimization method is to minimize the average side lobe energy. Specifically, this is done by interactively evaluating the optimization criterion:        J =   1  2   u mnx 2      ∫   ∫ S     W   (   u x  ,  u y   )     B   (   u x  ,  u y   )       u x       u y        ,     ( 1 )            
where the weighting function, W(ux, uy), applies more weight to regions in the array response that require side lobe reduction. The optimization method begins with no weighting (i.e., W(ux, uy)=1) and proceeds by choosing successively better weighting functions that satisfy the optimization criterion. Since the side lobes that require the greatest reduction are related to the previously computed beampattern, B(ux, uy), the weighting is chosen such that W(ux, uy)=B(ux, uy). This is done in an interactive manner until convergence.
Basically, a random array is capable of producing an imaging point spread function that has a main lobe to average side lobe ratio of N, where N is the total number of active elements in the array. For the 225-element sparse array example, the resulting ratio is −23 dB. Using a wide bandwidth approach improves this ratio by 10 dB. Based on the preceding optimization criterion, a pseudorandom placement of the array elements was generated (FIG. 1).
FIG. 2 is a plot of the array performance, sensitivity versus cross range, for a 225-element sparsely-sampled array at 2 MHZ. The peak to maximum side lobe level is approximately 30 dB. To improve this performance, the system is configured to achieve the maximum main lobe to clutter level ratio possible, has been independently verified.
The objective of the beamforming system is to focus signals received from an image point onto a transducer array. By inserting proper delays in a beamformer to wavefronts that are propagating in a particular direction, signals arriving from the direction of interest are added coherently, while those from other directions do not add coherently or cancel. For a multi-beam system, separate electronic circuitry is necessary for each beam. Using conventional implementations, the resulting electronics rapidly become both bulky and costly as the number of beams increases. Traditionally, the cost, size, complexity and power requirements of a high-resolution beamformer have been avoided by “work-around” system approaches. These systems form a minimum number of beams even though many more independent beams are possible with the number of transducer elements typically used in the sonar array. For example, a small underwater-vehicle configuration preferably has a center beam together with four adjacent beams aimed left, right, above and below the center. The beams are each formed from fifty or more elements in an array each phased appropriately for the coherent summation in the five directions of interest. The advantage of using so many elements is a narrower beamwidth when compared with a smaller array. However, knowledge of the outside world is still based on a five pixel image. For real-time 3D high-resolution sonar imaging applications, an electronically steerable two-dimensional beamforming processor based on a delay-and-sum computing algorithm is chosen.
A delay-and-sum beamformer allows a 2D array to “look” for signals propagating in particular directions. By adjusting the delays associated with each element of the array, the array's look direction can be electronically steered toward the source of radiation. By systematically varying the beamformer's delays and its shading or apodization along a 2D imaging plane, a 2D scan response of the array can be measured, and the resulting 2D images representing the 2D radiation sources can be created. To realize such a delay-and-sum beamformer, a programmable delay line is needed at each receiver. However, as the array is scanning through the imaging plane, there are two difficult implementation issues: first, each delay line has to be long enough to compensate for the path differences of a large area array, and second, the delay value has to be adjusted periodically for proper beamsteering. Preferably, the time-of-flight from the radiation source to the focal point can be calculated at every clock cycle.
For example, for a 3 m range requirement with a cross-range resolution of less than one centimeter dictates an array aperture in the range of 20 cm. To probe a fourteen-degree scanning volume, a maximum differential delay of 1.7 cm is needed; in turn, that corresponds to a maximum temporal delay of 11.5 μs. At a 40 MHZ clock rate, this implies that a 500-stage delay line and a 9-bit control word are needed at each receiver to achieve the time-of-flight delay requirements. The long delay and large number of digital I/Os set an upper limit on how many processors can be integrated on one chip. For the 32-channel beamforming electronics 10 depicted in FIG. 3, a straightforward implementation requires 32 500-stage delay lines 12 and 352 digital I/O pads. Such a large-area chip and large number of I/O connections would make the implementation impractical. An electronically-controlled conformal lens structure is used to circumvent the impracticably long delay line requirement. A delay-update computation method, based on the determination of time-of-flight surface coordinates, is used to reduce the digital I/O requirement.
The concept of an electronically-controlled conformal acoustic lens (ECCAL) is to divide the surface of a 2D transducer array into planar “tiles” of relatively small subarrays. As depicted in FIG. 4, the tiles/subarrays 22, 24 are made small enough so that when an object is placed within the field-of-view of the imaging system, the incident radiation from the object toward each “tile” can be treated using a far-field approximation. Additional delay elements are incorporated within each subarray to allow all subarrays to be coherently summed (i.e., global near-field beamforming can be achieved by simply delaying and then summing the outputs from all subarrays). The delay-and-sum beamformer allows each subarray to simultaneously “look” for signals radiating from a particular direction. By adjusting the delays associated with each element of the array, the array's look direction can be electronically steered toward the possible source of radiation along a scan pattern 20. The delay line requirement for each element in the subarray can be as short one hundred or as several hundred stages. Only a single long delay for global summing is needed on each subarray processor.
While the ECCAL system is new to sonar applications. the deformable-mirror concept has been investigated and successfully implemented in optical systems for more than two decades. For example, it has been demonstrated a real-time, deformable mirror used to compensate for atmospherically induced wavefront distortions, including the first real-time demonstration of thermal-blooming compensation of a high-energy laser.
In sonar imaging applications, focus-and steer images require knowledge of the time of flight from each source to each receiver in an array. The computation of a new point on any time-of-flight surface requires finding the square root of the sum of squares, which is a computationally intensive task. A delay-update computation method is presented here which reduces the determination of the rectangular coordinates of a new point on any time-of-flight surface to the computation time of a single addition. To do this, the time-of-flight surface is represented by a two-dimensional polynomial containing positive integer powers of azimuth, elevation, and range. This polynomial in rectangular-coordinate representation allows a simple forward-difference computation for a new point on the time-of-flight surface. As a result, each update point can be computed in a single-addition time as a convenient raster scan display format.
The method of moments can be used to synthesize basis functions which represent an arbitrary multidimensional function. Although the exact time of flight requires the determination of infinitely many coefficients, a finite-degree basis function can be generated using a least-mean-square (LMS) approximation. The specific form of the finite-degree basis depends on functional separability and limits of the region of support. Using the forward-difference representation of the truncated moments basis, a new functional value can be computed at every clock cycle. If computation is performed within a square or cubic region of support, the direction of the finite difference corresponds to the direction that the function is to be computed/synthesized. For example, functional synthesis from the upper-right to lower-left corners within the region of support implies the computation of multidimensional, backward difference. Conversely the multidimensional forward-difference representation allows functional synthesis to proceed from the lower-left to the upper-right corners within the region of support.
The complete moments basis representation of a surface can be degree-limited for synthesis. One truncation method is to approximate the time of flight as f(x, y, z), a trivariate polynomial. This approximation can be written as          g ^    (  x , y , z  )   =   1  C n      ∑  u = 0  U          ∑  v = 0  V     ∑  w = 0  W      a ^   u , v , w     x u    y v    z w        ,     ( 2 )            
where âu,v,w can be derived based on the LMS criterion,          ∂       ∂   a ^   u , v , w        ∫  Z 1   Z 2      ∫  Y 1   Y 2      ∫  X 1   X 2       [   f   (  x , y , z  )   -   g ^    (  x , y , z  )    ]  2     x     y     z       = 0.     ( 3 )            
Here, c0 equals the propagation velocity of sound in a nearly-homogeneous medium. Once, the coefficients âu,v,w of the trivariate polynomial ĝ(x, y, z) possesses positive-integer powers of x, y, and z, it can be formulated as a stable, forward-difference equation. In general, (I+1)(V+1)(W+1) forward-difference terms are sufficient to describe a polynomial whose highest degree in x is U, y is V and z is W The terms completely specify f(x, y, z) within its region of support.
The exact time of flight in the medium is f(x, y, z)=r/co. Although a necessary scaling factor to convert between spatial to temporal dimensions, Co will not be explicitly state in the following analysis. For this case, it is more efficient to transform the analyses to spherical coordinates. Setting x=r cos(θ) cos(φ) (cross range), y=r sin (φ) (elevation) and z=r sin (θ) cos(φ) (range); then, deriving the associated operators using the Jacobian yields          ∂       ∂   a ^   u , v , w        ∫  φ 1   φ 2      ∫  θ 1   θ 2      ∫  r 1   r 2       [  r -   g ^    (  r , θ , φ  )    ]  2    r 2    cos   ( φ )      r     θ     φ       = 0.     ( 4 )            
The polynomial coefficients, âu,v,w are found by solving a set of linear equations in cross range and elevation for cross-sectional displays (or C-scans); or, in range and cross range for range scans. For volumetric or 3D imaging, the coefficients can be derived in each of the cross range, elevation and range dimensions. These equations may be more conveniently written in matrix notation as


Bâ=m  (5) 


where â represents the polynomial coefficient vector. The matrix B contains elements comprised of integral sums of the form        b  i , j , k   =   ∫  φ 1   φ 2      ∫  θ 1   θ 2      ∫  r 1   r 2      r  u + v + w      cos u    ( θ )      sin v    ( θ )      cos  u + v     ( φ )      sin w    ( φ )      ∂       ∂   a ^   u , v , w        g ^    (  r , θ , φ  )     r 2    cos   ( φ )      r     θ      φ  .          ( 6 )            
The variables u, v, and w respectively range from 0 to U, V, and W the highest dimensions of the finite-degree polynomial in dimensions x, y, and z. The vector m contains the moments of the time of flight within the region of support        m i  =   ∫  φ 1   φ 2      ∫  θ 1   θ 2      ∫  r 1   r 2     r    ∂       ∂   a ^   u , v , w        g ^    (  r , θ , φ  )     r 2    cos   ( φ )           ( 7 )            
Evaluating the partial inside the preceding integrals yields          ∂       ∂   a ^   u , v , w        g ^    (  r , θ , φ  )    =   r  u + v + w      cos u    ( φ )      sin v    ( θ )      cos  u + v     ( φ )       sin w    ( φ )   .       ( 8 )            
The preceding integrals are evaluated in parts as functions or r, θ, and φ. The integral dependent on the radial distance, r, is readily evaluated having only that variable raised to an integer power. The angle A (here either θ or φ) dependent integrals contain sine, cosine and sine-cosine cross products raised to an arbitrary integer power. Iterative solutions exist using the integrals           ∫  A 1    A 2      sin m   c       A        cos n   c       A    A    =     sin  m - 1    c       A        cos  n + 1    c       A   c   (  m + n  )    +    m - 1   m - n       ∫  A 1    A 2      sin  m - 2    c       A        cos n   c       A    A         
   and     ( 9 )          ∫  A 1    A 2      sin m   c       A        cos n   c       A    A    =     sin  m + 1    c       A        cos  n - 1    c       A   c   (  m + n  )    +    n - 1   m + n       ∫  A 1    A 2      sin m   c       A        cos  n - 2    c       A    A          ( 10 )            
The coefficient vector, â, is obtained by inverting matrix B then multiplying with moments vector m. The matrix inversion is accomplished using Cholesky decomposition or the more numerically robust Housebolder transform.
For this application, the volume of interest is to be scanned in a series of cross-sectional planes (or C-scans) separated by approximately 1 cm in depth. Each cross-sectional scan is performed in a raster fashion (i.e., uniformly sampled in three-dimensional Cartesian coordinates) and has been scaled so that the sampling-interval step size is 1. As an example, the first and second forward differences in one dimension x, are          Δ1 x 2    g ^   =    g ^    (    x 0  + 1  ,  y 0  ,  z 0   )   -   g ^    (   x 0  ,  y 0  ,  z 0   )     ,  
      Δ1 x 2    g ^   =    g ^    (    x 0  - 2  ,  y 0  ,  z 0   )   -  2    g ^    (    x 0  + 1  ,  y 0  ,  z 0   )    +    g ^    (   x 0  ,  y 0  ,  z 0   )   .        ( 11 )            
This difference expansion about (x0, y0, z0) in the positive x dimension continues until the degree of the finite-difference is identical to the degree of the finite-degree polynomial ĝ(x, y, z).
The coefficients associated with each of the terms in the summations comprising the preceding difference expansions form Pascal's triangle differing by a sign in every other term. This relationship is more generally written         ∑  u = 0  L    [    u     L    ]   =   ∑  u = 0  L      (  - 1  )   L - u       u !    L !     (  L - u  )  !    .        ( 12 )            
Using this equation, the Lth forward difference of the preceding arbitrary-degree polynomial can be more succinctly written:        Δ        1 k l     g ^    (   x 0    y 0    z 0   )    =   ∑  u = 0  L       (  - 1  )   L - u     [    u     L    ]       g ^    (    x 0  +  u 0   ,   y o    z 0    )   .        ( 13 )            
It follows that the three-dimensional difference expansions about (x0, y0, z0) can be obtained by evaluating the cross product of terms in ĝ(x, y, z),         Δ1 k L    Δ1 y M   Δ        1 z N    g ^   =   ∑  u = 0  L     ∑  v = 0  M     ∑  w = 0  N         (  - 1  )   L + M + N - u - v - w     [    u     L    ]     [    v     M    ]     [    w     N    ]       g ^    (    x 0  + u  ,   y 0  + v  ,   z 0  + w   )   .          ( 14 )            
A CMOS computing structure implementing the preceding equation can use only adders, multiplexers and registers to perform functional synthesis using the forward-difference representation of the multidimensional, finite-degree polynomial. As can be inferred, this implementation allows the synthesis of arbitrary functions using repeated additions with no multiplication. An example of this computing structure is presented in FIG. 5 for a two-dimensional, first-degree, forward-difference realization. As shown in FIG. 5, each register, represented by a rectangular box, contains the appropriate forward-difference term. Switches, which are located between registers, determine whether the cross range or elevation direction is synthesized. The advantage of this structure is that it allows additions to occur simultaneously at each of the adders.
The process sequence is shown generally in FIG. 6 where the transducer output signals 60 are transmitted to gain control 62, bandpass filter 64, sampling 66, programmable delay circuit 68, weighting 72, summing 74, demodulation 76, filter 78, squaring 80, averaging 82 and then for display 84. Note that a preferred embodiment includes components fabricated on a single integrated circuit 70.
Thus, only one addition time is required to produce the next function value. For a multi-channel processor, each channel contains its own functional update circuitry. As the beam is steered through a given imaging plane, the delay requirements for each channel are computed in parallel and can be updated within one clock period. For the 32-channel beamforming processors running at a 40 MHZ sampling rate, a continuous delay update rate of 30 billion bits/s can be achieved. Using this approach, instead of the alternative 9 bits/channel, the digital connectivity can be reduced to 1 bit/channel followed by on-chip computation circuitry to generate the equivalent 9-bit value while maintaining the 30 billion bits/s parallel update rate.
For this sonar-imaging application, the energy radiated into the water can be considered to be of modest bandwidth (approximately 670 kHz) relative to the center frequency of the emission (2 MHZ). The emission or probing frequency is chosen, in part, based on the desired imaging depth of the portable hydrophone array. The bandwidth of the signal is chosen based on the characteristics of the transducer driver, the transducer element, and the desire to improve the array response while reducing the probability of detection. When using a probing signal of modest bandwidth, reflected energy captured by the receiving array must be shifted in frequency, or down converted, to base band for subsequent processing.
The reflected energy obtained from changes in acoustic impedance within the region of interest are detected by the transducer elements and then sampled and represented as packets of charge using the CDP beamformers. To reduce hardware complexity, the beamformer output data rate is chosen to be four times the center frequency of the characteristic or center frequency of the transducer elements. In a sampled-data system, this is equivalent to multiplying each sampled datum by a complex value (in phase and quadrature) that is represented by the repeating sequence I, Q, -I, -Q, etc. For example, if the input data are sequentially sampled at times a[0], a[1], a[2], a[3], a[4], . . . a[n], then the output data are a[0], j*a[1], −a[2], j*a[3], a[4], . . . . These data are then filtered using finite-impulse response or FIR functions that pass low-frequency information while rejecting images of the desired signal created as a consequence of the frequency shift or down conversion.
To demonstrate the efficacy of FIR filters implemented using charge-domain processing (CDP), a FIR filter consisting of a 13-stage tapped delay line with CCD fixed-weight multipliers implementing the filter coefficients has been fabricated. For this embodiment, the data produced by the positive and negative valued filter taps are separate and the filter has two separate positive and negative-valued output ports. These two sampled-analog signals can either be recombined using an operational amplifier to produce a sampled-analog output voltage or be coupled to an A/D converter with a differential input to produce a digitized output that will be transferred to a portable PC-compatible-computer for subsequent analysis and display.
The portable sonar system described here offers the potential for three-dimensional scanning of nearby objects for the purposes of detection and identification in littoral waters. This enables custom, large-aperture, 2D, sparsely-sampled transducer array and integrated-circuitry that are more compact and dissipate less power than their all-digital counterparts. Using well-established technologies for array and integrated-circuit fabrication provides for the manufacture of a high-performance sonar “camera” system.
The front-end array and associated electronics, shown in FIG. 7 when integrated with available PC-computer technology, provide underwater divers and AUVs with real-time, volumetric images. The transducer 100 is connected to a preamplifier 102, whose output is directed to beamformer 104. A system controller 108 receives control signals from the PC interface 110 and memory 106 stores information from controller 106. The first interface 110 also connects the beamformer output to second interface 114 along cable 112. The PC 115 includes a processor 116 memory 118, user interface 120 and a display controller 122 that forwards images and data to display 124. In turn, manufacturability results in a cost-effective complement to existing portable, 2D sonar imagers. Portability, modest cost, and 3D images generated by the sonar camera offer a new opportunity for use in a number of underwater scenarios. Current or potential dual-use commercial applications of the sonar camera include remotely piloted or autonomous undersea vehicles in support of cable-laying, pipe-following, and salvage; surface or underwater obstacle avoidance; and reconnaissance and oceanographic research.
A delay-and-sum beamformer utilizes a transducer array to “look” for signals propagating in particular directions. By adjusting the delays associated with each element of the array, the array's look direction can be electronically steered toward the source of radiation. As shown in FIG. 8, the multiple beamforming chip 210 consists of N parallel beamforming modules 200, a summing circuit 202, timing control 206, and a Finite-Impulse-Response (FIR) filter 204. Within each module 212, there is sampling circuit 214, a programmable delay line 218, an apodization multiplier 220 and a bank of delay controls 222 which are sequentially addressable. The delay control 222 can either be a memory or a real-time “time-of-flight” (TOF), computing circuit. Additional details regarding beamforming systems used in connection with the present invention can be found in U.S. Pat. Nos. 5,964,709 and 5,904,652, and in U.S. application Ser. Nos. 09/364,699 and 09/203,877 filed on Jul. 30, 1999 and Dec. 2, 1998, respectively, the entire contents of the above patents and applications being incorporated herein by reference.
In a memory-based implementation, within each module, the delay selection for beam 1 is stored in the first memory location, the delay selection for beam 2 is stored in the second memory location, etc. The memory locations are sequentially readable. Once a set of sampled return-echoes are loaded in the N delay lines, at time t1, the delays required for forming beam 1 are applied simultaneously to all control units. The sampled return-echoes with proper delays are coherently summed to form the first beam. At time t2, the delay controls in each unit are shifted in parallel and the delay control corresponding to that for beam 2 is simultaneously applied to all units. It follows then, at time t2, the sampled return-echoes with proper delays are coherently summed to form the second beam. The procedure repeats until the kth beam is coherently formed.
In a TOF implementation, the delay control unit within each module includes a computing circuit and a buffer storage element. The delays required for forming k beams are sequentially generated by the computing circuits. First, a set of sampled return echoes are loaded in the N delay lines. At time t1, the delays required for forming beam 1 are computed within each module and applied in parallel to all delay lines. The sampled return-echoes with proper delays are coherently summed to form the first beam. At time t2, the delays required for forming beam 2 are computed within each module and applied in parallel to all delay lines. The sampled return-echoes with proper delays are coherently summed to form the second beam. The procedure repeats until the kth beam is coherently formed.
A one dimensional imaging pattern based on a multiple beamforming architecture is shown in FIGS. 9A and 9B. It can be seen that for each set of sample returns, k beams are formed. The k beams can be adjacent beams as shown in FIG. 9A, or then can be separated as shown in FIG. 9B. A two dimensional imaging pattern based on a 2D-array 230 connected to a multiple beamforming architecture is shown in FIG. 10. As can be seen in FIG. 10, k beams can be sequentially formed at a plurality of sampling depths.
For example, in a sonar application, given an imaging range from 3 m to the selected depth with a cross-range resolution of less than one degree operating at 0.8 MHZ dictates an array aperture in the range of at least 10.7 cm, preferably about 11 cm. To provide a +/−30 degree scanning volume, a maximum differential delay of 11 cm is needed; in turn, that corresponds to a maximum temporal delay of 71 s. At a 6.4 MHZ input sampling rate, this indicates that a delay line with a 156 ns delay resolution and a 9-bit control word are needed at each receiver to achieve the time-of-flight delay requirements. The long delay and large number of digital I/Os set an upper limit on how many processors can be integrated on one integrated circuit device. A straightforward implementation requires 64 delay lines and 576 digital I/O pads. Such a large-area chip and a large number of I/O connections would make the implementation impractical. A electronically-controlled lens structure is thus included to circumvent the impracticably long delay line requirement; and a delay-update computation method, based on the determination of time-of-flight surface coordinates, is included to reduce the digital I/O requirements.
In sonar/ultrasound imaging applications, focus-and-steer imaging require knowledge of the time of flight from each source to each receiver in an array. The computation of a new point within any 1D return requires finding the square root of the sum of squares, which is computationally intensive task. A delay-update computation method is included which reduces the determination of the rectangular coordinates of a new point on any time-of-flight profile to the computation time of a single addition. To do this, the time-of-flight is represented by a finite-degree polynomial containing positive integer powers of range. This polynomial approximation allows a simple forward-difference computation of the differential delay at each array element. As a result, each update point can be computed in a single-addition time to generate a sector or phased array display.
The method of moments can be used to synthesize basis functions which represent an arbitrary multidimensional function. Although the exact time of flight requires the determination of infinitely many coefficients, a finite-degree basis function can be generated using a least-mean-square (LMS) approximation. The specific form of the finite-degree basis function depends on function separability and limits of the region of support. Using the forward-difference representation of the truncated moments basis, a new functional value can be computed at every clock cycle. If the computation is performed within a square or cubic region of support, the direction of the finite difference corresponds to the direction that the function is to be computed/synthesized. For example, functional synthesis from the upper-right to lower-left corners within the region of support implies the computation of multidimensional, backward difference. Conversely the multidimensional forward-difference representation, allows functional synthesis to proceed from the lower-left to the upper-right corners within the region of support.
In practice, the complete moments basis representation of a delay profile can be degree-limited for synthesis. One truncation method is to approximate the time of flight as f(r). This approximation can be written as:       g ^    ( r )   =   1  c 0      ∑  u - 0  u     a u    r a      ,         
where âu can be derived based on the LMS criterion,      ∂  ∂   a ^  u       ∫ 1 2      [   f   ( r )   -   g ^    ( r )    ]  2     r     = 0.         
Here, c0 equals the propagation velocity of sound in a nearly-homogeneous medium. Once the coefficients âu of the polynomial (r) possesses positive-integer powers of range r, it can be formulated as a stable, forward-difference equation. In general, U+1 forward-difference terms are sufficient to describe a polynomial whose highest degree in r is U. The terms completely specify f(r) within the region of support: r1<r<r2.
The polynomial coefficients, âu, are found by solving a set of linear equations in range r. These equations may be more conveniently written in matrix notation as B â=m where â represents the polynomial coefficient vector. The matrix B contains elements comprising integral sums of the form     b i  =   ∫ i 2      g ^    ( r )      ∂ i   ∂   a ^  i 1       g ^    ( r )      r            
The variable u ranges from 0 to u; the largest degree of the finite-degree polynomial in range, r. The vector m, contains the moments of the time of flight within the region of support     m i  =   ∫ i 2     f   ( r )      ∂ i   ∂   a ^  i 1       g ^    ( r )       r  .            
The solution of the preceding set of equations provides the coefficients âu. By computing the initial values of (r) beginning at the range r0, the forward-difference terms are derived. For example, the first, second and third order forward-difference terms of (r) are:    Δ     r 1      g ^  =    g ^    (   r 0  + 1  )   -   g ^    (  r 0  )     ,  
    Δ     r 2     g ^  =     g ^    (   r 0  + 2  )   -  2    g ^    (   r 0  + 1  )    +     g ^    (  r 0  )   .  
      Δ   r 3     g ^    =    g ^    (   r 0  + 3  )   -  3    g ^    (   r 0  + 2  )    +  3    g ^    (   r 0  + 1  )    -    g ^    (  r  0        )   .                 
This difference expansion about (r0) in the positive r dimension continues until the degree of the finite-difference is identical to the degree of the finite-degree polynomial (r).
The coefficient associated with each of the terms in the summations comprises the preceding difference expansions from Pascal's triangle differing by a sign in every other term. This relationship is generally      ∑  u + 0  L    [  u L  ]   =   ∑  u - 0  L      (  - 1  )   L - u       u !    l !     (  L - u  )  !    .            
Using this equation, the Lth forward difference of the preceding arbitrary-degree polynomial can be more succinctly written:        Δ   g L     g ^    (  r 0  )    =   ∑  u - 0  L       (  - 1  )   L - u     [    u     l    ]       g ^    (   r o  + u  )   .            
A CMOS computing structure implementing the preceding equation is included using only adders, multiplexers and registers to perform functional synthesis using the forward-difference representation of the finite-degree polynomial. This system allows the synthesis of arbitrary functions using repeated additions with no multiplication.
Thus, only one addition time is required to produce the next function value. For a multi-channel processor, each channel has associated functional update circuitry. As the beam is steered through a given imaging plane, the delay requirements for each channel are computed in parallel and can be updated within one clock period. For the 64-channel beamforming processors running at a 6.4 MHZ sampling rate, a continuous delay update rate of 9.6 billion bits/s can be achieved.
A diver-held, detection and imaging sonar 230 is illustrated in FIGS. 11A-11C. This system is portable, using an internal battery for over 4 hours with quick-disconnect capability, the system is for underwater detection and reconnaissance in mid-surf or littoral waters. This region is often the most difficult to traverse due to underwater mines and obstructions. Currently, the discovery of these objects is performed by touch in cold, murky water, often at night, under low-light conditions.
Currently, portable sonar imaging systems are dominated by 1D arrays of sensors that use acoustic lenses to focus reflected sound returning from the range of 3 to 30 meters. The present invention uses CCD/CMOS integrated-circuit technologies that allows electronic lenses to focus reflected energy following detection by a state-of-the-art 1D array. By utilizing the low-power attributes of CCD/CMOS technology in electronic beamformers, the necessary battery life span can be maintained. By replacing the acoustic lens with electronic beamformers, the sonars can be made smaller with fewer mechanical parts that are susceptible to failure. The electronic beamformer also provides better imaging with no reflection artifacts.
The system consists of a 1D or 2D transducer array 238 on one side of the sealed housing 230, the array being connected to internal beamforming electronics, a PC hose controller and a display system 234 with touchscreen features, all packaged in the watertight housing unit. The beamforming output is connected to the PC through an IEEE 1394 bus. The system can use a 64-channel beamformer with apodization and real-time dynamic-focusing coprocessor, a bank of low-noise amplifiers, and CDP FIR filters for signal conditioning. The first embodiment uses a commercially available PC, i.e., the transducer, the beamforming electronics, a commercially available tablet PC with a LCD display. Handles 236 allow the user to hold the housing and permit operation at control panels 232. The second embodiment includes a watertight package 240 with a PC and beamforming electronics. A VGA output is provided by the package, which in turn is connected to a diver mask-mounted display 242 with cable 244. For either approach, the beamforming electronics and FR filters are being developed based on a low-power, high-throughput charge-domain-processor (CDP). At a 40 MHz clock rate, the beamformer can provide a continuous computation throughput of 10 billion operations/s and a delay update rate of 22 billion bit/s and dissipate less than 1 W of electric power.
While this invention has been particularly shown and described with references to preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention encompassed by the appended claims.

What is claimed is: 
 
1. A multiple beamforming circuit device comprising:
a plurality of sensors; and 
a plurality of beamforming circuits, each sensor having a corresponding beamformer circuit including a control circuit having time multiplexed delays that controls delay for a plurality of beams, a timing circuit, a summing circuit and a sequentially addressed memory that stores delay signals for the plurality of beams. 

  
2. The device of claim 1 further comprising an ultrasound imaging system.

  
3. The device of claim 1 further comprising a sonar imaging system.

  
4. The device of claim 1 further comprising a display in a sealed housing.

  
5. The device of claim 1 wherein the beamforming circuits are formed with a single integrated circuit.

  
6. The device of claim 1 wherein each beamforming circuit comprises a sampling circuit, a programmable delay line connected to the control circuit and a multiplier.

  
7. The device of claim 1 wherein the control circuit comprises a delay control circuit for each of the plurality of beams.

  
8. The device of claim 1 further comprising a finite impulse response filter.

  
9. The device of claim 1 further comprising collecting data from a three dimensional volume and forming a representation of the three dimensional volume.

  
10. The device of claim 1 wherein the beamforming circuits receive digital or analog data.

  
11. The device of claim 1 further comprising a system controller in communication with the plurality of beamforming circuits.

  
12. The device of claim 11 further comprising a memory in communication with the system controller.

  
13. A multiple beamforming circuit device comprising:
a plurality of sensors; 
a plurality of beamforming circuits, each sensor having a corresponding beamformer circuit including a control circuit that controls delay for a plurality of beams, a timing control circuit and a summing circuit; 
a system controller in communication with the plurality of beamforming circuits for controlling flow of a plurality of control signals; and 
a memory in communication with the system controller, the memory circuit having separate storage locations that store delay signals for each of the plurality of beams. 

  
14. The device of claim 13 further comprising an ultrasound imaging system.

  
15. The device of claim 13 further comprising a sonar imaging system.

  
16. The device of claim 13 further comprising a display in a sealed housing.

  
17. The device of claim 13 wherein the beamforming circuits are formed with a single integrated circuit.

  
18. The device of claim 13 wherein each beamforming circuit comprises a sampling circuit, a programmable delay line connected to the control circuit and a multiplier.

  
19. The device of claim 13 wherein the control circuit comprises a delay control circuit for each of the plurality of beams.

  
20. The device of claim 13 further comprising a finite impulse response filter.

  
21. The device of claim 9 wherein the representation comprises a three dimensional ultrasound image.

  
22. The device of claim 13 wherein the beamforming circuits receive digital or analog data.

  
23. The device of claim 13 wherein the control circuit comprises time multiplexed delays.