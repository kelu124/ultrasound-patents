# US10348436B2 - US10348436B2 - Method and apparatus for low power chip-to-chip communications with constrained ISI ratio 
        - Google Patents

## Details

* Date: 2014-02-02
* Inventor: Kandou Labs SA
* Beneficiary: Amin Shokrollahi, Ali Hormati, Roger Ulrich
## Other patents

### Backwards
 * US668687A
 *US780883A
 *US3196351A
 *US4276543A
 *US4499550A
 *US4722084A
 *US4772845A
 *US4774498A
 *US4864303A
 *US4897657A
 *US4974211A
 *US5017924A
 *US5053974A
 *US5150384A
 *US5166956A
 *US5168509A
 *US5266907A
 *US5287305A
 *US5311516A
 *US5331320A
 *US5412689A
 *US5449895A
 *US5459465A
 *US5461379A
 *US5511119A
 *US5510736A
 *US5553097A
 *US5566193A
 *US5599550A
 *US5626651A
 *US5629651A
 *US5659353A
 *US5727006A
 *US5748948A
 *US5802356A
 *US5825808A
 *US5875202A
 *US5945935A
 *US5949060A
 *US5995016A
 *US5999016A
 *US6005895A
 *US6084883A
 *US6119263A
 *US6154498A
 *US6172634B1
 *US6232908B1
 *US6278740B1
 *US6316987B1
 *US6317465B1
 *US6346907B1
 *US6378073B1
 *US6384758B1
 *US6398359B1
 *US6417737B1
 *US6424630B1
 *US20020097791A1
 *US6452420B1
 *US20020152340A1
 *US20020154633A1
 *US6473877B1
 *US20020167339A1
 *US6483828B1
 *US20020174373A1
 *US20020181607A1
 *US6509773B2
 *US20030016770A1
 *US20030016763A1
 *US6522699B1
 *US20030046618A1
 *US6556628B1
 *US20030085763A1
 *US20030086366A1
 *US6563382B1
 *JP2003163612A
 *US20030117184A1
 *US6621427B2
 *US20030174023A1
 *US6624699B2
 *US20030185310A1
 *US20030218558A1
 *US6661355B2
 *US6686879B2
 *US6690739B1
 *US20040027185A1
 *US20040057525A1
 *US6766342B2
 *US20040146117A1
 *US6772351B1
 *US20040155802A1
 *US20040161019A1
 *US20040169529A1
 *US20040170231A1
 *US20040239374A1
 *US6839429B1
 *US6839587B2
 *WO2005002162A1
 *US6854030B2
 *US6865236B1
 *US6865234B1
 *US20050057379A1
 *US6876317B2
 *US20050134380A1
 *US6927709B2
 *US20050195000A1
 *US20050201491A1
 *US20050213686A1
 *US20050220182A1
 *US6954492B1
 *US6963622B2
 *US6973613B2
 *US20050270098A1
 *US6976194B2
 *US6982954B2
 *US20060013331A1
 *US6990138B2
 *US6993311B2
 *US6991038B2
 *US6999516B1
 *US20060036668A1
 *US7023817B2
 *US20060097786A1
 *US20060103463A1
 *US20060126751A1
 *US20060140324A1
 *US7075996B2
 *US7080288B2
 *US20060159005A1
 *US7082557B2
 *US7085336B2
 *US20060233291A1
 *CN1864346A
 *US7142612B2
 *US7142865B2
 *US20070002954A1
 *US20070001723A1
 *US7164631B2
 *US7167019B2
 *US20070030796A1
 *US7176823B2
 *US7180949B2
 *US7199728B2
 *US20070103338A1
 *US7231558B2
 *US20070164883A1
 *US20070182487A1
 *US20070188367A1
 *US20070194848A1
 *US20070204205A1
 *US20070201546A1
 *US7269212B1
 *US7269130B2
 *US20070265533A1
 *US20070283210A1
 *US20080007367A1
 *US20080013622A1
 *US20080016432A1
 *US20080012598A1
 *US7335976B2
 *US7336112B1
 *US7339990B2
 *US7346819B2
 *US7348989B2
 *US7349484B2
 *US7356213B1
 *US7358869B1
 *US7362697B2
 *US7366942B2
 *US7370264B2
 *EP1926267A1
 *US7389333B2
 *US7400276B1
 *US20080192621A1
 *US7428273B2
 *US7462956B2
 *US20080317188A1
 *US20090046009A1
 *US7496162B2
 *EP2039221A1
 *US20090115523A1
 *US7535957B2
 *US20090150754A1
 *CN101478286A
 *WO2009084121A1
 *US7570704B2
 *US20090195281A1
 *US7583209B1
 *US7599390B2
 *US20090251222A1
 *US20090262876A1
 *US7613234B2
 *US7616075B2
 *US7633850B2
 *US20090316730A1
 *US7639596B2
 *US20090323864A1
 *US7643588B2
 *US7650525B1
 *US20100023838A1
 *US7656321B2
 *WO2010031824A1
 *US20100081451A1
 *US7694204B2
 *US7698088B2
 *US7697915B2
 *US7706456B2
 *US7706524B2
 *US20100148819A1
 *US7768312B2
 *US20100215112A1
 *US20100215118A1
 *US7787572B2
 *CN101820288A
 *US20100235673A1
 *US7804361B2
 *CN101854223A
 *US20100271107A1
 *US7826551B2
 *US20100283894A1
 *US20100296556A1
 *US7841909B2
 *US20100309964A1
 *US7859356B2
 *US7869546B2
 *US7869497B2
 *US7868790B2
 *US20110028089A1
 *US20110032977A1
 *US7899653B2
 *US20110072330A1
 *US20110074488A1
 *US7933770B2
 *US20110103508A1
 *US20110150495A1
 *US20110228864A1
 *WO2011119359A2
 *US8030999B2
 *US8036300B2
 *US8050332B2
 *US20110268225A1
 *US8055095B2
 *US20110286497A1
 *US20110291758A1
 *US20110299555A1
 *US20110302478A1
 *US8085172B2
 *US20120008662A1
 *US8106806B2
 *US20120036415A1
 *US8149906B2
 *US20120082203A1
 *US8159376B2
 *US8180931B2
 *US8185807B2
 *US20120133438A1
 *US8199849B2
 *US8199863B2
 *US20120152901A1
 *US20120161945A1
 *US8218670B2
 *US8245094B2
 *US8245102B1
 *US20120213299A1
 *US8253454B2
 *US8279094B2
 *US8279976B2
 *US8284848B2
 *US8295336B2
 *US8295250B2
 *US8310389B1
 *US20130013870A1
 *US20130010892A1
 *US8359445B2
 *US8365035B2
 *US20130049863A1
 *US8406315B2
 *US20130088274A1
 *US8429492B2
 *US20130106513A1
 *US20130114663A1
 *US20130114519A1
 *US20130114392A1
 *US8442099B1
 *US8443223B2
 *US20130129019A1
 *US8451913B2
 *US8462891B2
 *US20130147553A1
 *US20130159584A1
 *US8472513B2
 *US20130188656A1
 *US8498368B1
 *US20130195155A1
 *US20130202065A1
 *US20130215954A1
 *US8520348B2
 *US20130229294A1
 *US8547272B2
 *US20130259113A1
 *US20130271194A1
 *US8578246B2
 *US8577284B2
 *US8588254B2
 *US20130307614A1
 *US8593305B1
 *US20130315501A1
 *US20130314142A1
 *US8604879B2
 *US20130346830A1
 *US8638241B2
 *US8649556B2
 *US8649840B2
 *US20140068391A1
 *US8718184B1
 *US20140159769A1
 *US20140177696A1
 *US8773964B2
 *US8782578B2
 *US8780687B2
 *US20140198841A1
 *US8791735B1
 *US20140226455A1
 *US8831440B2
 *US20140269130A1
 *US20140266440A1
 *US8841936B2
 *US20140286381A1
 *US8879660B1
 *US8897134B2
 *US8898504B2
 *US20150010044A1
 *US8938171B2
 *US8951072B2
 *US20150049798A1
 *US8975948B2
 *US20150070201A1
 *US8996740B2
 *US9020049B2
 *US20150117579A1
 *US9036764B1
 *US20150146771A1
 *US9059816B1
 *US9069995B1
 *US9077386B1
 *US9083576B1
 *US9093791B2
 *US9100232B1
 *US20150236885A1
 *US9124557B2
 *US20150249559A1
 *US9148087B1
 *US9152495B2
 *US9172412B2
 *US9183085B1
 *US20150333940A1
 *US9197470B2
 *US20150349835A1
 *US20150381232A1
 *US20150380087A1
 *US9231790B2
 *US20160020796A1
 *US20160020824A1
 *US20160036616A1
 *US9281785B2
 *US9300503B1
 *US9331962B2
 *US9374250B1
 *US20160197747A1
 *US9432298B1
 *US20160261435A1
 *US9479369B1
 *US9520883B2
 *US9537644B2
 *US9634797B2
 *US9710412B2
 *US20170310456A1
 *US20170317449A1
 *US20170317855A1
### Forward
 * US10587391B2
## Abstract

Abstract

An efficient communications apparatus is described for a vector signaling code to transport data and optionally a clocking signal between integrated circuit devices. Methods of designing such apparatus and their associated codes based on a new metric herein called the “ISI Ratio” are described which permit higher communications speed, lower system power consumption, and reduced implementation complexity.



An efficient communications apparatus is described for a vector signaling code to transport data and optionally a clocking signal between integrated circuit devices. Methods of designing such apparatus and their associated codes based on a new metric herein called the “ISI Ratio” are described which permit higher communications speed, lower system power consumption, and reduced implementation complexity.

This application is a Continuation of and claims priority under 35 USC § 120 to U.S. application Ser. No. 14/816,899, filed Aug. 3, 2015, which is a Continuation of U.S. application Ser. No. 14/612,241, filed Feb. 2, 2015, entitled “Method and Apparatus for Low Power Chip-to-Chip Communications with Constrained ISI Ratio” which is a non-provisional application claiming priority under 35 USC § 119 to U.S. Provisional Application 61/934,803, entitled “Method for Code Evaluation using ISI Ratio,” filed on Feb. 2, 2014, all of which are hereby incorporated herein by reference in their entirety for all purposes.
REFERENCES
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication 2011/0268225 of application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”);
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli, entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes”, hereinafter identified as [Cronie II];
U.S. patent application Ser. No. 14/158,452, filed Jan. 17, 2014, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Richard Simpson, Anant Singh, Andrew Kevin John Stewart, and Giuseppe Surace, entitled “Chip-to-Chip Communication with Reduced SSO Noise”, hereinafter identified as [Fox I];
U.S. patent application Ser. No. 14/178,051, filed Feb. 11, 2014, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Richard Simpson, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface”, hereinafter identified as [Fox II];
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi and Anant Singh, entitled “Methods and Systems for Skew Tolerance in and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication”, hereinafter identified as [Holden I];
U.S. Provisional Patent Application 61/839,360, filed Jun. 23, 2013, naming Amin Shokrollahi, entitled “Vector Signaling with Reduced Receiver Complexity” (hereinafter “Shokrollahi I”);
U.S. Provisional Patent Application No. 61/839,360, filed Jun. 23, 2013, naming Amin Shokrollahi, entitled “Vector Signaling Codes with Reduced Receiver Complexity”, hereinafter identified as [Shokrollahi II].
U.S. Provisional Patent Application No. 61/946,574, filed Feb. 28, 2014, naming Amin Shokrollahi, Brian Holden, and Richard Simpson, entitled “Clock Embedded Vector Signaling Codes”, hereinafter identified as [Shokrollahi III].
U.S. Provisional Patent Application No. 62/015,172, filed Jul. 10, 2014, naming Amin Shokrollahi and Roger Ulrich, entitled “Vector Signaling Codes with Increased Signal to Noise Characteristics”, hereinafter identified as [Shokrollahi IV].
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences”, hereinafter identified as [Ulrich I].
U.S. Provisional Patent Application No. 62/026,860, filed Jul. 21, 2014, naming Roger Ulrich and Amin Shokrollahi, entitled “Bus Reversible Orthogonal Differential Vector Signaling Codes”, hereinafter identified as [Ulrich II].
U.S. patent application Ser. No. 14/315,306, filed Jun. 25, 2014, naming Roger Ulrich, entitled “Multilevel Driver for High Speed Chip-to-Chip Communications”, hereinafter identified as [Ulrich III].
The following additional references to prior art have been cited in this application:
U.S. Pat. No. 7,053,802, filed Apr. 22, 2004 and issued May 30, 2006, naming William Cornelius, entitled “Single-Ended Balance-Coded Interface with Embedded-Timing”, hereinafter identified as [Cornelius];
U.S. Pat. No. 8,649,460, filed Mar. 11, 2010 and issued Feb. 11, 2014, naming Frederick Ware and Jade Kizer, entitled “Techniques for Multi-Wire Encoding with an Embedded Clock”, hereinafter identified as [Ware].
FIELD OF THE INVENTION
The present invention relates generally to the field of communications, and more particularly to the transmission and reception of signals capable of conveying information within and between devices.
BACKGROUND
In communication systems, a goal is to transport information from one physical location to another. It is typically desirable that the transport of this information is reliable, is fast and consumes a minimal amount of resources. One common information transfer medium is the serial communications link, which may be based on a single wire circuit relative to ground or other common reference, or multiple such circuits relative to ground or other common reference. A common example uses singled-ended signaling (“SES”). SES operates by sending a signal on one wire, and measuring the signal relative to a fixed reference at the receiver. A serial communication link may also be based on multiple circuits used in relation to each other. A common example of the latter uses differential signaling (“DS”). Differential signaling operates by sending a signal on one wire and the opposite of that signal on a matching wire. The signal information is represented by the difference between the wires, rather than their absolute values relative to ground or other fixed reference.
There are a number of signaling methods that maintain the desirable properties of DS while increasing pin efficiency over DS. Vector signaling is a method of signaling. With vector signaling, a plurality of signals on a plurality of wires is considered collectively although each of the plurality of signals might be independent. Each of the collective signals is referred to as a component and the number of plurality of wires is referred to as the “dimension” of the vector. In some embodiments, the signal on one wire is entirely dependent on the signal on another wire, as is the case with DS pairs, so in some cases the dimension of the vector might refer to the number of degrees of freedom of signals on the plurality of wires instead of exactly the number of wires in the plurality of wires.
Any suitable subset of a vector signaling code denotes a “subcode” of that code. Such a subcode may itself be a vector signaling code. With binary vector signaling, each component or “symbol” of the vector takes on one of two possible values. With non-binary vector signaling, each symbol has a value that is a selection from a set of more than two possible values. The set of all values required to represent all symbols is called the “alphabet” of the code. Thus, as examples, a binary vector signaling code requires at least an alphabet of two values, while a ternary vector signaling code requires at least an alphabet of three values. When transmitted as physical signals on a communications medium, symbols may be represented by particular physical values appropriate to that medium; as examples, in one embodiment a voltage of 150 mV may represent a “+1” symbol and a voltage of 50 mV may represent a “−1” symbol, while in another embodiment “+1” may be represented by 800 mV and “−1” as −800 mV.
A vector signaling code, as described herein, is a collection C of vectors of the same length N, called codewords. The ratio between the binary logarithm of the size of C and the length N is called the pin-efficiency of the vector signaling code. The Orthogonal Differential Vector Signaling or ODVS codes of [Cronie I], [Cronie II], [Fox I], [Shokrollahi I], [Shokrollahi II], and [Shokrollahi III] are examples of vector signaling codes, and are used herein for descriptive purposes.
Inter-symbol interference (ISI) is the distortion of a symbol to be decoded at the receiver by the residual effects of symbols previously sent through the system. This effect is mainly due to properties of the underlying communication channel, and often is the limiting characteristic precluding higher speed or lower error communications. Well-known examples of channels vulnerable to ISI include wireless communications with multipath interference and band-limited channels in wired systems. Since ISI degradation is deterministic, it is advisable to cancel its effect before trying to decode the current symbol to obtain its embedded information. In some cases, a sequence of previously-sent symbols that constructively combine to maximize their impact on the detection margin of the current symbol. Since these worst-case symbol patterns usually occur with a high probability compared to the target error-rate of the system, their effect and how to quantify and minimize their destructive behavior is a major concern in the design of communication systems. Beyond such ad-hoc identification of problematic patterns, there is no reliable metric to assess the impact of ISI on communications system performance, nor to suggest channel or coding modifications to mitigate such effects.
One way to combat the ISI problem is to use equalizers which render the equivalent channel ISI-free. Equalizers are functional processing blocks or circuits that try to invert the channel in such a way that the transmitted data at each symbol interval becomes (ideally) independent of the other symbols sent through the system. In a Serializer-Deserializer (SerDes) design, FIR (Finite Impulse Response filtering) and CTLE (Continuous Time Linear Equalization) are two well-known linear equalization methods used respectively at the transmitter and receiver sides of the system while DFE (Decision Feedback Equalization) is a receiver-side non-linear equalization method. Other equalization methods such as the Tomlinson-Harashima precoding method are also known to practitioners of the field. Such pre-coding is often equivalent to equalization at the transmitter. On one hand, equalizers can be expensive in terms of implementation complexity, power consumption, and calibration requirements, especially in multi-gigabit/s communication systems. Thus, there is a need for both metrics that accurately reflect the impact of ISI on communications system performance, and for channel processing solutions that mitigate ISI effects in an efficient, high performance manner.
BRIEF DESCRIPTION
An efficient communications apparatus is described for a vector signaling code to transport data and optionally a clocking signal between integrated circuit devices. Methods of designing such apparatus and their associated codes based on a new metric herein called the “ISI Ratio” are described which permit higher communications speed, lower system power consumption, and reduced implementation complexity.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 illustrates an embodiment of a communications system in accordance with the invention.
 FIG. 2 shows the case of differential signaling on two wires sending one bit per symbol.
 FIG. 3 shows the case of PAM-4 signaling on two wires sending two bits per symbol.
 FIG. 4 shows the pulse response of the example channel used for the simulations herein.
 FIG. 5 shows eye diagrams for the first case MIC embodiment of a P3 receiver.
 FIG. 6 shows eye diagrams for the second case MIC embodiment of a P3 receiver.
 FIGS. 7A through 7E show eye diagrams for the five sub-channels of a 5b6w code receiver.
 FIGS. 8A through 8C show eye diagrams for the three sub-channels of an ENRZ code receiver.
 FIGS. 9A and 9B show eye diagrams for the 4.5b5w code of [Shokrollahi I].
 FIGS. 10A and 10B show eye diagrams for an 8b8w code.
 FIG. 11 is a graph comparing performance of NRZ, PAM-4, and ENRZ signaling over the same channel model.
 FIG. 12 shows an eye-diagram for NRZ as an example of common practice signaling methods on this channel.
 FIG. 13 shows the eye-diagrams for PAM-4 as an example of common practice signaling methods on this channel.
 FIG. 14 is a block diagram of a Glasswing receiver.
 FIG. 15 is a block diagram of a Glasswing receiver recovering an embedded clock.
 FIG. 16 is a schematic of one embodiment of a multi-input comparator with input weights as defined by row 6 of the matrix of Eqn. 3, both with and without equalization.
 FIG. 17 is a schematic of one alterative one embodiment of a multi-input comparator with input weights as defined by row 6 of the matrix of Eqn. 3, both with and without equalization.
 FIG. 18 is a schematic of one embodiment of a multi-input comparator with input weights as defined by row 3 of the matrix of Eqn. 3, both with and without equalization. With suitable substitution of wire inputs, it also may be used to embody the comparator of row 5 of the matrix of Eqn. 3.
 FIG. 19 is a schematic of one alterative embodiment of a multi-input comparator with input weights as defined by row 3 of the matrix of Eqn. 3, both with and without equalization. With suitable substitution of wire inputs, it also may be used to embody the comparator of row 5 of the matrix of Eqn. 3.
 FIG. 20 is a schematic of one embodiment of a multi-input comparator with input weights as defined by row 2 of the matrix of Eqn. 3, both with and without equalization. With suitable substitution of wire inputs, it also may be used to embody the comparator of row 4 of the matrix of Eqn. 3.
 FIG. 21 is a block diagram of one embodiment of a Glasswing 5b6w transmit driver.
 FIG. 22 is a block diagram of one embodiment of a Glasswing 5b6w_10_5 transmit driver.
 FIG. 23 is a flow diagram of a transmission method.
 FIG. 24 is a flow diagram of a reception method.

DETAILED DESCRIPTION
 FIG. 1 illustrates an embodiment of a communication system in accordance with the invention employing a vector signaling code. Source data to transmitter 110, herein illustrated as S0, S1, S2, S3, S4 enters as a source data word 100 into encoder 112. The size of the source data word may vary and depends on the parameters of the vector signaling code. The encoder 112 generates a codeword of the vector signaling code for which the system is designed. In operation, the codeword produced by encoder 112 is used to control PMOS and NMOS transistors within driver 118, generating two, three, or more distinct voltages or currents on each of the N communication wires 125 of communications channel 120, to represent the N symbols of the codeword. In the embodiment of FIG. 1, the size of the source data word is shown as five bits and the codeword size is six symbols. Thus, communications channel 110 is shown as being comprised of six signal wires 125, each transporting one codeword symbol. One familiar with the encoding arts may also describe this code as having a block length of six (i.e. producing an output word of six symbols) and a code size of 32 (i.e. having 32 distinct codewords, sufficient to encode 5 binary bits of data.)
Within communications receiver 130, detector 132 reads the voltages or currents on wires 125, possibly including amplification, frequency compensation, and common mode signal cancellation. In the present example, the received results 140, herein shown as R0, R1, R2, R3, R4, are provided directly by detector 132, without need of optional decoder 138.
As will be readily apparent, different codes may be associated with different block sizes and different codeword sizes; for descriptive convenience and without implying limitation, the example of FIG. 1 illustrates a system using an ODVS code capable of encoding five binary bit values for transmission over six wires, a so-called 5b6w code.
Depending on which vector signaling code is used, there may be no decoder, or no encoder, or neither a decoder nor an encoder. For example, for the 8b8w code disclosed in [Cronie II], both encoder 112 and decoder 138 exist. On the other hand, for the 5b6w code of the present example, an explicit decoder is unnecessary, as the system may be configured such that detector 132 generates the received results 140 directly.
The operation of the communications transmitter 110 and communications receiver 130 have to be completely synchronized in order to guarantee correct functioning of the communication system. In some embodiments, this synchronization is performed by an external clock shared between the transmitter and the receiver. Other embodiments may combine the clock function with one or more of the data channels, as in the well-known Biphase encoding used for serial communications, or other methods described herein.
Signaling in a Communications System
Signaling is a method of transmitting information over communication channels. Any form of mapping information (typically represented as bits) to physical quantities that are carried on the communication channel is referred to as signaling. In preferred embodiments, information to be conveyed on a communication channel is modulated through a shaped pulse having a real-valued function of finite support. The signals transmitted on the wires are of the form

Σi=−∞ +∞ C i P(t−iT)  [Eqn. 1]

where Ci is the codeword vector of length N (equal to the number of wires), T is the temporal length of a unit interval (UI) of the pulse representing one transmitted value, and P is a function on the interval [0,T] defining the pulse shape used for modulation. The codewords Ci determine the information sent at every instance. The choice of the set to which the Ci belongs, together with the choice of the mapping between the information bits and the Ci determines the signaling method.

Pulse amplitude modulation (PAM) is a method of signaling in which the Ci can take one of the values [−1, −1+2/(X−1), −1+4/(X−1), . . . , 1−4/(X−1), 1−2/(X−1), 1] representing equal amplitude intervals over the allowable signal range. This type of signaling is referred to as PAM-X signaling. Often (but not exclusively), X is a power of 2, and each Ci carries log 2(X) (binary logarithm of X) information bits. In many high-speed SerDes applications, X=2, though values such as X=4, X=8, or X=16 have also been proposed in various standards bodies.

It is well known to those of skill in the art that while PAM-X signaling leads to a higher ratio of transmitted bits per unit interval, it is more susceptible to ISI than PAM-2. This is often falsely attributed to the fact that in PAM-X signaling has more possible transition extents (i.e. changes in signal amplitude,) with the different amounts of time needed to traverse these extents leading to the increased ISI. Based on this false premise, it has also often been suggested that any signaling method that uses an alphabet size larger than 2 will suffer from ISI more than PAM-2. However, we subsequently show the alphabet size does not directly impact ISI.
A vector signaling code, as described here, is a collection C of vectors of the same dimension N, called codewords, a second collection Λ of vectors of dimension N, called multi-input comparators (MIC's), and a set of “don't cares” wherein each don't care is a pair Ci, λ, with Ci being an element of C and λ being an element of Λ. In operation, the coordinates of the elements of C are bounded, and we choose to represent them by real numbers between −1 and 1.
In operation, a codeword is uniquely determined by the vector of the scalar products of that codeword with all the MIC's λ for which Ci, λ is not a don't care. If a pair Ci, λ is not a don't care, we say that Ci is active for MIC λ.
An example is provided as follows: the collection C of codewords consists of the 12 vectors obtained from the permutations of the vector (1,0,0,−1), the MIC's are the six vectors
(1,−1,0,0), (1,0,−1,0), (1,0,0,−1), (0,1,−1,0), (0,1,0,−1), (0,0,1,−1)
and the set of don't cares are those pairs of codewords and MIC's such that the scalar product of the MIC with the codeword is zero. In other words, the don't cares are the pairs

 
((1,0,0,−1), (0,1,−1,0)), ((1,0,−1,0), (0,1,0,−1)), ((1,−1,0,0),(0,0,1,−1)), ((0,1,−1,0),(1,0,0,−1)),
((0,1,0,−1), (1,0,−1,0)), ((0,0,1,−1),(1,−1,0,0)), ((0,0,−1,1),(1,−1,0,0)), ((0,−1,1,0),(1,0,0,−1)),
((0,−1,0,1),(1,0,−1,0)), ((−1,0,0,1),(0,1,−1,0)), ((−1,0,1,0),(0,1,0,−1)), ((−1,1,0,0),(0,0,1,−1)).

In the following we will use interchangeably the interpretation of a MIC being defined as a vector, and as a hyper-plane given by the set of all points orthogonal to this vector.
The ISI problem is examined from this signaling point of view with the intent to determine how to transfer data in a manner less sensitive to the uncorrected residual ISI in the system. In situations where the detection of signals is achieved using comparisons of signal values to fixed references or to one another, the ISI susceptibility shown to be primarily determined by the signal levels observed at the output of these comparators, rather than by the signal levels observed on the wires themselves. We introduce the concept of the ISI-Ratio, a metric that will help us quantify the effect of the ISI noise as a function of the signaling and the detection methods used. We will use this concept to design vector signaling methods that are robust against ISI noise and will show simulation results confirming this approach.
Receivers Using Multi-input Comparators
As described in [Holden I], a practical embodiment of a multi-input comparator or MIC with coefficients α0, α1, . . . , αm-1 is a summation circuit that accepts as its input a vector (x0, x1, . . . , xm-1) from a plurality of signal conductors and outputs

Result=(α0 *x 0+ . . . +αm-1 *x m-1)  (Eqn. 2)

where (x0 . . . xm-1) is the signal weight vector for the summation circuit. In many embodiments, the desired output is a binary value, thus the value Result is sliced with an analog comparator or other such signal slicer circuit to produce a binary decision output. Because this is a common use case, the colloquial name of this circuit incorporates the term “comparator”, although other embodiments may apply the summation result to a PAM-3 or PAM-4 slicer to obtain ternary or quaternary outputs, or indeed may retain the analog output of Eqn. 2 for further computation.

Receivers Described in Matrix Notation

Mathematically, the set of multi-input comparators comprising a code receiver may be concisely described using matrix notation, with the columns of the matrix corresponding to consecutive elements of input vector (x0, x1, . . . , xm-1) i.e. the plurality of signal conductor or wire inputs carrying the vector signaling code, and each row of the matrix corresponding to the vector defining a particular multi-input comparator and its output. In this notation, the value of matrix element corresponds to the weight vector or set of scaling factors applied to that column's input values by that row's multi-input comparator.
The matrix of Eqn. 3 describes one such set of multi-input comparators comprising a code receiver.




 






1


1


1


1


1


1




1



-
1



0


0


0


0





1
2




1
2




-
1



0


0


0




0


0


0


1



-
1



0




0


0


0



1
2




1
2




-
1






1
3




1
3




1
3




-

1
3





-

1
3





-

1
3








(

Eqn
.

 

⁢
3

)








In this embodiment, six input wires, represented by the six matrix columns, are processed by five multi-input comparators represented by matrix rows 2-6. For purposes to be subsequently described, the first matrix row is comprised of all “1” values, creating a square 6×6 matrix.
As used herein, a matrix M such as that of Eqn. 3 is called “orthogonal” if MTM=D that is, if the product of the matrix and its transpose is a diagonal matrix having non-zero values only on its diagonal. This is a weaker definition than commonly used, where the result is required to be the identity matrix, i.e. having diagonal values equal to 1. Matrix M may be normalized to satisfy the stronger conventional orthogonality requirement, but as will subsequently be described such normalization is neither necessary nor desirable in practice.
Functionally, orthogonality requires that the vector of weights in a row representing a multi-input comparator be orthogonal to all other rows, and that each row representing a multi-input comparator sums to zero. As this implies the comparator outputs are also orthogonal (and therefore independent,) they represent distinct communications modes, herein described as “sub-channels” of the Vector Signaling Code communications system.
Given this modal interpretation, the initial row of the matrix may be seen to represent the common-mode communications channel over the transmission medium. As it is desirable in a practical system for the receiver to have common-mode rejection, the first row is set to all “1” values, maximizing the common mode contribution of each wire input to this one matrix row. As by definition all rows of the matrix are orthogonal, it follows that no other matrix row (i.e. no receiver output) may then be impacted by common mode signals. Embodiments having such common mode rejection need not implement a physical comparator corresponding to the first row of their descriptive matrix.
For avoidance of confusion, it is noted that all data communications in an ODVS system, including the state changes representing signals carried in sub-channels, are communicated as codewords over the entire channel. An embodiment may associate particular mappings of input values to codewords and correlate those mappings with particular detector results, as taught herein and by [Holden I] and [Ulrich I], but those correlations should not be confused with partitions, sub-divisions, or sub-channels of the physical communications medium itself. Similarly, the concept of ODVS sub-channels is not limited by the example embodiment to a particular ODVS code, transmitter embodiment, or receiver embodiment. Encoders and/or decoders maintaining internal state may also be components of embodiments in accordance with the invention. Sub-channels may be represented by individual signals, or by states communicated by multiple signals.
[Shokrollahi II] describes methods of constructing orthogonal matrices that may be utilized as described herein.
Generating ODVS Codes Corresponding to a Receiver Matrix
As described in [Cronie I] and [Cronie II], an Orthogonal Differential Vector Signaling code may be constructed from a generator matrix by multiplication of an input modulation vector of the form (0, α1, α2, . . . αn) by the matrix M In the simplest case, each αi of this vector is the positive or negative of a single value, as example ±1, representing one bit of transmitted information.
Given our understanding of M as describing the various communications modes of the system, it may readily be seen that multiplication of the matrix by such an input vector comprises excitation of the various modes by the αi, of that vector, with the zeroth mode corresponding to common mode transmission not being excited at all. It will be obvious to one familiar with the art that transmission energy emitted in the common mode is both unnecessary and wasteful in most embodiments. However, in at least one embodiment in accordance with the invention, a nonzero amplitude for the common mode term is used to provide a nonzero bias or baseline value across the communications channel.
It also may be seen that the various codewords of the code generated using this method represent linear combinations of the various orthogonal communication modes. Without additional constraints being imposed (e.g., for purposes of implementation expediency,) this method results in systems capable of communicating N−1 distinct sub-channels over N wires, typically embodied as a N−1 bit/N wire system. The set of discrete codeword values needed to represent the encoded values is called the alphabet of the code, and the number of such discrete alphabet values is its alphabet size.
As a further example, the code generated by this method from the matrix of Eqn. 3 is shown in Table 1.



 
 
 
 
 
TABLE 1
 
 
 
 
 
±[1, ⅓, −1/3, −1, −1/3, ⅓]
±[1, ⅓, −1/3, ⅓, −1, −1/3]
 
 
±[⅓, 1, −1/3, −1, −1/3, ⅓]
±[⅓, 1, −1/3, ⅓, −1, −1/3]
 
 
±[⅓, −1/3, 1, −1, −1/3, ⅓]
±[⅓, −1/3, 1, ⅓, −1, −1/3]
 
 
±[ −1/3, ⅓, 1, −1, −1/3, ⅓]
±[ −1/3, ⅓, 1, ⅓, −1, −1/3]
 
 
±[1, ⅓, −1/3, −1, ⅓, −1/3]
±[1, ⅓, −1/3, ⅓, −1/3, −1]
 
 
±[⅓, 1, −1/3, −1, ⅓, −1/3]
±[⅓, 1, −1/3, ⅓, −1/3, −1]
 
 
±[⅓, −1/3, 1, −1, ⅓, −1/3]
±[⅓, −1/3, 1, ⅓, −1/3, −1]
 
 
±[ −1/3, ⅓, 1, −1, ⅓, −1/3]
±[ −1/3, ⅓, 1, ⅓, −1/3, −1]
 
 
 
 







As may be readily observed, the alphabet of this code consists of the values +1, +⅓, −⅓, −1, thus this is a quaternary code (e.g. having an alphabet size of four.) This code will subsequently be described herein as the 5b6w or “Glasswing” code, and its corresponding receive matrix of Eqn. 3 as the “Glasswing receiver”.
Timing Information on a Sub-channel
As an ODVS communications system must communicate each combination of data inputs as encoded transmissions, and the rate of such encoded transmissions is of necessity constrained by the capacity of the communications medium, the rate of change of the data to be transmitted must be within the Nyquist limit, where the rate of transmission of codewords represents the sampling interval. As one example, a binary clock or strobe signal may be transmitted on an ODVS sub-channel, if it has no more than one clock edge per codeword transmission.
An embodiment of an ODVS encoder and its associated line drivers may operate asynchronously, responding to any changes in data inputs. Other embodiments utilize internal timing clocks to, as one example, combine multiple phases of data processing to produce a single high-speed output stream. In such embodiments, output of all elements of a codeword is inherently simultaneous, (absent any logic delay or other implementation constrain,) thus a strobe or clock signal being transported on a sub-channel of the code will be seen at the receiver as a data-aligned clock (e.g. with its transition edges occurring simultaneous to data edges on other sub-channels of the same code.) Methods are well known in the art to convert such a data-aligned clock into a delayed or center-of-eye-aligned clock, suitable for initiating sampling of data sub-channels in combination with the present invention. Such methods may include introduction of a fixed time delay, adjustable time delay, delay-locked loop, etc.
ISI-ratio
The ISI-Ratio is a measure of the sensitivity of a signaling scheme to the inter-symbol interference in a communication system. It is in a sense a measure for the deterioration of a signaling scheme due to residual uncorrected ISI.
To formalize the above definition, assume that we have N communication wires. At each Unit Interval (called UI in the following), the Encoder picks one out of K possible codewords of length N (based on the bits to be sent) and the drivers create voltages/currents proportional to the coordinate values of the codeword and drive the wires with those values. Without implying limitation, we assume in this example that a rectangular pulse shape Pt is used for the value on each wire. The codewords travel on the channel towards the receiver. On the receiver side, the wire values may pass through an equalizer and possibly a gain stage at the Rx front-end, and these new values are combined in (possibly) multiple linear ways in the comparator network to arrive at a set of decision values. As discussed before, the comparators may take linear combinations of wire values and compare them against fixed references, or against other linear combinations of wire values. The receiver comparator network has M MIC's. The MIC's can be conveniently described as “affine linear forms” on the wire values. In other words, to each MIC is associated a set of coefficients α0, α1, . . . , αn In operation, the output of the MIC is the sign of the expression α0+α1x1+ . . . +αnxn where x1, . . . , xn are the values on wires 1, . . . , N, respectively, and −α0 is the corresponding reference value. We call the MIC “central” if its reference value is 0. Otherwise we call the MIC non-central. A central MIC is often also written as the vector of the coefficients of its linear form, i.e., as [α0, α1, . . . , αn]. Central MIC's can be of two flavors: reference-less MIC's and referenced MIC's. A reference-less MIC is a central MIC for which the sum of its coefficients is zero.
For example, in standard differential signaling, the MIC coefficients are simply the pair [+1, −1] with the result compared against 0. This is a central reference-less MIC. In PAM-4 signaling, the same MIC is used, but two of the three MIC's have references. In other words, if the largest signal value is 1 and the smallest signal value is −1, the MIC's are given by the following 3 affine linear forms:

x 1 −x 2−⅔,x 1 −x 2 ,x 1 −x 2+⅔  [Eqn. 4]

In general, some of the coefficients of a MIC may be zero, in which case their corresponding inputs are simply discarded.
At times, it is advantageous to use a geometric view of a MIC, by considering a MIC as a hyper-plane in the N-dimensional Euclidean space. The MIC is then identified with the set of all vectors that evaluate to 0 for that MIC. For example, for the MIC [1,−1] with reference 0 the hyper-plane is just the line x=y in the two-dimensional Euclidean plane. We will often and interchangeably identify MIC's with their corresponding vectors, or their associated hyper-planes. In this geometric view, a MIC is central if its hyper-plane passes through the origin, and it is non-central if not.
Each of the K codewords in the code can be interpreted as points in an N dimensional Euclidean space. The task of the MIC's is to separate the points. A MIC that is not a don't care for two codewords separates the points if the points lie on opposite sides of the hyper-plane corresponding to the MIC.
 FIGS. 2 and 3 show the case of differential and PAM-4 signaling on two wires sending one and two bits per symbol, respectively. In the case of differential signaling, shown in FIG. 2, the hyper-plane is the line of angle 45 degrees passing through the origin, and the codewords are the points with coordinates (1,−1) and (−1,1). These codewords are separated by the hyper-plane, and they have equal distance from the hyper-plane. For PAM-4 signaling as shown in FIG. 3, the hyper-planes are the line of angle 45 degrees passing through the origin, and the two translations of this line by the vectors (⅔, −⅔) and (−⅔, ⅔). The codewords are the points (1,−1), (⅓,−⅓), (−⅓, ⅓) and (−1,1), all lying on the line perpendicular to the MIC's. As can be seen, the MIC's separate the codewords.
We will show new signaling methods designed based on the ISI-Ratio concept. The ISI-Ratio is defined for a MIC λ, with respect to the set C of codewords. Let Δm be the set of codeword indices that are active for MIC m (i.e., they are not don't cares for that MIC). In order to precisely define the ISI-Ratio, we need to distinguish the central MIC's (where the hyper-plane passes through the origin) and non-central MICs (where the hyper-plane does not pass through the origin as in the two MICs in the PAM-4 signaling) separately.
ISI-Ratio Calculation for Central MICs
Let d(Ck,MICm) be the distance between codeword Ck and the hyper-plane representing MICm. The ISI-Ratio for MICm is defined as:








ISIRatio
⁡

(
m
)


=




max

1
≤
k
≤
K


⁢

d
⁡

(


C
k

,

MIC
m


)





min

k
∈

Δ
m



⁢

d
⁡

(


C
k

,

MIC
m


)




.





[

Eqn
.

 

⁢
5

]







Geometrically, the ISI-Ratio may be seen to be the ratio of the maximum distance of any active codeword to the MIC hyper-plane, to the minimum distance of any active codeword to the MIC hyper plane. If we compute this quantity for the signaling examples above, we obtain the following numbers:
Differential Signaling:
ISI-Ratio is 1 for the MIC.
PAM-4 Signaling:
ISI-Ratio is 3 for the middle MIC (which is central).
These values may be verified by examining the differential signaling case of FIG. 2, where the two codeword points are equidistant from the MIC plane, representing a max/min distance ratio of 1. In the PAM-4 signaling of FIG. 3, a ratio of 3:1 is seen in the distances of the farthest to nearest codeword points to the central MIC plane.
Other examples will be presented addressing signaling design based on ISI-Ratio.
ISI-Ratio Calculation for Non-Central MICs
Let d(Ck,MICm) be the distance between codeword Ck and the hyper-plane representing the referenced MICm. Denote by d0(Ck, MICm) the distance between the codeword Ck and the shifted version of MICm passing through the origin. Then, the ISI-Ratio for the non-central MICm is defined as:








ISIRatio
⁡

(
m
)


=




max

1
≤
k
≤
K


⁢


d
0

⁡

(


C
k

,

MIC
m


)





min

k
∈

Δ
m



⁢

d
⁡

(


C
k

,

MIC
m


)




.





[

Eqn
.

 

⁢
6

]







By this formula, the ISI-Ratio for the two non-central MICs of PAM-4 signaling is also equal to 3. Therefore, the ISI-Ratio of all the MICs in a PAM-4 communication system is 3.
ISI-Ratio and Horizontal Eye-Opening
Each of the k codewords Ck k=1, . . . , K generates a pulse response of its own at the output of MICm which is given by:

P m,k(t)=Σrx=1 NMICm(rx)[Σtx=1 N C k(tx)P(t)*h rx,tx(t)]  [Eqn. 7]

Under the assumption that there is negligible crosstalk in the system and the channels hi,t(t) are all equal (=h(t)), the pulse response generated by codeword K at the output of MICm is given by:

P m,k(t)=[Σi=1 NMICm(i)C k(i)]P h(t)  [Eqn. 8]

where Ph(t)=P(t)*h(t) is the pulse response of the system, including all the linear equalizers, MICm(i) is the i-th coordinate of the m-th MIC, and Ck(i) is the i-th coordinate of the codeword Ck. Assuming that the MIC is central and its coefficients are normalized such that their sum of squares is equal to 1, the quantity |Σi=1 NMICm(i)Ck(i)| represents the distance between the codeword K and the central hyper-plane representing MICm. Note that the ISI-Ratio is invariant under nonzero scalar multiplications of the MIC's by arbitrary nonzero real numbers. Therefore, it can be assumed that the vectors representing the MIC's have norm 1 (i.e., the sum of squares of their coefficients is 1).

The signal at the output of MICm is the super-position of the pulse responses Pm,k(t) shifted in time by integer multiples of the UI length (=T) and for arbitrary choices of the codewords. Let us assume that t0 is the reference sampling time for the codeword C0. At time t0 we have

r m(t 0)=Σk P m,k(t 0 −kT)=Σk[Σi=1 NMICm(i)C k(i)]P h(t 0 −kT).  [Eqn. 9]

For a central MIC, the receiver eye at the MIC output is closed for the sampling time t in which rm(t) changes sign with respect to its sign at t0. This determines the horizontal opening of the eye at the MIC output. For many communication systems, the goal is to achieve very low detection error rates at the receiver (e.g., less than 10−12) and therefore, it is the worst-case codeword pattern that determines the eye-opening. The worst-case codeword pattern occurs when the codeword to be detected is the closest codeword to the hyper-plane representing MICm (we call it Cmin(m)) and the pre- and post-cursor codewords are at the farthest distance (we call it Cmax(m)) from that hyper-plane. Choosing these codewords, we can write:












r
m

⁡

(

t
0

)


=
 
⁢



d
⁡

(



C
min

⁡

(
m
)


,

MIC
m


)


⁢


P
h

⁡

(

t
0

)



-







 
⁢


∑
k

⁢

 

⁢


d
⁡

(



C
max

⁡

(
m
)


,

MIC
m


)


⁢


P
h

⁡

(


t
0

-
kT

)










=
 
⁢


d
⁡

(



C
min

⁡

(
m
)


,

MIC
m


)


⁡

[



P
h

⁡

(

t
0

)


-

ISIRatio
*

Σ
k

⁢


P
h

⁡

(


t
0

-
kT

)




]









[

Eqn
.

 

⁢
10

]







By changing the sampling phase t0, the eye closes whenever the term

P h(t 0)−ISIRatio*Σk P h(t 0 −kT)  [Eqn. 11]

changes sign. The higher the ISI-Ratio for the signaling scheme, the bigger the residual ISI we see from the neighboring codewords and the eye will close sooner. Note that for a given pulse response Ph(t) (determined by the channel, equalizers, transmitter pulse-shape and the baud-rate of the system), the horizontal opening depends only on the ISI-Ratio of the underlying signaling scheme. The higher the ISI-Ratio, the smaller the horizontal opening of the eye.

For the case of non-central signaling, it is the distance to the reference of the MIC, denoted by ref(m) that determines the horizontal opening of the eye. Therefore, Eqn. 8 is changed to:
            r m  ⁡  (  t 0  )   =   ⁢          ∑  i = 1  N  ⁢     ⁢    MIC m  ⁡  ( i )   ⁢   C min  ⁡  ( i )     -   ref ⁡  ( m )   ⁢   P h  ⁡  (  t 0  )    -        ∑ k  ⁢     ⁢   d 0  ⁡  (    C max  ⁡  ( m )   ,  MIC m   )         ⁢   P h  ⁡  (   t 0  - kt  )          =   ⁢   d ⁡  (    C min  ⁡  ( m )   ,  MIC m   )   ⁡  [    P h  ⁡  (  t 0  )   -  ISIRatio *  Σ k  ⁢   P h  ⁡  (   t 0  - kT  )     ]          [  Eqn .     ⁢ 12  ]       
again showing that the horizontal eye-opening is solely determined by the ISI-Ratio of the underlying MIC.

Signaling Design Based on the ISI-Ratio Metric

Based on the discussion above, we can design signaling schemes based on the ISI-Ratio concept. For purposes of description, examples are drawn from the domain of wire-line transmission systems, although no limitation is implied.
As a first example, we wish to send b bits of information over a channel, thus requiring us to have at least 2b codewords in our signaling scheme. We have also the following considerations in our design:
    The dimension N is equal to the number of wires (i.e. independent communications elements or sub-channels) in the channel. The codewords have all their coordinates in the range [−1, 1] because of voltage swing constraints at the transmitter.   
The goal is to find the codewords, the MICs, and the don't care pairs, such that the codewords can be distinguished by these MICs and the maximum ISI-Ratio of the MICs is minimized. As shown in the previous section, the MIC with the highest ISI-Ratio will dominate and the horizontal opening of its corresponding eye will determine the error rate of the entire communication system.
In the following examples a 4-wire transmission line is used, with channel characteristics based on the reference channel provide by TE (www.te.com) for 2 wires on a back-plane channel measured for the IEEE 802.3bj standard (found online at www-dot-ieee802.org/3/100GCU/public/channel.html). That described channel response was expanded to a 4 wire channel with crosstalk removed between wires. The baud rate was fixed at 8 GBaud per second. A continuous-time linear equalizer (CTLE) with equalization range between 0 dB to 12 dB and a 3-tap filter at the transmitter were assumed, with equalizer settings optimized to obtain the best horizontal eye openings. The pulse response of the resulting channel is shown in FIG. 4.
As examples of common practice signaling methods on this channel, FIG. 12 shows an eye-diagram for NRZ (throughput=4 Gbps/wire, horizontal opening=106.2 psec) and FIG. 13 shows the eye-diagrams for PAM-4 (throughput=8 Gbps/wire, horizontal opening=40.0 psec) signaling.
A first embodiment of a vector signaling code design is called P3 signaling, and uses 4 codewords (1, 0, −1), (−1, 0, 1), (0, 1, −1) and (0, −1, 1) to send 2 bits over 3 wires of the example channel. We consider the two following cases:
Case 1: We choose the MICs as (1, −1, 0) and (0, 1, −1). The outputs for the two MICs on the four codewords are the values 1, −1, −1, 1 and 1, −1, 2, −2, respectively. It is obvious from examination that the two MICs can distinguish the 4 codewords from each other. The ISI-Ratio for the first MIC is 1 (horizontal opening=106.2 psec) while the ISI-Ratio for the second MIC is 2 (horizontal opening=60 psec). The throughput is 5.33 Gbps/wire. The eye-diagrams are shown in FIG. 5.
Case 2: We choose the MICs as (1, −1, 0) and (½, ½, −1). The outputs of the second MIC becomes 3/2, −3/2, 3/2, −3/2. The two MICs can still distinguish the codewords but the ISI_Ratio is 1 for both MIC's (horizontal opening=106.2 psec for both MICs). The throughput is 5.33 Gbps/wire. The eye-diagrams are shown in FIG. 6.
This example confirms that MICs with the same ISI-Ratio on the same channel under the same clock rate lead to approximately the same horizontal eye openings, and that the right choice of the MICs is crucial for the signal integrity of the transmission system.
A second embodiment of a signaling design utilizes linear coding; that is, the signaling scheme is defined by means of a matrix-vector product. The vector contains the bits to be transmitted and the matrix defines the transformation applied to the bits in order to generate the codewords. In this scheme, one can in principle send N−1 bits over N wires. The vector representing the bits is of the form (0, ±1, ±1, . . . , ±1). The coding matrix has the first row as all ones and the other N−1 rows are orthogonal to first row and span the remaining (N−1)-dimensional subspace; thus, this is an orthogonal matrix as previously described herein. The MIC coefficients are found simply from the corresponding N−1 columns of the inverse of the coding matrix.
An interesting property of the linear coding scheme based on an orthogonal matrix is that the output of all the MICs are simply of the form ±1 and therefore the ISI-Ratio is guaranteed to be 1. As will be seen, this guarantee has a profound effect on communications system performance using such codes.
In a further embodiment, we can make use of the P3 code above and build the following Glasswing coding matrix to send 5 bits over 6 wires:
         S · A  = w  ⁢  
  ⁢   where ⁢     ⁢ A  =  [    1   1   1   1   1   1     1    - 1    0   0   0   0     1   1    - 2    0   0   0     0   0   0   1    - 1    0     0   0   0   1   1    - 2      1   1   1    - 1     - 1     - 1     ]       [  Eqn .     ⁢ 13  ]       
and S=a row vector of information bits [0, S0, S1, S2, S3, S4] representing antipodal weights (e.g., ±1 for logic bits 0, 1, or alternatively ±⅓), and w is the codeword vector to be transmitted [w0, w1, w2, w3, w4, w5]. If antipodal weights of ±1 are used, then the transmitted codewords may then be normalized by a factor of ⅓ to result in codewords having a quaternary alphabet of {±⅓, ±1}. Furthermore, because of the selection of the sub-channel code words of equation 13, the linear combinations of the sub-channel codes that form the codewords that are ultimately transmitted will provide a reduced alphabet of codeword elements. That is, at least one of the sub-channel code vectors has a non-normalized magnitude and wherein the row-wise linear combinations of the reduced-alphabet matrix provide a reduced alphabet. It may be observed that sub-channel code vectors having three non-zero elements comprise a first non-zero element twice as large as each of a second non-zero element and a third non-zero element, and a position of the first non-zero element is aligned to where only one other sub-channel codeword vector has a non-zero element.

The inverse matrix whose columns define the MIC coefficients is simply the transpose of the matrix A of Eqn. 13 with appropriate normalization, and was previously described as Eqn. 3. The throughput is 6.66 Gbps/wire. The eye-diagrams of this scheme are shown in FIG. 7A through FIG. 7E. The horizontal opening is 106.2 psec for all the MICs. The five bit over six wire or 5b6w code of Eqn. 13, MIC matrix of Eqn. 3, and codewords of Table 1 will herein be called the “Glasswing” code.
A third embodiment of a signaling design also utilizes linear coding and is called Ensemble-NRZ or ENRZ. A full description of ENRZ may be found in [Cronie I]. ENRZ has 8 codewords of the form ±perm(1, −⅓, −⅓, −⅓) where “perm” means all the permutations of the coefficients, and 3 MICs of the form (½, −½, ½, −½), (½, ½, −½, −½) and (½, −½, −½, ½), and can send 3 bits over 4 wires per unit interval. The coding matrix is a scaled version of the 4×4-Hadamard matrix:







A
=


1
3

⁡

[



1


1


1


1




1



-
1



1



-
1





1


1



-
1




-
1





1



-
1




-
1



1



]






[

Eqn
.

 

⁢
14

]







The scale factor ⅓ is chosen so that the final values are constrained to be between −1 and 1. The throughput is 6 Gbps/wire. The eye-diagrams for ENRZ signaling are shown in FIGS. 8A through 8C. The horizontal opening is 106.2 psec for the three MICs.
A fourth embodiment is a vector-signaling code design having the property of containing different MICs with different ISI-Ratios as well as non-active codewords for the MICs. This category of codes allows the designer to provide codes with fewer number of MICs compared to the codes with the same throughput and all ISI-Ratios equal. Moreover, as we see in the following examples, the MICs with smaller ISI-Ratio are generally ones that make the linear combination on more wires compared to the MICs with higher ISI-Ratios. Since these MICs provide more horizontal opening, this property makes these MICs more tolerant to higher skew when more wires are involved in the linear combination. An example of this design strategy is drawn from [Shokrollahi I], which describes a code having 24 codewords of the form ±(perm(1,1,0,−1)|−1) where “perm” means all the permutations of the coefficients. This code can send 4.5 bits over 5 wires in each unit interval. There are 7 MICs in this scheme, the first 6 are all the pairwise comparisons between the first four wires and all have ISI-Ratio 2. The last MIC has coefficients (¼, ¼, ¼, ¼, −1) and has ISI-Ratio 1. The throughput is 7.2 Gbps/wire. The eye-diagrams in s 9A and 9B show the wider horizontal opening of the last MIC (FIG. 9B, horizontal opening=106.2 psec) compared to the pairwise comparator MICs with higher ISI-Ratios (FIG. 9A, horizontal opening=62.5 psec).
The final example embodiment is a code that sends 8 bits over 8 wires using 13 MICs. The codewords are of the form ±(perm(1,1,0,−1) perm(−1,−1,0,1)) where “perm” means all the permutations of the coefficients. The MIC's are 6 pairwise comparators on the first four wires, 6 pairwise comparators on the second four wires, and one MIC (1,1,1,1,−1,−1,−1,−1)/4. The last input MIC has ISI ratio of 1 while each of the pairwise comparator MICs has an ISI-Ratio of 2. The throughput is 8 Gbps/wire. The eye-diagrams are shown in FIGS. 10A and 10B. The MIC with ISI-Ratio 1 has horizontal opening of 106.2 psec (FIG. 10B) while the other MICs with ISI-Ratio 2 has horizontal opening of 62.5 psec (FIG. 10A).
To allow direct comparison of these embodiments, we calculate the horizontal eye openings for the previously described ENRZ, NRZ and PAM-4 signaling schemes and then plot the relationship of horizontal eye opening as a function of the throughput. The throughput values are normalized for comparison purposes, as the required baud rate to obtain the same throughput differ for each of these signaling schemes.
The result is shown in the graph of FIG. 11. Comparing NRZ and ENRZ, the ISI-Ratio of both is equal to 1 while the baud rate of ENRZ is ⅔ that of NRZ. Comparing PAM4 and ENRZ, the baud rate of ENRZ is 4/3 of PAM4, but its ISI-Ratio is 3 times smaller. Thus, the embodiment having the lowest ISI-Ratio, ENRZ with its ISI-Ratio of 1, is the overall winner across the throughput range, illustrating that low ISI-Ratio is a predictor of good communications system performance.
Normalizing Sub-channel Gain
Performing a numerical analysis of the codes of Table 1 and the receiver defined by the matrix of Eqn. 3, it may be observed that comparators defined by matrix rows 1, 3, and 5 produce output values of ±⅔, whereas the comparators defined by matrix rows 2 and 4 produce output values of ±1. The loss in vertical eye opening compared to differential signaling is therefore 20*log10(3)=˜9.5 dB. This output level variation is the result of our loosened definition of orthogonality for the receive matrix, as the non-unity values of the diagonal MTM=D represent non-unity gains for the corresponding sub-channels. As will be apparent to one familiar with the art, normalizing the matrix (i.e. scaling its elements such that the diagonal values are 1), will result in a system having constant unity gain across all sub-channels. However, such known normalization methods may lead to suboptimal embodiments as the large number of distinct normalized coefficient values, in many cases including irrational values, are difficult to embody in a practical system.
At least one embodiment retains the unnormalized matrix as exemplified by Eqn. 3 with its convenient-to-implement coefficient values, and instead compensates for the variation of sub-channel amplitude by modifying the input signal amplitudes modulating the various sub-channel. For example, a hypothetical system having eight sub-channels of unity gain and one sub-channel of 0.8 gain will ultimately be SNR limited by the latter output. Thus, increasing the last sub-channel's transmission input to {+1.2, −1.2} rather than {+1, −1} will bring up the corresponding channel output. Alternatively, decreasing all other sub-channel inputs to {+0.8, −0.8} will lower the corresponding channel outputs, such that all channels have equal output levels with less transmit power required.
This compensation technique is not without cost, however. As taught by [Shokrollahi IV], modifying the input vector in this manner leads to an increase in the alphabet size needed (and thus, the number of discrete signal levels the transmitter must generate) to communicate the codewords over the channel. [Shokrollahi IV] teaches numeric methods to select suitable modulation amplitudes that result in closer matching of sub-channel outputs with minimal expansion of the required alphabet size.
Applying the procedure taught by [Shokrollahi IV], the optimal initial code set for Glasswing is calculated to be (0, ±⅜, ±¼, ±⅜, ±¼, ±⅜) with the corresponding code having an alphabet of size 10 given by (1, ⅞, ½, ¼, ⅛, −⅛, −¼, −½, −⅞, −1). The resulting codewords are shown in Table 2, with the new code herein called the 5b6w_10_5 code. One embodiment of a driver generating these signal levels is shown as FIG. 22. Each driver slice 1010 produces one wire output signal, with multiple driver elements on each slice being enabled in combination so as to produce the 10 distinct output levels required.



 
 
 
 
 
TABLE 2
 
 
 
 
 
±[1, ¼, −1/8, ¼, −1/2, −7/8]
±[1, ¼, −1/8, −1/4, −1, ⅛]
 
 
±[¼, 1, −1/8, ¼, −1/2, −7/8]
±[¼, 1, −1/8, −1/4, −1, ⅛]
 
 
±[½, −1/4, 7 /8, ¼, −1/2, −7/8]
±[½, −1/4, 7 /8, −1/4, −1, ⅛]
 
 
±[ −1/4, ½, 7 /8, ¼, −1/2, −7/8]
±[ −1/4, ½, 7 /8, −1/4, −1, ⅛]
 
 
±[1, ¼, −1/8, −1/2, ¼, −7/8]
±[1, ¼, −1/8, −1, −1/4, ⅛]
 
 
±[¼, 1, −1/8, −1/2, ¼, −7/8]
±[¼, 1, −1/8, −1, −1/4, ⅛]
 
 
±[½, −1/4, 7 /8, −1/2, ¼, −7/8]
±[½, −1/4, 7 /8, −1, −1/4, ⅛]
 
 
±[ −1/4, ½, 7 /8, −1/2, ¼, −7/8]
±[ −1/4, ½, 7 /8, −1, −1/4, ⅛]
 
 
 
 







With this code all comparators as in Eqn. 3 produce output values of +¾. The increase in vertical eye opening compared to the unmodified 5b6w code is 20*log10((¾)/(⅔))=˜1 dB. The termination power of 5b6w_10_5 is about 88% of the termination power of the unmodified 5b6w code, so even at a smaller termination power, 5b6w_10_5 leads to a fractionally improved vertical eye opening. However, the implementation cost to obtain this improvement is the added complexity within the transmitter to encode data into an internal representation capable of selecting among ten rather than four symbol values per wire, and line drivers capable of generating ten discrete output levels rather than four. Such a transmitter embodiment would be fully compatible with any Glasswing receiver defined by the matrix of Eqn. 3, and would require less line driver power than an unmodified 5b6w transmit driver. Because of this generally disadvantageous cost/benefit tradeoff, most embodiments of Glasswing transmitters are expected to utilize unmodified 5b6w signal levels; where they are cost-effective, alternative embodiments incorporating the 5b6w_10_5 modifications may transparently be interchanged and/or interoperate with unmodified ones.
Basic Glasswing Receiver
An embodiment of the Glasswing receiver as defined by the matrix of Eqn. 3 is shown in FIG. 14. The six input wires are w0 through w5, and the five sub-channel outputs are S0 through S5. In the drawing convention used here, each of the inputs of the multiple-input comparators 210 through 250 is identified by a weight, representing the relative contribution of that input to the final result output, as defined by the matrix rows of Eqn. 3 defining each MIC. Thus, 210 and 230 may be seen to be conventional dual input differential comparators, each having one positive and one negative input of equal and opposite weight. Comparators 220 and 240 each have two positive inputs each contributing one half to the total positive value, and one input contributing the entire negative value. Comparator 250 has three inputs each contributing one third to the total positive value, and three inputs each contributing one third to the total negative value.
Embodiments of the five multi-input comparators corresponding to rows two through six of the matrix of Eqn. 3 may use the expanded differential pair design of [Holden I] or the alternative design of [Ulrich I]. In some embodiments, Continuous-Time Linear Equalization (CTLE) is also incorporated in the multi-wire comparator stage. Transistor-level schematics of such embodiments suitable for use with Glasswing are described in [Shokrollahi IV] and provided as examples herein as FIGS. 16 through 20. Each design is shown both with and without integrated CTLE and where applicable, alternative embodiments are illustrated.
The embodiment of FIG. 16 or its alternative embodiment of FIG. 17 is suitable for use as comparator 250 of FIG. 14. The embodiment of FIG. 18 or its alternative embodiment of FIG. 19 is suitable for use as comparator 220, and with the obvious substitution of inputs w0, w1, and w2 with w3, w4, and w5, for use as comparator 240. The embodiment of FIG. 20 is suitable for use as comparator 210, and with the same substitution of inputs, for comparator 230.
In general, Decision Feedback Equalization (DFE) techniques are not required in a typical Glasswing embodiment, where the channel length is typically small and signal propagation characteristics good. No limitation is implied, however, as DFE and other known art methods may be combined in a straightforward manner with the described invention. In at least some such embodiments, DFE is performed not on the received wire signals, but instead on the sub-channels. In such configurations, the DFE history and correction computations may be performed on binary signal values, rather than on quaternary (for 5b6w) or decinary (for 5b6w_10_5) wire signals, as would be required where DFE is performed directly on wire signals.
Glasswing Transmitter
A variety of known art solutions may be applied to a Glasswing transmitter, depending on the specific characteristics of the communications channel and the process used for fabricating the semiconductor devices. Extremely short and/or moderate data rate Glasswing channels may utilize high impedance “CMOS-like” point-to-point interconnections, which are optimally driven using conventional voltage-mode drivers. Higher speed and/or longer channels having matched impedance terminations may preferably be driven using current-mode drivers.
It will be apparent to one skilled in the art that the required multilevel output drivers represent a specialized instance of Digital-to-Analog (D/A) conversion, a well-known field in the art. Thus, the corpus of known methods of D/A conversion, including those based on resistive chains, resistive ladders, summation of regulated voltages or currents, or selection among regulated voltages or currents, may be used in association with the present invention. Regulation may be to absolute values, such as a predetermined voltage or current, or may be relative or proportional to a provided level such as the integrated circuit supply voltage.
One embodiment of a resistive source terminated driver for a 5b6w transmitter using the teachings of [Ulrich III] is shown in FIG. 21. Each driver slice 910 produces one wire output signal, with multiple driver elements on each slice being enabled in combination so as to produce the four distinct output levels which must be generated by the transmitter, representing the codeword alphabet of +1, +⅓, −⅓, and −1 symbols. Thus, as will be obvious to one familiar with the art, the output of Encoder in FIG. 21 is comprised of at least two binary selector signals per driver slice 910, allowing selection of output values representing at least the alphabet of four symbols per wire. Larger alphabets may be utilized as previously described for optimization of Glasswing receive channel gain by utilizing modified modulation values, at the cost of additional transmitter complexity such as wider sets of selector signals between the Encoder and the wire drivers to enable selection of output values representing at least the larger alphabet set. One embodiment of a driver generating multiple signal levels is shown as FIG. 22.
Known transmission driver equalization techniques such as Finite Impulse Response filtering may be used in combination with Glasswing, as required by the particular channel characteristics and system design goals of the embodiment.
In one embodiment, a method 2300 is described with respect to FIG. 23. At block 2302 a set of information bits is received. At block 2304, a reduced-alphabet codeword vector is generated with an encoder. The encoder forms a weighted sum of sub-channel code vectors wherein a weighting of each sub-channel code vector is based in part on a corresponding antipodal weight determined by a corresponding information bit in the set of received bits. In various embodiments, the encoder is an orthogonal encoding logic circuit, and it generates a reduced-alphabet codeword vector by mapping the received set of information bits to a respective reduced-alphabet codeword vector and outputting a reduced-alphabet codeword vector selector signal. The selector signal may then be provided to the plurality of line drivers. Each line driver of the plurality of line drivers uses a portion of the reduced-alphabet codeword vector selector signal to output a corresponding current or voltage representing the reduced-alphabet codeword vector element. As described previously, the sub-channel code vectors form a reduced-alphabet weight matrix, and they are also are mutually orthogonal and orthogonal to a common mode vector.
At block 2306, the reduced-alphabet codeword vector is transmitted using a plurality of line drivers. In particular, the reduced-alphabet codeword vector comprises a plurality of reduced-alphabet codeword vector elements, and each reduced-alphabet codeword vector element is transmitted on a wire of a multi-wire communication bus by a respective one of the plurality of line drivers. In some embodiments, the reduced-alphabet codeword vector elements are selected from the normalized set of elements {+1, +⅓, −⅓, −1}.
The method 2300 may be used with a system having five sub-channel vectors, for use with a six-wire multi-wire communication bus. The antipodal weights are selected from the normalized set of elements {+1, −1}. Alternative methods may modulate an antipodal weight of at least one sub-channel according to a clock signal. Further, in some embodiments, a voltage offset may be modeled as including a constant weight applied to the common mode sub-channel vector.
A method 2400 will be described with respect to FIG. 24. At block 2402, a set of signals is received over a multi-wire communications bus. The set of signals represents a reduced-alphabet codeword vector formed from an antipodal-weighted sum of sub-channel code vectors. At block 2404 a plurality of sub-channel multi-input comparators generates a plurality of sub-channel output signals. Each multi-input comparator of the plurality of multi-input comparators implements an input weight vector corresponding to a sub-channel code vector, and outputs an antipodal output signal. At block 2406, a set of information bits is determined based on the respective antipodal output signals, such as by slicing the antipodal output signals with respect to a reference value. In one embodiment, the reduced-alphabet codeword vector elements are from the normalized set of elements {+1, +⅓, −⅓, −1}, and there are five sub-channel multi-input comparators, and the multi-wire communication bus comprises six wires.
Glasswing with Embedded Clock
The embodiment of FIG. 15 utilizes the basic Glasswing receiver of FIG. 14, further incorporating an embedded clock signal carried by one sub-channel. Typically, when embedding a clock in a sub-channel, the highest-amplitude channel is chosen to carry the clock, as taught by [Shokrollahi III]. As a general design practice, this choice generally results in the clock channel having the best SNR, and thus the cleanest output results.
However, with the modest gain variations seen across the various Glasswing channels in actual embodiments, there is no significant practical motivation to select a particular sub-channel for the clock based on that criterion. In the embodiment of FIG. 15, the sub-channel defined by the bottom row of the matrix of Eqn. 3 is designated to carry the clock, as its symmetry and delay characteristics in a practical embodiment were found to be conducive to integration with the delay-and-sample behavior of conventional clock/data recovery circuits. One example of such a circuit is shown as 380, being comprised of clock edge detector 382; a fixed, adjustable, or DLL-controlled time delay 385, and sample-and-hold or equivalent data samplers 388.
Embodiments
In one embodiment, a method comprises: receiving a set of information bits; generating a reduced-alphabet codeword vector with an encoder by forming a weighted sum of sub-channel code vectors wherein a weighting of each sub-channel code vector is based in part on a corresponding antipodal weight determined by a corresponding information bit in the set of received bits, and wherein the sub-channel code vectors form a reduced-alphabet weight matrix, and are mutually orthogonal and orthogonal to a common mode vector; and, transmitting the reduced-alphabet codeword vector using a plurality of line drivers, wherein the reduced-alphabet codeword vector comprises a plurality of reduced-alphabet codeword vector elements, and each reduced-alphabet codeword vector element is transmitted on a wire of a multi-wire communication bus by a respective one of the plurality of line drivers.
In one embodiment, the encoder is an orthogonal encoding logic circuit, and generating a reduced-alphabet codeword vector comprises mapping the received set of information bits to a respective reduced-alphabet codeword vector and outputting a reduced-alphabet codeword vector selector signal.
In one embodiment, the reduced-alphabet codeword vector selector signal is provided to the plurality of line drivers, and wherein each line driver of the plurality of line drivers uses a portion of the reduced-alphabet codeword vector selector signal to output a corresponding a current or voltage representing the reduced-alphabet codeword vector element.
In one embodiment, at least one of the sub-channel code vectors has a non-normalized magnitude and wherein the row-wise linear combinations of the reduced-alphabet provide a reduced alphabet.
In one embodiment, the reduced-alphabet codeword vector elements are selected from the normalized set of elements {+1, +⅓, −⅓, −1}. There are five sub-channel vectors, and the multi-wire communication bus comprises six wires.
In one embodiment, the antipodal weights are selected from the normalized set of elements {+1, −1}. In one embodiment, an antipodal weight of at least one sub-channel is modulated according to a clock signal.
In one embodiment, a non-modulated common mode sub-channel vector is included to provide a voltage offset.
In one embodiment, sub-channel code vectors having three non-zero elements comprise a first non-zero element twice as large as each of a second non-zero element and a third non-zero element, and a position of the first non-zero element is aligned to where only one other sub-channel codeword vector has a non-zero element.
In one embodiment, a method comprises: receiving a set of signals over a multi-wire communications bus, the set of signals representing a reduced-alphabet codeword vector formed from an antipodal-weighted sum of sub-channel code vectors; generating a plurality of sub-channel output signals using a plurality of sub-channel multi-input comparators, each multi-input comparator of the plurality of multi-input comparators implementing an input weight vector corresponding to a sub-channel code vector, and outputting an antipodal output signal; determining a set of information bits from the respective antipodal output signals.
In one embodiment, the method may determine the set of information bits is done using a plurality of signal slicers. In one embodiment, the reduced-alphabet codeword vector elements are from the normalized set of elements {+1, +⅓, −⅓, −1}, and there are five sub-channel multi-input comparators, and the multi-wire communication bus comprises six wires.
In one embodiment, an apparatus comprises: a plurality of signal conductors for receiving a set of information bits; an encoder connected to the signal conductors for generating a reduced-alphabet codeword vector by forming a sum of sub-channel code vectors wherein a weighting of each sub-channel code vector is based in part on a corresponding antipodal weight determined by a corresponding information bit in the set of received bits, and wherein the sub-channel code vectors form a reduced-alphabet weight matrix, and are mutually orthogonal and orthogonal to a common mode vector; and a plurality of line drivers for transmitting the reduced alphabet codeword vector, wherein the reduced-alphabet codeword vector comprises a plurality of reduced-alphabet codeword vector elements, and each reduced-alphabet codeword vector element is transmitted on a wire of a multi-wire communication bus by a respective one of the plurality of line drivers.
In one embodiment, the encoder further comprises a logic circuit that maps the received set of information bits to a respective reduced-alphabet codeword vector and outputs a reduced-alphabet codeword vector selector signal.
In one embodiment, the apparatus includes wire connections for providing the reduced-alphabet codeword vector selector signal to the plurality of line drivers, wherein each line driver of the plurality of line drivers uses a portion of the reduced-alphabet codeword vector selector signal to output a corresponding a current or voltage representing the reduced-alphabet codeword vector element.
In one embodiment, the encoder is configured to produce a reduced-alphabet comprising a set of elements {+1, +⅓, −⅓, −1}. The multi-wire communications bus comprises six wires to transmit a set of five sub-channel code vectors. In one embodiment, the encoder is configured to select the antipodal weights from a set of elements {+1,−1}.
The encoder is configured to modulate at least one sub-channel code vector according to a clock signal. The encoder is configured to provide a voltage offset by providing a non-modulated common mode sub-channel vector.
In one embodiment, an apparatus comprises: a multi-wire communications bus configured to receive a set of signals, the set of signals representing a reduced-alphabet codeword vector formed from an antipodal-weighted sum of sub-channel code vectors; a plurality of sub-channel multi-input comparators, each multi-input comparator of the plurality of multi-input comparators implementing an input weight vector corresponding to a sub-channel code vector, and outputting an antipodal output signal; a plurality of signal slicers configured to determine a set of information bits from the respective antipodal output signals.
In one embodiment, the apparatus may receive a reduced-alphabet codeword vector elements selected from the normalized set of elements {+1, +⅓, −⅓, −1}, and there are five sub-channel multi-input comparators, and the multi-wire communication bus comprises six wires.
In a further embodiment, a diagnostic tool is provided using a method comprising: receiving a plurality of candidate codewords; calculating a ratio for each of a plurality of multi-input comparators, of the maximum distance of an active codeword to a multi-input comparator hyperplane passing through the origin and the minimum distance of an active codeword to the multi-input comparator hyperplane passing through the origin; and exporting the ratio for each central multi-input comparator for analysis. Furthermore, the hyperplane may contain an offset and is shifted, and the ratio is the maximum distance of an active codeword to the shifted hyperplane to the minimum distance of an active codeword to the shifted hyperplane.
The examples presented herein illustrate the use of vector signaling codes for point-to-point wire communications. For purposes of explanation, interconnection between a first transmitting device and a second receiving device have been described as unidirectional signaling networks. However, this should not been seen in any way as limiting the scope of the described invention. The methods disclosed in this application are equally applicable to networks capable of alternating signaling direction (i.e. half duplex), or of providing simultaneous communication between separate transmitters and receivers in both directions (i.e. full duplex.) Similarly, more than one instance of the described invention may be used essentially in parallel to communicate wider data words and/or provide higher overall communication bandwidth, with individual instances having individual embedded clocks, or two or more instances sharing a common clock. Other communication media including optical and wireless communications may similarly be used rather than the described wire interconnections. Thus, descriptive terms herein such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “optical intensity”, “RF modulation”, etc. As used herein, the term “physical signal” includes any suitable behavior and/or attribute of a physical phenomenon capable of conveying information. Physical signals may be tangible and non-transitory.

We claim:
 
1. A method comprising:
receiving a set of input signals;
generating symbols of a normalized-gain codeword based on a weighted sum of a set of subchannels, each subchannel weighted with a corresponding input signal, wherein the set of subchannels correspond to rows of a set of rows selected from a normalized orthogonal matrix, each row of the set of rows (i) mutually orthogonal and (ii) orthogonal to an all-one row, wherein a first number of symbols of the normalized-gain codeword affected by a first subchannel is different from a second number of symbols of the normalized-gain codeword affected by a second subchannel, the first and second subchannels having equal subchannel gain; and
transmitting the symbols of the normalized-gain codeword on a plurality of wires of a multi-wire bus, each symbol of the normalized-gain codeword transmitted via a respective wire of the plurality of wires of the multi-wire bus.


  
2. The method of claim 1, wherein the normalized orthogonal matrix is represented by the matrix:




 



1


1


1


1


1


1





3
8




-

3
8




0


0


0


0





1
4




1
4




-

1
2




0


0


0




0


0


0



3
8




-

3
8




0




0


0


0



1
4




1
4




-

1
2







3
8




3
8




3
8




-

3
8





-

3
8





-

3
8










  
3. The method of claim 1, wherein the normalized orthogonal matrix is generated from an unnormalized matrix, and wherein generating the normalized matrix comprises:
generating a normalized set of signals by adjusting signal levels of the received input signals, and weighting subchannels of the unnormalized matrix with corresponding signals of the normalized set of signals.


  
4. The method of claim 3, wherein the unnormalized matrix is represented by the matrix:




 



1


1


1


1


1


1




1



-
1



0


0


0


0




1


1



-
2



0


0


0




0


0


0


1



-
1



0




0


0


0


1


1



-
2





1


1


1



-
1




-
1




-
1









  
5. The method of claim 3, wherein adjusting the signal levels of input signals comprises adjusting signal levels of lower-magnitude signals to a magnitude of a highest-magnitude signal of the set of input signals.

  
6. The method of claim 3, wherein adjusting the signal levels of input signals comprises adjusting signal levels of higher-magnitude signals to a magnitude of a lower-magnitude signal of the set of input signals.

  
7. The method of claim 1, further comprising:
receiving the symbols of the normalized-gain codeword via the multi-wire bus;
generating a set of comparator outputs, using a set of multi-input comparators (MICs), each comparator output generated based on a respective combination of a respective subset of symbols of the normalized-gain codeword according to a respective set of input-weighting coefficients, and wherein each comparator output has an equal magnitude; and
generating a set of output bits by slicing the set of comparator outputs.


  
8. The method of claim 7, wherein the respective set of input-weighting coefficients corresponds to a respective row of the set of rows of a code receiver matrix.

  
9. The method of claim 4, wherein the normalized set of input signals are selected from a basis vector [0, ±⅜, ±¼, ±⅜, ±¼, ±⅜].

  
10. An apparatus comprising:
an encoder configured to receive a set of input signals, and to responsively generate symbols of a normalized-gain codeword based on a weighted sum of a set of subchannels, each subchannel weighted with a corresponding input signal, wherein the set of subchannels correspond to rows of a set of rows selected from a normalized orthogonal matrix, each row of the set of rows (i) mutually orthogonal and (ii) orthogonal to an all-one row, wherein a first number of symbols of the normalized-gain codeword affected by a first subchannel is different from a second number of symbols of the normalized-gain codeword affected by a second subchannel, the first and second subchannels having equal subchannel gain; and
a plurality of line drivers configured to transmit the symbols of the normalized-gain codeword on a plurality of wires of a multi-wire bus, each symbol of the normalized-gain codeword transmitted via a respective wire of the plurality of wires of the multi-wire bus multiwire bus.


  
11. The apparatus of claim 10, wherein the normalized orthogonal matrix is represented by the matrix:




 



1


1


1


1


1


1





3
8




-

3
8




0


0


0


0





1
4




1
4




-

1
2




0


0


0




0


0


0



3
8




-

3
8




0




0


0


0



1
4




1
4




-

1
2







3
8




3
8




3
8




-

3
8





-

3
8





-

3
8










  
12. The apparatus of claim 10, wherein the normalized orthogonal matrix is generated from an unnormalized matrix, and wherein the apparatus further comprises:
a scaling unit configured to generate a normalized set of input signals by adjusting signal levels of the received input signals, and to weight subchannels of the unnormalized matrix with corresponding signals of the normalized set of input signals.


  
13. The apparatus of claim 12, wherein the unnormalized matrix is represented by the matrix:




 



1


1


1


1


1


1




1



-
1



0


0


0


0




1


1



-
2



0


0


0




0


0


0


1



-
1



0




0


0


0


1


1



-
2





1


1


1



-
1




-
1




-
1









  
14. The apparatus of claim 13, wherein the normalized set of input signals are selected from a basis vector [0, ±⅜, ±¼, ±⅜, ±¼, ±⅜].

  
15. The apparatus of claim 12, wherein the scaling unit is configured to adjust signal levels of lower-magnitude signals to a magnitude of a highest-magnitude signal of the set of input signals.

  
16. The apparatus of claim 12, wherein the scaling unit is configured to adjust signal levels of higher-magnitude signals to a magnitude of a lower-magnitude signal of the set of input signals.

  
17. The apparatus of claim 10, further comprising:
a plurality of multi-input comparators (MICs) configured to receive the symbols of the normalized-gain codeword via the multi-wire bus, and to generate a set of comparator outputs, each comparator output generated based on a respective combination of a respective subset of symbols of the normalized-gain codeword according to a respective set of input-weighting coefficients, and wherein each comparator output has an equal magnitude; and
a plurality of slicers configured to generate a set of output bits by slicing the set of comparator outputs.


  
18. The apparatus of claim 17, wherein the respective set of input-weighting coefficients corresponds to a respective row of the set of rows of a code receiver matrix.