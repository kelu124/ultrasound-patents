Source: [US10372665B2](https://patents.google.com/patent/US10372665B2)

# [US10372665B2](US10372665B2.md) - [US10372665B2](US10372665B2.md) - Multiphase data receiver with distributed DFE

## Details

* Date: 2016-10-24
* Inventor: Kandou Labs SA
* Beneficiary: Armin Tajalli

## Other patents

### Backwards
 * US668687A
 * US780883A
 * US3196351A
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4276543A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4722084A
 * US4772845A
 * US4774498A
 * US4864303A
 * US4897657A
 * [US4974211A](US4974211A.md)
 * US5017924A
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5266907A
 * US5283761A
 * US5287305A
 * US5311516A
 * US5331320A
 * [US5412689A](US5412689A.md)
 * US5449895A
 * US5459465A
 * US5461379A
 * US5510736A
 * US5511119A
 * US5553097A
 * US5566193A
 * US5599550A
 * US5626651A
 * US5629651A
 * US5659353A
 * US5727006A
 * US5748948A
 * US5802356A
 * [US5825808A](US5825808A.md)
 * US5856935A
 * US5875202A
 * US5945935A
 * US5949060A
 * US5982954A
 * US5995016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6119263A
 * US6172634B1
 * US6175230B1
 * US6232908B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US6316987B1
 * US20010055344A1
 * US6346907B1
 * US20020034191A1
 * US20020044316A1
 * US6378073B1
 * US6384758B1
 * US20020057592A1
 * US6398359B1
 * US6404820B1
 * US6417737B1
 * US6433800B1
 * [US6452420B1](US6452420B1.md)
 * US20020154633A1
 * US6473877B1
 * US20020163881A1
 * US20020167339A1
 * US6483828B1
 * US20020174373A1
 * US20020181607A1
 * US6509773B2
 * US20030016770A1
 * US20030016763A1
 * US6522699B1
 * US20030046618A1
 * [US6556628B1](US6556628B1.md)
 * US20030085763A1
 * US6563382B1
 * JP2003163612A
 * US20030146783A1
 * US6621427B2
 * US20030174023A1
 * US6624699B2
 * US20030185310A1
 * US6650638B1
 * US20030218558A1
 * [US6661355B2](US6661355B2.md)
 * US6664355B2
 * US6690739B1
 * US20040027185A1
 * [US6766342B2](US6766342B2.md)
 * US20040146117A1
 * US6772351B1
 * US20040155802A1
 * US20040161019A1
 * US20040169529A1
 * US6839587B2
 * [US6839429B1](US6839429B1.md)
 * WO2005002162A1
 * US6854030B2
 * US6865234B1
 * US6865236B1
 * US20050063493A1
 * US6876317B2
 * US20050134380A1
 * US6927709B2
 * US20050174841A1
 * US20050195000A1
 * US20050201491A1
 * CN1671092A
 * US20050213686A1
 * US20050220182A1
 * [US6954492B1](US6954492B1.md)
 * US6963622B2
 * US6972701B2
 * US6973613B2
 * US20050270098A1
 * US6976194B2
 * [US6990138B2](US6990138B2.md)
 * US6993311B2
 * [US6999516B1](US6999516B1.md)
 * US20060036668A1
 * US7023817B2
 * US7039136B2
 * US20060097786A1
 * US20060103463A1
 * US7053802B2
 * US20060120486A1
 * US20060126751A1
 * US20060133538A1
 * US20060140324A1
 * US7080288B2
 * US20060159005A1
 * US7082557B2
 * US7085153B2
 * US20060233291A1
 * US7127003B2
 * CN1864346A
 * [US7142612B2](US7142612B2.md)
 * US7142865B2
 * US20070001723A1
 * US20070002954A1
 * US7164631B2
 * US7167019B2
 * US20070030796A1
 * US7176823B2
 * [US7180949B2](US7180949B2.md)
 * US7199728B2
 * US20070076871A1
 * US20070103338A1
 * US20070121716A1
 * US7231558B2
 * US20070182487A1
 * US20070204205A1
 * US20070201546A1
 * US7269212B1
 * US7269130B2
 * US20070263711A1
 * US20070283210A1
 * US20080007367A1
 * US20080012598A1
 * US7335976B2
 * US7336112B1
 * US7339990B2
 * US7346819B2
 * US20080069198A1
 * US7348989B2
 * US7356213B1
 * US7358869B1
 * US7362697B2
 * US7366942B2
 * US20080104374A1
 * US7370264B2
 * US7372390B2
 * EP1926267A1
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US7397302B2
 * US7400276B1
 * US20080187037A1
 * US20080192621A1
 * US7462956B2
 * US20080317188A1
 * US7496162B2
 * US20090059782A1
 * EP2039221A1
 * US20090115523A1
 * US7535957B2
 * US7539532B2
 * US20090154604A1
 * CN101478286A
 * WO2009084121A1
 * US20090195281A1
 * US7599390B2
 * US20090262876A1
 * US7613234B2
 * US7616075B2
 * US7620116B2
 * [US7633850B2](US7633850B2.md)
 * US20090316730A1
 * US7639596B2
 * US20090323864A1
 * US7650525B1
 * US20100020862A1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US20100081451A1
 * US7694204B2
 * US7697915B2
 * US7698088B2
 * US7706524B2
 * US7706456B2
 * US20100148819A1
 * US20100180143A1
 * US7768312B2
 * US20100215087A1
 * US20100215112A1
 * US7787572B2
 * US20100235673A1
 * US7804361B2
 * US7808456B2
 * US20100271107A1
 * US20100283894A1
 * US20100296556A1
 * US7841909B2
 * US20100309964A1
 * US7869546B2
 * US7869497B2
 * US7873115B2
 * US20110014865A1
 * US7882413B2
 * US20110028089A1
 * US20110032977A1
 * US7899653B2
 * US20110051854A1
 * US20110072330A1
 * US20110074488A1
 * US20110084737A1
 * US7933770B2
 * US20110103508A1
 * US8000664B2
 * US20110228864A1
 * WO2011119359A2
 * US8030999B2
 * US8036300B2
 * US8050332B2
 * US20110268225A1
 * US8055095B2
 * US8064535B2
 * US20110286497A1
 * [US20110299555A1](US20110299555A1.md)
 * US20110302478A1
 * US8085172B2
 * US20110317559A1
 * US8106806B2
 * US8149906B2
 * [US8159376B2](US8159376B2.md)
 * US8180931B2
 * US8185807B2
 * US20120133438A1
 * US8199849B2
 * US8199863B2
 * US20120152901A1
 * US20120161945A1
 * US8218670B2
 * US8233544B2
 * US8245094B2
 * US20120213299A1
 * US8253454B2
 * US8279094B2
 * US8279745B2
 * US20120257683A1
 * US8289914B2
 * US8295250B2
 * US8295336B2
 * US8310389B1
 * US8341492B2
 * US20120327993A1
 * US20130010892A1
 * US20130013870A1
 * US8359445B2
 * US8365035B2
 * US8406316B2
 * US8429495B2
 * US8429492B2
 * US20130106513A1
 * US8437440B1
 * US20130114519A1
 * US20130114663A1
 * US8443223B2
 * US8442099B1
 * US20130129019A1
 * US20130147553A1
 * US8472513B2
 * US20130188656A1
 * US8498368B1
 * US20130195155A1
 * US20130202065A1
 * US20130215954A1
 * US8520348B2
 * US8547272B2
 * US20130259113A1
 * US20130271194A1
 * US8578246B2
 * US8588254B2
 * US20130307614A1
 * US8593305B1
 * US20130314142A1
 * US20130315501A1
 * US20130322512A1
 * US8602643B2
 * US8604879B2
 * US20130346830A1
 * US8620166B2
 * US8638241B2
 * US8643437B2
 * US8649460B2
 * US8674861B2
 * US8687968B2
 * US8718184B1
 * US20140159769A1
 * US8755426B1
 * US20140177696A1
 * US8773964B2
 * US8780687B2
 * US8782578B2
 * US8791735B1
 * US8831440B2
 * US20140266440A1
 * US20140269130A1
 * US8841936B2
 * US20140286381A1
 * US8879660B1
 * US8898504B2
 * US8938171B2
 * US8951072B2
 * US20150049798A1
 * US8975948B2
 * US20150070201A1
 * US20150078479A1
 * US8989317B1
 * US20150117579A1
 * US9036764B1
 * US20150146771A1
 * US9059816B1
 * US20150180642A1
 * US9069995B1
 * US9077386B1
 * US9083576B1
 * US9093791B2
 * US9100232B1
 * US9124557B2
 * US20150249559A1
 * US9148087B1
 * US9152495B2
 * US9172412B2
 * US9178503B2
 * US20150319015A1
 * US9183085B1
 * US20150333940A1
 * US9197470B2
 * US20150349835A1
 * US20150380087A1
 * US20150381232A1
 * US20160020796A1
 * US20160020824A1
 * US20160036616A1
 * US9281785B2
 * [US9288082B1](US9288082B1.md)
 * US9292716B2
 * US9300503B1
 * US9306621B2
 * US9331962B2
 * US9374250B1
 * US9432298B1
 * US20160261435A1
 * US9455744B2
 * US9455765B2
 * US9479369B1
 * US9520883B2
 * US20170019276A1
 * US9634797B2
 * US20170310456A1
 * US20170317449A1
 * US20170317855A1
 * US20170373889A1
### Forward
 * 
## Abstract

Abstract

Methods and systems are described for receiving an input data voltage signal at a first data decision circuit of set of pipelined data decision circuits, receiving an aggregate decision feedback equalization (DFE) correction current signal from a first analog current summation bus, the aggregate DFE correction current signal comprising a plurality of DFE tap-weighted currents from respective other data decision circuits of the set of pipelined data decision circuits, determining a data output decision value based on the received input data voltage signal and the received aggregate DFE correction current signal, and generating at least one outbound DFE tap-weighted current on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.



Methods and systems are described for receiving an input data voltage signal at a first data decision circuit of set of pipelined data decision circuits, receiving an aggregate decision feedback equalization (DFE) correction current signal from a first analog current summation bus, the aggregate DFE correction current signal comprising a plurality of DFE tap-weighted currents from respective other data decision circuits of the set of pipelined data decision circuits, determining a data output decision value based on the received input data voltage signal and the received aggregate DFE correction current signal, and generating at least one outbound DFE tap-weighted current on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.

CROSS-REFERENCE TO RELATED APPLICATIONS
This application claims the benefit of U.S. Provisional Application No. 62/411,937, entitled “Multiphase Data Receiver with Distributed DFE,” filed Oct. 24, 2016, which is hereby incorporated herein by reference.
REFERENCES
The following prior applications are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication 2011/0268225 of application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”).
U.S. Patent Publication 2011/0302478 of application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Resilience and SSO Resilience” (hereinafter “Cronie II”).
U.S. patent application Ser. No. 13/542,599, filed Jul. 5, 2012, naming Armin Tajalli, Harm Cronie, and Amin Shokrollahi, entitled “Methods and Circuits for Efficient Processing and Detection of Balanced Codes” (hereafter called “Tajalli I”.)
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi and Anant Singh, entitled “Methods and Systems for Skew Tolerance in and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication”, hereinafter identified as [Holden I];
U.S. Provisional Patent Application No. 61/946,574, filed Feb. 28, 2014, naming Amin Shokrollahi, Brian Holden, and Richard Simpson, entitled “Clock Embedded Vector Signaling Codes”, hereinafter identified as [Shokrollahi I].
U.S. patent application Ser. No. 14/612,241, filed Aug. 4, 2015, naming Amin Shokrollahi, Ali Hormati, and Roger Ulrich, entitled “Method and Apparatus for Low Power Chip-to-Chip Communications with Constrained ISI Ratio”, hereinafter identified as [Shokrollahi II].
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences”, hereinafter identified as [Ulrich I].
U.S. patent application Ser. No. 14/816,896, filed Aug. 3, 2015, naming Brian Holden and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling Codes with Embedded Clock”, hereinafter identified as [Holden II].
U.S. patent application Ser. No. 14/926,958, filed Oct. 29, 2015, naming Richard Simpson, Andrew Stewart, and Ali Hormati, entitled “Clock Data Alignment System for Vector Signaling Code Communications Link”, hereinafter identified as [Stewart I].
U.S. patent application Ser. No. 14/925,686, filed Oct. 28, 2015, naming Armin Tajalli, entitled “Advanced Phase Interpolator”, hereinafter identified as [Tajalli II].
U.S. Provisional Patent Application No. 62/286,717, filed Jan. 25, 2016, naming Armin Tajalli, entitled “Voltage Sampler Driver with Enhanced High-Frequency Gain”, hereinafter identified as [Tajalli III].
U.S. Provisional Patent Application No. 62/326,593, filed Apr. 22, 2016, naming Armin Tajalli, entitled “Sampler with Increased Wideband Gain and Extended Evaluation Time”, hereinafter identified as [Tajalli IV].
U.S. Provisional Patent Application No. 62/326,591, filed Apr. 22, 2016, naming Armin Tajalli, entitled “High Performance Phase Locked Loop”, hereinafter identified as [Tajalli V].
U.S. Provisional Patent Application No. 62/326,593, filed Apr. 22, 2016, naming Armin Tajalli and Ali Hormati, entitled “Sampler with Increased Wideband Gain and Extended Evaluation Time”, hereinafter identified as [Tajalli VI].
FIELD OF THE INVENTION
The present embodiments relate to communications systems circuits generally, and more particularly to calculating and applying inter-symbol interference corrective factors at a data receiver, as one component of detecting received communications signals from a high-speed multi-wire interface used for chip-to-chip communication.
BACKGROUND
In modern digital systems, digital information has to be processed in a reliable and efficient way. In this context, digital information is to be understood as information available in discrete, i.e., discontinuous values. Bits, collection of bits, but also numbers from a finite set can be used to represent digital information.
In most chip-to-chip, or device-to-device communication systems, communication takes place over a plurality of wires to increase the aggregate bandwidth. A single or pair of these wires may be referred to as a channel or link and multiple channels create a communication bus between the electronic components. At the physical circuitry level, in chip-to-chip communication systems, buses are typically made of electrical conductors in the package between chips and motherboards, on printed circuit boards (“PCBs”) boards or in cables and connectors between PCBs. In high frequency applications, microstrip or stripline PCB traces may be used.
Common methods for transmitting signals over bus wires include single-ended and differential signaling methods. In applications requiring high speed communications, those methods can be further optimized in terms of power consumption and pin-efficiency, especially in high-speed communications. More recently, vector signaling methods have been proposed such as described in [Cronie I] and [Cronie II] to further optimize the trade-offs between power consumption, pin efficiency and noise robustness of chip-to-chip communication systems. In those vector signaling systems, digital information at the transmitter is transformed into a different representation space in the form of a vector codeword that is chosen in order to optimize the power consumption, pin-efficiency and speed trade-offs based on the transmission channel properties and communication system design constraints. Herein, this process is referred to as “encoding”. The encoded codeword is communicated as a group of signals from the transmitter to one or more receivers. At a receiver, the received signals corresponding to the codeword are transformed back into the original digital information representation space. Herein, this process is referred to as “decoding”.
Regardless of the encoding method used, the received signals presented to the receiving device must be sampled (or their signal value otherwise recorded) at intervals best representing the original transmitted values, regardless of transmission channel delays, interference, and noise. The timing of this sampling or slicing operation is controlled by an associated Clock and Data Recovery (CDR) timing system, which determines the appropriate sample timing. [Stewart I] and [Tajalli V] provide examples of such CDR systems.
BRIEF DESCRIPTION
Methods and systems are described for receiving an input data voltage signal at a first data decision circuit of set of pipelined data decision circuits, receiving an aggregate decision feedback equalization (DFE) correction current signal from a first analog current summation bus, the aggregate DFE correction current signal comprising at least one DFE tap-weighted current from at least one respective other data decision circuit of the set of pipelined data decision circuits, determining a data output decision value based on the received input data voltage signal and the received aggregate DFE correction current signal, and generating at least one outbound DFE tap-weighted current on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.
Methods and systems are described for obtaining a sampled data bit, generating at least two DFE tap-weighted currents based on the sampled data bit and a set of at least two computed DFE factors, and responsively providing the at least two DFE tap-weighted currents to corresponding analog summation busses of a set N−1 analog summation busses connected to N−1 other data decision circuits, wherein N is an integer greater than 1, receiving, via a Nth analog summation bus, an aggregate DFE correction current signal representing a summation of at least two DFE tap-weighted currents generated by a corresponding at least two of the N−1 other data decision circuits, and forming a corrected input signal by applying the aggregate DFE correction current signal to an input signal received via a multi-wire bus.
Communications receivers must continue to operate reliably on received signals that may have undergone significant attenuation due to transmission line losses, as well as distortions caused by frequency-dependent attenuation and inter-symbol interference (ISI). Receive signal amplifiers and equalizers, such as the well-known Continuous Time Linear Equalizer (CTLE) can mitigate some of these degradations. [Tajalli III] provides examples of such embodiments, in which the high frequency gain of the sampling circuit may be advantageously boosted over a narrow frequency range, in a so-called high frequency peaking action. [Tajalli IV] describes other embodiments providing broadband gain.
Receive signal distortion caused by inter-symbol interference may be mitigated by use of Decision Feedback Equalization (DFE), where correction factors derived from previously-received symbols are used to correct distortions in the currently received symbol. However, at very high data rates generation of such DFE correction factors may be problematic, as previous symbol values may not have been fully determined in time to aid resolution of the next symbol value. Embodiments are described that efficiently generate DFE correction factors, and allow them to be applied to pipelined or parallel processed receiver instances.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 shows a prior art embodiment of a conventional data detector with DFE
 FIG. 2 shows a prior art system incorporating four instances of the data detector of FIG. 1 to receive consecutive unit intervals in a multi-phase receiver configuration.
 FIG. 3 illustrates one embodiment of a data detector with DFE compensation distributed using an analog bus.
 FIG. 4 shows a system embodiment incorporating four instances of the data detector of FIG. 3 to receive consecutive unit intervals in a multi-phase receiver configuration.
 FIGS. 5A-5C is a schematic of one embodiment in which a differential analog bus is used to sum DFE factors and produces a DFE correction.
 FIG. 6 illustrates a further embodiment, in which the system of FIG. 4 additionally computes DFE correction terms associated with earlier unit intervals.
 FIG. 7 illustrates a flowchart of a method, in accordance with some embodiments.

DETAILED DESCRIPTION
To reliably detect the data values transmitted over a communications system, a communications receiver must accurately measure its received signal value amplitudes at carefully selected times, typically at or near the center of that received signal's period of stability between transitions (i.e. once per receive unit interval, or UI.) This point is commonly described as the “center of eye”, (referring to the “eye diagram” of signal amplitude vs. clock intervals) and is typically determined by use of a local “receive clock” which is configured to occur at that desirable sampling time. Generation and ongoing control of such receive clock timing is well understood in the art, as Clock Data Alignment (CDA, also known as Clock Data Recovery or CDR) systems measure and incrementally adjust sample timing versus receive signal stability time to optimize sample timing.
In some embodiments, the value of the received signal is first captured at the selected time using a sample-and-hold or track-and-hold circuit, and then the resulting value is measured against one or more reference values using a known voltage comparator circuit.
The source of the input signal to the embodiments described herein may be derived from a single wire signal, or may be derived from a weighted linear combination of multiple wire signals, such as provided by a Multi Input Comparator or mixer (MIC) used to detect vector signaling codes and described in [Tajalli I], [Holden I] and [Ulrich I.]
Multiphase Receive Processing
As communications system signaling rates have increased, it has become progressively more difficult to perform all elements of receive data processing during a single receive unit interval. Some embodiments have resorted to pipelining; utilizing clocked latches to separate sequential processing steps and allow them to be performed essentially in series over multiple unit intervals. However, as every element of the pipeline must operate at the same high clock speed as the input, pipelining alone cannot compensate for insufficient logic speed or mitigate excessive power consumption in the receiver system.
Other embodiments distribute received signals over multiple receive processing phases, each such phase performing the reception operations essentially in parallel with other phases, the resulting received data from the multiple phases then being consolidated for subsequent use or storage. In such an architecture, each processing phase may have more time to perform the computations, and optionally may be configured to operate at a lower clock rate than the original received signal source, thus relaxing logic speed concerns and/or permitting reduced power consumption.
As one illustrative example, a digital data stream transmitted at 32 Gbits/second may be processed by a fully serial receiver operating at a clock rate of 32 GHz and thus having a single 33 psec unit interval in which it must perform the detection operations for a single received bit. In an alternative multiphase receiver embodiment, signals from consecutive received unit intervals are distributed across, as an example, eight essentially identical processing phases, each such phase then having as much as 264 psec to perform the detection operations for a single received bit. In a further embodiment requiring only small amounts of processing within each phase (e.g. slicing of the resulting signal to obtain a digital bit value, and latching of that digital bit value to produce a data output), the processing phases may be operated at a reduced clock rate (e.g. 4 GHz versus 32 GHz,) substantially reducing power consumption.
Decision Feedback Equalization
Decision Feedback Equalization or DFE is a technique used to improve signal detection capabilities in serial communication systems. It presumes that the transmission line characteristics of the communications channel between transmitter and receiver are imperfect, thus energy associated with previously transmitted bits may remain in the channel (for example, as reflections from impedance perturbations) to negatively impact reception of subsequent bits. A receiver's DFE system processes each bit detected in a past unit interval (UI) through a simulation of the communications channel to produce an estimate of that bit's influence on a subsequent unit interval. That estimate, herein called the “DFE correction”, may be subtracted from the received signal to compensate for the predicted inter-symbol interference. Alternative embodiments may perform the functionally equivalent operation of such subtraction, by measuring the received signal (e.g. using a differential comparator) at a reference voltage level derived from the DFE correction signal. Practical DFE systems apply DFE corrections derived from multiple previous unit intervals (herein individually described as “DFE factors”) to the received signal before detecting a data bit.
At very high data rates, there may not be sufficient time to detect a received bit, calculate its associated DFE factors, and apply the resulting DFE correction to the next received unit interval in time to detect the next bit. Thus, some embodiments utilize so-called “unrolled DFE”, where correction values are speculatively determined for some or all possible combinations of previous data values, those speculative corrections are applied to multiple copies of the received signal, and speculative detections made of the resulting corrected signal instances. When the earlier data values are finally resolved, the correct speculatively detected output may be chosen as the received data value for that unit interval.
“Unrolling” of DFE for even a modest number of historical unit intervals in this way uses a significant number of speculative results to be maintained effectively in parallel, introducing significant circuit complexity and associated power consumption.
Other embodiments as described in [Tajalli VI] utilize analog memory elements such as a sample-and-hold circuit, to retain a copy of the received signal in analog form until a DFE correction is available.
Complexity of Known Art Multiphase DFE
The functional steps performed by a known art DFE system typically comprise maintenance of a history of data values received in previous receive unit intervals, computation of an influence factor each such historical data value would have on a forthcoming receive unit interval, combination of these influence factors into a composite DFE correction, application of the DFE correction to the received signal, and ultimate detection of a data value from that corrected received signal.
One example of a known art receiver incorporating multiple processing phases is shown in FIG. 2. Received signals are Distributed 110 in consecutive unit intervals to each of the example four processing phases 200, each detecting one received data value, the detected data values then being Consolidated 120 to produce a complete or continuous Data Out result. Because detection of four unit intervals proceeds essentially in parallel within the four processing phases, communication of DFE information across the multiple processing phases is complex; for the illustrated example of four phase processing, the previous three received data values for any give detection are not available within the context of that detection's processing phase, but instead must be obtained from the other essentially parallel processing phases. More significantly, each processing phase has four unit interval clock cycles to perform its detection (as each of the four phases must start a new detection every fourth received unit interval,) but the penultimate detected data value is not available to it until the third of those clock cycles, when the processing phase operating on the previous receive unit interval's sample has completed. Thus, it is essential that the DFE correction be computed and made available very quickly.
A conventional DFE architecture based on the previously described known art functional steps typically incorporates point-to-point digital busses that interconnect the processing phases shown in FIG. 2, each phase 200 outputting a digital word representing a computation of an influence factor that phase's detected data value would have on another receive unit interval. The number of such digital interconnections scales with both the number of processing phases utilized, and with the depth of the DFE correction derived from data detected within those processing phases. If, as an example, each phase contributes one historical value to each other phase (i.e. the DFE is calculated across at least three previous unit intervals for the example four phases,) a total of twelve unidirectional digital busses are used or at least 96 wires (plus any bus handshake or strobe signals), assuming the digital words on each bus are 8 bits wide.
 FIG. 1 shows one example of a known art detector as used in such a system, with the received Signal In corrected by subtraction of a DFE Compensation value and then sampled by Sampler 210, with the resulting digital value then recorded by Latch 220 and output as Rx Data. Presuming that the DFE system computes how this received data bit might interact with the subsequent three unit intervals, FIG. 1 shows Rx Data being input to DFE factor generators 230, 231, and 232, producing three DFE factors relevant to the next three unit intervals, i.e. to the (now+1), (now+2), and (now+3) unit intervals; relative to the other processing phases detecting those unit intervals and utilizing those factors, the same DFE factors would be relatively described as coming from the (now−1), (now−2), and (now−3) historical unit intervals. In some embodiments, a given circuit may retain its own data decision for use as a decision generated in a 4th historical unit interval, as shown by DFE factor generator 233 feeding back to DAC 243.
Each DFE factor generator 230, 231, 232, 233 multiplies the detected data value by the predetermined scaling factor appropriate to that component of the DFE correction. As known in the art, said predetermined scaling factors may be pre-calculated, configured, determined heuristically, or computed based on measurements of the received signal characteristics; for illustrative purposes they are shown in FIG. 1 as being input e.g. by configuration, without implying limitation. In embodiments in which the detected data value is binary, the DFE factor generators may simply select between two values derived from the scaling factor, based on the digital value of the received data.
Similarly, the DFE Compensation applied to the current unit interval is composed of components corresponding to the previous three unit intervals. Each data bus terminates in a digital to analog converter circuit 240, 241, 242, 243 that receives each of the digital words and produces an analog result. The various analog values representing the DFE factors are then summed 250 to produce the final DFE correction to the sampled input signal from which the data result will be detected. (Alternatively, in other embodiments the components may be summed in the digital domain, and the result converted to analog.) Regardless, each processing phase 200 must provide three DFE factor generators to send partial DFE compensation values representing (now+1), (now+2), and (now+3) compensation terms to the other three phases, as well as an adder and at least one DAC to generate its own DFE compensation value from the DFE factors provided to it by other phases.
Alternative Embodiment
An alternative embodiment of a receiver utilizing Decision Feedback Compensation and configured to operate as multiple essentially parallel processing phases is illustrated in FIG. 3. For the purposes of description below, a set of pipelined data decision circuits may operate on a plurality of phases of a sampling clock, and may be interconnected by a distributed analog current summation bus. Throughout this description, each data decision circuit may simply be referred to as a “phase” or a “processing phase” as shown in FIG. 4 to identify which phase of the sampling clock the data decision circuit is operating on. In FIG. 4, there are four phases of data decision circuits 300, each operating on a respective phase of the sampling clock. In some embodiments, there may be four phases of the sampling clock 1-4, which may correspond to phases of 0, 90, 180, and 270 degrees, respectively. However, in some embodiments, fewer or additional phases may be used, and the above example should not be considered limiting. For the purposes of the following description, embodiments including four phases of data decision circuits are described, each operating on a corresponding phase 1-4 of the sampling clock. A data output decision value may be determined by e.g., latching 320 the output of slicer 310. Unlike the previously described known art DFE architecture, in this embodiment each data decision circuit incorporates digital-to-analog converters 330, 331, 332 configured to receive the data output decision value and to output one or more DFE tap-weighted currents for the (t+1), (t+2), and (t+3) future unit intervals. The DFE tap-weighted currents may be provided as analog currents to corresponding analog current summation busses interconnecting the set of pipelined data decision circuits operating on data received in the (t+1), (t+2), and (t+3) future unit intervals. If it is assumed that the data decision circuit is operating on phase 1 of the sampling clock (sampling clock_ph1), then the DFE tap-weighted current associated with the t+1 future unit interval is generated on the analog current summation bus providing an aggregate DFE correction current signal to the data decision circuit operating on phase 2 of the sampling clock. Similarly, the DFE tap-weighted currents for the t+2 and t+3 future unit intervals are generated on the busses providing aggregate DFE correction current signals to the data decision circuits operating on phases 3 and 4, respectively. Such a configuration is shown in FIG. 4 and explained in more detail below.
In at least one embodiment, a distributed analog current summation occurs as two or more data decision circuits each inject respective DFE tap-weighted currents representing the computed DFE correction components into an analog current summation bus. The data decision circuit acting as the analog current summation bus receiver receives an aggregate analog DFE correction current signal via current buffer 340, the aggregate DFE correction current signal representing a linear sum of the DFE tap-weighted currents (i.e. a sum of multiple terms contributed by different data decision circuits) which may be applied 310 directly to the received input data signal. In FIG. 3, the outbound DFE tap-weighted currents generated by the decision circuit are shown for being used in future unit intervals via the notation e.g. “t+1”, however FIG. 4 uses the notation e.g., “t−1” to illustrate the DFE tap-weighted currents provided to each analog current summation bus are previously-generated DFE correction components with respect to the data decision circuit acting as the receiver of the aggregate DFE correction current signal. Furthermore, it should be noted that similar to FIG. 1, the data decision circuit 300 in FIG. 3 may feedback a “t−4” DFE tap-weighted current to the analog current summation bus providing the aggregate DFE correction current signal to the data decision circuit 300.
 FIG. 4, includes four data decision circuits 402, 404, 406, and 408, each data decision operating on a respective phase of the sampling clock phase 1-4. The distributed analog current summation bus includes four analog current summation busses 450, labeled phase1, phase2, phase3, phase4 corresponding to the phase 1-4 of the sampling clock provided to the respective data decision circuit accepting each aggregate DFE correction current signal. Using analog current summation bus phase1 as an example, it may be seen that data decision circuit 402 operating on phase 1 of the sampling clock receives an aggregate DFE correction current signal including DFE tap-weighted current (t−1) from the data decision circuit 408 operating on phase 4 of the sampling clock, DFE tap-weighted current (t−2) from the data decision circuit 406 operating on phase 3 of the sampling clock, and DFE tap-weighted current (t−3) from the data decision circuit 404 operating on phase 2 of the sampling clock, the summation of which is accepted as the aggregate DFE correction current signal to apply to the received input data signal received at time t at data decision circuit operating on phase 1 of the sampling clock. The DFE tap-weighted currents described above are identified relative to the unit interval ‘t’ being detected by the accepting data decision circuit.
In a further embodiment, a two-wire differential bus is used for each analog current summation bus, with each DFE tap-weighted current represented as the difference of currents injected into the two wires. In at least one such embodiment, the magnitude of the DFE tap-weighted currents injected into the bus by a single node represents the computed DFE correction factor, with the order in which those currents are injected (e.g. a first current to the first wire of the bus and a second current to the second wire of the bus, or the second current to the first wire and the first current to the second wire) determined by a historical data decision detected by that data decision circuit. In a further embodiment, the first and second currents are selected from predetermined values based on a digital value of the historical data output decision value. In a further embodiment, transistors acting as analog switches steer currents as directed by the historical data output decision value. In some embodiments, the magnitude of each DFE tap-weighted current is dependent on the difference in unit intervals between the other data decision circuits. For example, referring to the example of FIG. 3, the magnitude of the DFE tap-weighted current provided to the data decision circuit operating on phase 2 of the sampling clock to generate a data output decision value in unit interval t+1 would be larger than the magnitude of the DFE tap-weighted current provided to the data decision circuit operating on phase 3 of the sampling clock to generate a data output decision value in unit interval t+2.
A further embodiment is shown in FIG. 6, suitable for environments in which deeper DFE compensation is performed. One such embodiment may perform DFE compensation for propagation anomalies further back in time than (#phases−1)*(unit interval duration). Added to the system of FIG. 4, an additional DFE subsystem 610 utilizing known art methods maintains a record of historical data from the Data Out stream, and computes further DFE corrections based on that historical data. These further DFE tap-weighted currents 620 may then be injected into one or more analog current summation busses 450 in a similar manner to the DFE tap-weighted currents generated by 330, 331, 332 in FIG. 3, and in a similar manner as shown in FIGS. 5A-5C with respect to DFE correction circuits 520 and 530, which are described in more detail below. In some embodiments, the DFE subsystem 610 includes a data decision history element, e.g., a register, maintaining storage of data decisions past the 3 historical unit intervals shown in FIG. 6. In some embodiments, as many as 6 additional DFE tap-weighted currents going as far back as t−9 or t−10 unit intervals may be injected, however this number should not be considered as limiting.
Compared to the more than 96 digital interconnection wires needed in the previous example of FIG. 2, the comparable alternative embodiment of four phases and three DFE terms shown in FIG. 4 uses merely eight analog wires (four differential pairs) for interconnection, and each data decision circuit includes significantly less circuitry to output onto an analog current summation bus and to receive from an analog current summation bus, resulting in significant reductions in circuit size and power consumption. Such an alternative embodiment not only utilizes fewer wires per interconnection, but the number of interconnections scales only with the number of phases of the sampling clock, rather than number of phases and number of historical intervals t−1, t−2, etc. Further, in the circuits of FIGS. 1 and 2, the exchange of multi-bit digital DFE correction values is much slower as compared to the analog transportation described in the embodiments of FIGS. 3-6. This is due to the amount of time it takes to change wires from one state to another (i.e., from one voltage to another), which may be further slowed due to capacitive and/or inductive crosstalk, for example. The analog summation busses generate currents that have a much faster travel time and are thus more reliable in distributing the analog DFE correction components among the various phases of the processing circuit.
 FIGS. 5A-5C show schematic diagrams illustrating embodiments incorporating multiple data decision circuits, where example data decision circuits operating on phases 3 and 4 of the sampling clock (which may correspond to phases 3 and 4 shown in FIG. 4) generate DFE tap-weighted currents on differential analog current summation bus 590, and the data decision circuit operating on phase 1 applies the aggregate DFE correction current signal produced by the summation on differential analog current summation bus 590 to a received input data signal, shown as Vin±. FIG. 5A includes analog DFE correction circuits 520 and 530, which may each correspond to a single instance of the analog DFE correction circuits 330, 331, 332 shown in FIG. 3. For the purposes of the following description, each analog DFE correction circuit may be referred to by the data decision circuit in which the analog DFE correction circuit is present. For example, analog DFE correction circuit 520 is present in data decision circuit operating on phase 3 of the sampling clock, while analog DFE correction circuit 530 is present in data decision circuit operating on phase 4 of the sampling clock. For the purposes of the following example, the received input data signal is received at time t, and the DFE tap-weighted currents generated by data decision circuits 530 and 520 are distributed according to data output decision values x[4] and x[3] generated at times t−1 and t−2, respectively. Thus the notation h[3, t−2] of current source 523 corresponds to the DFE correction component generated by data decision circuit operating on phase 3 of the sampling clock having a magnitude corresponding to the t−2 previous unit interval. No limitation is implied in either number or combination of phases.
As shown in FIG. 5A, data decision circuit 520 operating on phase 3 determined a historical data output decision value x[3] during unit interval t−2 that controls steering transistors 521 and 522 to proportionally direct portions of the total current h[3,t−2] set by DFE correction current source 523 into the two wires of differential analog current summation bus 590. In a practical embodiment, the magnitude h[3,t−2] of the DFE tap-weighted current represents the computed DFE correction factor, i.e. the influence of the historical data output decision value detected in the t−2 interval with respect to the data value to be detected in the t unit interval. The historical data output decision value x[3] determines a sign of the DFE tap-weighted current. In some embodiments, each data decision circuit may have different current source values h for each historical interval. Data decision circuit 530 performs a similar function, with current steering controlled by the steering transistors 531 and 532 operating on the historical data output decision value x[4] determined in the t−1 (immediately preceding) unit interval, and directs the DFE tap-weighted current having magnitude h[4,t−1] from current source 533 through the analog current summation bus. Other embodiments may incorporate different numbers of phases of data decision circuits providing DFE tap-weighted currents to analog current summation bus 590, using at least one such data decision circuit, and embodiments generally utilizing two or more such data decision circuits. For example, data decision circuit operating on phase 2 of the sampling clock is not shown in FIG. 5A, but it is evident that the data decision circuit operating on phase 2 may be included in a similar fashion as data decision circuits 520 and 530 in a configuration as illustrated in FIG. 4, providing a DFE tap-weighted current according to a data output decision value x[2] made and a computed DFE correction factor h[2,t−3] for the t−3rd unit interval.
Data decision circuit 510 of the set of pipelined data decision circuits applies the aggregate DFE correction current signal produced by the summing action of DFE tap-weighted currents on analog current summation bus 590 to the received input data signal. As shown in FIG. 5A, the received input data signal is applied to an input pair of transistors 506, 507. As shown, the combination of the aggregate DFE correction current signal and the current h[1,t] drawn through resistors 501 and 502 will generate a differential output voltage. The differential output voltage is provided to differential receiver 505 (which in practice may be part of a data sampler, integrator, or MIC) to generate a data output decision value x[1]. Data output decision value may subsequently be applied to steering transistors (not shown) for generating at least one DFE tap-weighted current on at least one other analog current summation bus.
 FIGS. 5A-5C include a current buffer taking the form of buffering transistors 503 and 504. As shown, buffering transistors 503 and 504 receive a buffering voltage Vb, and act as a current buffer. The current buffer assists in maintaining a high-speed analog current summation bus by providing a near-constant voltage at the drains of the steering transistors in each data decision circuit. Such a constant voltage at each drain allows constant DFE tap-weighted currents to be generated on the analog current summation bus. As the effective impedance of summation bus 590 is very low due to the current buffer, the voltage swing on the wires of the bus will be limited. Hence, loss due to parasitic capacitance of the lines is minimized.
As shown in FIG. 5A, the differential input transistors 506 and 507 are connected to the drains of the current buffer transistors 503 and 504. Such embodiments may isolate the input transistors 506 and 507 from the capacitance of the analog current summation bus. It should be noted that in alternative embodiments (not shown), the differential input transistors 506 and 507 may be connected to the source of current buffer transistors 503 and 504 in a similar fashion as the steering transistors in data decision circuits 520 and 530. No limitation is implied.
In some embodiments, as shown in FIG. 5B, resistors 501 and 502 may be replaced by a differential pair of transistors 510/511 configured to receive a clock signal CK as an input. In this particular example, clock signal CK may correspond to phase 1 of the sampling clock. While CK is low, the differential output node connected to differential receiver 505 may be pre-charged via PMOS transistors 510/511, and the differential output node may begin discharging when CK goes high by enabling the DFE correction current sources 523 and 533 via NMOS transistors 525 and 535, respectively. Similarly, the current source 508 may be enabled by an NMOS transistor receiving CK as an input. In the embodiment of FIG. 5B, transistors 510, 511, 503, 504 provide an active load to bus 590, allowing differential receiver 505 to obtain the resulting DFE correction factor encoded as a difference of the sums of currents injected into the two wires of 590. FIG. 5C illustrates an alternative embodiment in which the input signal Vin± is provided directly to differential receiver 505.
 FIG. 7 depicts a flowchart of a method 700, in accordance with some embodiments. As shown, method 700 includes receiving, at step 702, an input data voltage signal at a first data decision circuit of set of pipelined data decision circuits. At step 704, an aggregate decision feedback equalization (DFE) correction current signal is received via a first analog current summation bus, the aggregate DFE correction current signal comprising at least one DFE tap-weighted current from at least one respective other data decision circuit of the set of pipelined data decision circuits. A data output decision value is determined at step 706 based on the received input data voltage signal and the received aggregate DFE correction current signal. At least one outbound DFE tap-weighted current is generated 708 on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.
In some embodiments, the method further includes generating the plurality of DFE tap-weighted currents using a plurality of differential pairs of transistors connected in parallel to the first analog summation bus. In such embodiments, each DFE tap-weighted current has a corresponding magnitude h determined by a corresponding DFE correction factor current source connected to a respective differential pair of transistors. In some embodiments, each DFE tap-weighted current has a sign determined by a historical decision generated by an associated data decision circuit. In some embodiments, the plurality of DFE tap-weighted currents are drawn through a current buffer connected to the plurality of differential pairs of transistors.
In some embodiments, the aggregate DFE correction current signal further includes at least one DFE tap-weighted current provided by a data decision history element. In some embodiments, determining the data output decision value includes combining the received input data voltage with the aggregate DFE correction current signal. In some such embodiments, combining the received input data voltage with the aggregate DFE correction current signal includes generating a data current signal representative of the received input data voltage and performing an analog current summation of the aggregate DFE correction current signal and the data current signal. The data current signal may be generated by applying the input data voltage to a differential pair of transistors to draw the data current through a pair of resistors connected to the first analog current summation bus. In some embodiments, each data decision circuit of the set of pipelined data decision circuits operates on a respective phase of a plurality of phases of a sampling clock.
In some embodiments, a method includes obtaining a data output decision value, generating at least two DFE tap-weighted currents based on the sampled data bit and a set of at least two computed DFE factors. The at least two DFE tap-weighted currents are responsively provided to corresponding analog summation busses of a set N−1 analog summation busses connected to N−1 other data decision circuits, wherein N is an integer greater than 1. An aggregate DFE correction current signal is received via an Nth analog summation bus, the aggregate DFE correction current signal representing a summation of at least two DFE tap-weighted current generated by a corresponding at least two of the N−1 other processing phases. A corrected input signal is formed by applying the aggregate DFE correction current signal to an input signal received via a multi-wire bus.
In some embodiments, the method further includes slicing the corrected input signal, and responsively generating a data output decision value by latching the sliced corrected input signal. In some embodiments, the slicing is performed by an integrator. In alternative embodiments, the slicing is performed by a digital comparator.
In some embodiments, the corrected input signal is a voltage signal formed by subtracting the aggregate DFE correction current signal from the received input signal. In some embodiments, the voltage signal is formed by sinking the DFE tap-weighted currents through an active load connected to the received input signal. In some embodiments, the current sunk through the active load includes current associated with computed DFE factors of the at least two of the N−1 other data decision circuits. In some embodiments, the active load is a differential pair of transistors, and wherein generating the corrected input signal comprises controlling a voltage drop across the pair of transistors, each respective transistor having an associated voltage drop determined by a respective current sunk through the respective transistor.
In some embodiments, the at least two DFE tap-weighted currents comprise N−1 DFE tap-weighted currents, and wherein the DFE correction value represents a summation of N−1 DFE tap-weighted currents generated by the N−1 other processing phases. In some embodiments, each summation bus comprises a differential pair of wires.

The invention claimed is:
 
1. A method comprising:
receiving an input data voltage signal at a first data decision circuit of a set of pipelined data decision circuits operating in parallel in a respective set of signal processing phases, each data decision circuit of the set of pipelined data decision circuits operating on a respective phase of a plurality of phases of a sampling clock;
receiving an aggregate decision feedback equalization (DFE) correction current signal from a first analog current summation bus, the aggregate DFE correction current signal comprising at least one DFE tap-weighted current from at least one other respective data decision circuits of the set of pipelined data decision circuits;
determining a data output decision value based on the received input data voltage signal and the received aggregate DFE correction current signal; and,
generating at least one outbound DFE tap-weighted current on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.


  
2. The method of claim 1, further comprising generating the at least one DFE tap-weighted current using at least one differential pair of transistors connected in parallel to the first analog summation bus.

  
3. The method of claim 2, wherein each DFE tap-weighted current has a corresponding magnitude determined by a corresponding DFE correction factor current source connected to a respective differential pair of transistors.

  
4. The method of claim 2, wherein each DFE tap-weighted current has a sign determined by a historical decision generated by an associated data decision circuit.

  
5. The method of claim 2, wherein the at least one DFE tap-weighted current is drawn through a current buffer connected to the at least one differential pair of transistors.

  
6. The method of claim 1, wherein the aggregate DFE correction current signal further comprises at least one DFE tap-weighted current provided by a data decision history element.

  
7. The method of claim 1, wherein determining the data output decision value comprises combining the received input data voltage with the aggregate DFE correction current signal.

  
8. The method of claim 7, wherein combining the received input data voltage with the aggregate DFE correction current signal comprises generating a data current signal representative of the received input data voltage and performing an analog current summation of the aggregate DFE correction current signal and the data current signal.

  
9. The method of claim 8, wherein generating the data current signal comprises applying the input data voltage to a differential pair of transistors to draw the data current through a pair of resistors connected to the first analog current summation bus.

  
10. An apparatus comprising:
a set of pipelined data decision circuits interconnected by a distributed analog current summation bus, the set of pipelined data decision circuits operating in parallel in a respective set of signal processing phases, each data decision circuit of the set of pipelined data decision circuits operating on a respective phase of a plurality of phases of a sampling clock, the set of pipelined data decision circuits comprising a first data decision circuit configured to:
receive (i) an input data voltage signal and (ii) an aggregate decision feedback equalization (DFE) correction current signal from a first analog current summation bus of the distributed analog current summation bus, the aggregate DFE correction current signal comprising at least one DFE tap-weighted current from respective other data decision circuits of the set of pipelined data decision circuits;
determine a data output decision value based on the received input data voltage signal and the received aggregate DFE correction current signal; and,
generate at least one DFE tap-weighted current on at least one other analog current summation bus connected to at least one other data decision circuit of the set of pipelined data decision circuits.



  
11. The apparatus of claim 10, wherein each of the respective other data decision circuits comprises a respective differential pair connected to the first analog current summation bus for generating a corresponding DFE tap-weighted current of the at least one DFE tap-weighted currents.

  
12. The apparatus of claim 11, wherein the respective differential pair is configured to receive a corresponding historical data decision generated by a corresponding other data decision circuit to apply a sign to the corresponding DFE tap-weighted current.

  
13. The apparatus of claim 11, wherein the respective differential pair is connected to a DFE correction factor current source configured to apply a magnitude to the corresponding DFE tap-weighted current.

  
14. The apparatus of claim 10, further comprising a current buffer connected between the first analog current summation bus and the first data decision circuit.

  
15. The apparatus of claim 10, further comprising a data decision history element configured to provide additional DFE tap-weighted currents to the first analog current summation bus.

  
16. The apparatus of claim 10, wherein the data output decision value is determined based on a combination of the received input data voltage with the aggregate DFE correction current signal at a differential output node.

  
17. The apparatus of claim 16, further comprising a pair of resistors configured to generate a combined output voltage by drawing a data current signal representative of the received input data voltage and the aggregate DFE correction current signal through the pair of resistors.

  
18. The apparatus of claim 17, further comprising an input differential pair of transistors connected to the differential output node and configured to receive the input data voltage and to responsively generate the data current signal.