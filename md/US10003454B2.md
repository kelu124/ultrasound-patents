Source: [US10003454B2](https://patents.google.com/patent/US10003454B2)

# [US10003454B2](US10003454B2.md) - [US10003454B2](US10003454B2.md) - Sampler with low input kickback

## Details

* Date: 2016-04-22
* Inventor: Kandou Labs SA
* Beneficiary: Armin Tajalli

## Other patents

### Backwards
 * US668687A
 * US780883A
 * US3196351A
 * US3636463A
 * US3939468A
 * US4163258A
 * US4181967A
 * US4206316A
 * US4276543A
 * US4486739A
 * [US4499550A](US4499550A.md)
 * US4722084A
 * US4772845A
 * US4774498A
 * US4864303A
 * US4897657A
 * [US4974211A](US4974211A.md)
 * US5017924A
 * US5040060A
 * US5053974A
 * [US5166956A](US5166956A.md)
 * US5168509A
 * US5266907A
 * US5283761A
 * US5287305A
 * US5311516A
 * US5331320A
 * [US5412689A](US5412689A.md)
 * US5449895A
 * US5459465A
 * US5461379A
 * US5511119A
 * US5510736A
 * US5553097A
 * US5566193A
 * US5599550A
 * US5626651A
 * US5629651A
 * US5659353A
 * US5727006A
 * US5748948A
 * US5802356A
 * [US5825808A](US5825808A.md)
 * US5856935A
 * US5875202A
 * US5945935A
 * US5982954A
 * US5995016A
 * US5999016A
 * [US6005895A](US6005895A.md)
 * [US6084883A](US6084883A.md)
 * US6119263A
 * US6172634B1
 * US6175230B1
 * US6232908B1
 * US20010006538A1
 * [US6278740B1](US6278740B1.md)
 * US6316987B1
 * US20010055344A1
 * US6346907B1
 * US20020034191A1
 * US20020044316A1
 * US6378073B1
 * US6384758B1
 * US20020057592A1
 * US6398359B1
 * US6404820B1
 * US6417737B1
 * US6433800B1
 * [US6452420B1](US6452420B1.md)
 * US20020154633A1
 * US6473877B1
 * US20020163881A1
 * US20020167339A1
 * US6483828B1
 * US20020174373A1
 * US20020181607A1
 * US6509773B2
 * US20030016763A1
 * US20030016770A1
 * US6522699B1
 * US20030046618A1
 * [US6556628B1](US6556628B1.md)
 * US20030085763A1
 * US6563382B1
 * JP2003163612A
 * US20030146783A1
 * US6621427B2
 * US20030174023A1
 * US6624699B2
 * US20030185310A1
 * US6650638B1
 * US20030218558A1
 * [US6661355B2](US6661355B2.md)
 * US6664355B2
 * US6690739B1
 * US20040027185A1
 * [US6766342B2](US6766342B2.md)
 * US20040146117A1
 * US6772351B1
 * US20040155802A1
 * US20040161019A1
 * US20040169529A1
 * [US6839429B1](US6839429B1.md)
 * US6839587B2
 * WO2005002162A1
 * US6854030B2
 * US6865234B1
 * US6865236B1
 * US20050063493A1
 * US6876317B2
 * US20050134380A1
 * US6927700B1
 * US20050174841A1
 * US20050195000A1
 * US20050201491A1
 * US20050213686A1
 * US20050220182A1
 * [US6954492B1](US6954492B1.md)
 * US6963622B2
 * US6973613B2
 * US6972701B2
 * US20050270098A1
 * US6976194B2
 * US6982951B2
 * [US6990138B2](US6990138B2.md)
 * US6991038B2
 * US6993311B2
 * [US6999516B1](US6999516B1.md)
 * US20060036668A1
 * US7023817B2
 * US7039136B2
 * US20060097786A1
 * US20060103463A1
 * US7053802B2
 * US20060120486A1
 * US20060126751A1
 * US20060133538A1
 * US20060140324A1
 * US7080280B2
 * US20060159005A1
 * US7082557B2
 * US7085153B2
 * US20060233291A1
 * US7127003B2
 * CN1864346A
 * US7142865B2
 * [US7142612B2](US7142612B2.md)
 * US20070002954A1
 * US20070001723A1
 * US7164631B2
 * US7167019B2
 * US20070030796A1
 * US7176823B2
 * [US7180949B2](US7180949B2.md)
 * US7199728B2
 * US20070103338A1
 * US20070121716A1
 * US7231558B2
 * US20070182487A1
 * US20070204205A1
 * US20070201546A1
 * US7269212B1
 * US7269130B2
 * US20070263711A1
 * US20070283210A1
 * US20080007367A1
 * US20080012598A1
 * US7336112B1
 * US7335976B2
 * US7339990B2
 * US7346819B2
 * US7348989B2
 * US7356213B1
 * US7358869B1
 * US7362697B2
 * US7366942B2
 * US20080104374A1
 * US7370264B2
 * US7372390B2
 * EP1926267A1
 * [US7389333B2](US7389333B2.md)
 * US20080159448A1
 * US7397302B2
 * US7400276B1
 * US20080192621A1
 * US7462956B2
 * US20080317188A1
 * US7496162B2
 * US20090059782A1
 * US20090115523A1
 * US7539532B2
 * US20090154604A1
 * CN101478286A
 * WO2009084121A1
 * US20090195281A1
 * US7599390B2
 * US20090262876A1
 * US7613234B2
 * US7616075B2
 * US7620116B2
 * [US7633850B2](US7633850B2.md)
 * US7636057B2
 * US20090316730A1
 * US7639596B2
 * US20090323864A1
 * US7650525B1
 * US7656321B2
 * US20100046644A1
 * WO2010031824A1
 * US20100081451A1
 * US7694204B2
 * US7698088B2
 * US7697915B2
 * US7706524B2
 * US7706456B2
 * US20100148819A1
 * US20100180143A1
 * US7768312B2
 * US20100215087A1
 * US20100215112A1
 * US7787572B2
 * US20100235673A1
 * US7804361B2
 * US7808456B2
 * US20100271107A1
 * US20100283894A1
 * US20100296666A1
 * US7841909B2
 * US20100309964A1
 * US7869497B2
 * US7869546B2
 * US20110014865A1
 * US7882413B2
 * US20110028089A1
 * US20110032977A1
 * US7899653B2
 * US20110051854A1
 * US20110072330A1
 * US20110074488A1
 * US20110084737A1
 * US7933770B2
 * US20110103508A1
 * US8000664B2
 * US20110228864A1
 * WO2011119359A2
 * US8030999B2
 * US8036300B2
 * US8050332B2
 * US20110268225A1
 * US8055095B2
 * US8064535B2
 * US20110302478A1
 * [US20110299555A1](US20110299555A1.md)
 * US8085172B2
 * US20110317559A1
 * US8106806B2
 * US8149906B2
 * US20120082203A1
 * [US8159376B2](US8159376B2.md)
 * US8180931B2
 * US8185807B2
 * US20120133438A1
 * US8199863B2
 * US8199849B2
 * US20120152901A1
 * US20120161945A1
 * US8218670B2
 * US8233544B2
 * US8245094B2
 * US20120213299A1
 * US8253454B2
 * US8279094B2
 * US8279745B2
 * US20120257683A1
 * US8289914B2
 * US8295250B2
 * US8295336B2
 * US8310389B1
 * US8341492B2
 * US20130010892A1
 * US20130013870A1
 * US8359445B2
 * US8365035B2
 * EP2039221B1
 * US8406316B2
 * US8429492B2
 * US8429495B2
 * US20130106513A1
 * US8437440B1
 * US20130114663A1
 * US20130114519A1
 * US8443223B2
 * US8442099B1
 * US20130129019A1
 * US8462801B2
 * US20130147553A1
 * US8472513B2
 * US20130188656A1
 * US8498368B1
 * US20130195155A1
 * US20130202065A1
 * US20130215954A1
 * US8520348B2
 * US8547272B2
 * US20130259113A1
 * US20130271194A1
 * US8578246B2
 * US8588254B2
 * US20130307614A1
 * US8593305B1
 * US20130314142A1
 * US20130315501A1
 * US8604879B2
 * US8602643B2
 * US20130346830A1
 * US8620166B2
 * US8638241B2
 * US8643437B2
 * US8649840B2
 * US8649460B2
 * US8649556B2
 * US8674861B2
 * US8687968B2
 * US8718184B1
 * US20140159769A1
 * US8755426B1
 * US20140177696A1
 * US8773964B2
 * US8780687B2
 * US8782578B2
 * US8831440B2
 * US20140266440A1
 * US20140269130A1
 * US8841936B2
 * US8879660B1
 * US8898504B2
 * US8938171B2
 * US8951072B2
 * US20150049798A1
 * US8975948B2
 * US20150070201A1
 * US20150078479A1
 * US8989317B1
 * US9036764B1
 * US9059816B1
 * US9069995B1
 * US9077386B1
 * US9083576B1
 * US9093791B2
 * US9100232B1
 * US9106465B2
 * US9124557B2
 * US20150249559A1
 * US9148087B1
 * US9162405B2
 * US9172412B2
 * US9178503B2
 * US9183085B1
 * US20150333940A1
 * US9197470B2
 * US20150349835A1
 * US20150380087A1
 * US20150381232A1
 * US20160020824A1
 * US20160020796A1
 * US20160036616A1
 * US9281785B2
 * [US9288082B1](US9288082B1.md)
 * US9292716B2
 * US9300503B1
 * US9306621B2
 * US9331962B2
 * US20160146771A1
 * US9374250B1
 * US9432298B1
 * US20160261435A1
 * US9455765B2
 * US9455744B2
 * US9479369B1
 * US9634797B2
 * US20170310456A1
 * US20170317449A1
 * US20170317855A1
### Forward
 * 
## Abstract

Abstract

Methods and systems are described for receiving a signal to be sampled and responsively generating, at a pair of common nodes, a differential current representative of the received signal, receiving a plurality of sampling interval signals, each sampling interval signal received at a corresponding sampling phase of a plurality of sampling phases, for each sampling phase, pre-charging a corresponding pair of output nodes using a pre-charging FET pair receiving the sampling interval signal, forming a differential output voltage by discharging the corresponding pair of output nodes via a discharging FET pair connected to the pair of common nodes, the FET pair receiving the sampling interval signal and selectively enabling the differential current to discharge the corresponding pair of output nodes, and latching the differential output voltage.



Methods and systems are described for receiving a signal to be sampled and responsively generating, at a pair of common nodes, a differential current representative of the received signal, receiving a plurality of sampling interval signals, each sampling interval signal received at a corresponding sampling phase of a plurality of sampling phases, for each sampling phase, pre-charging a corresponding pair of output nodes using a pre-charging FET pair receiving the sampling interval signal, forming a differential output voltage by discharging the corresponding pair of output nodes via a discharging FET pair connected to the pair of common nodes, the FET pair receiving the sampling interval signal and selectively enabling the differential current to discharge the corresponding pair of output nodes, and latching the differential output voltage.

CROSS REFERENCE TO RELATED APPLICATIONS
This application claims the benefit of U.S. Provisional Application No. 62/326,596, filed Apr. 22, 2016, entitled “SAMPLER WITH LOW INPUT KICKBACK”, naming Armin Tajalli, reference of which is hereby incorporated in its entirety for all purposes.
REFERENCES
The following prior applications are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication 2011/0268225 of application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”).
U.S. Patent Publication 2011/0302478 of application Ser. No. 12/982,777, filed Dec. 30, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Power and Pin Efficient Chip-to-Chip Communications with Common-Mode Resilience and SSO Resilience” (hereinafter “Cronie II”).
U.S. patent application Ser. No. 13/542,599, filed Jul. 5, 2012, naming Armin Tajalli, Harm Cronie, and Amin Shokrollhi entitled “Methods and Circuits for Efficient Processing and Detection of Balanced Codes” (hereafter called “Tajalli I”.)
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi and Anant Singh, entitled “Methods and Systems for Skew Tolerance in and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication”, hereinafter identified as [Holden I];
U.S. Provisional Patent Application No. 61/946,574, filed Feb. 28, 2014, naming Amin Shokrollahi, Brian Holden, and Richard Simpson, entitled “Clock Embedded Vector Signaling Codes”, hereinafter identified as [Shokrollahi I].
U.S. patent application Ser. No. 14/612,241, filed Aug. 4, 2015, naming Amin Shokrollahi, Ali Hormati, and Roger Ulrich, entitled “Method and Apparatus for Low Power Chip-to-Chip Communications with Constrained ISI Ratio”, hereinafter identified as [Shokrollahi II].
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences”, hereinafter identified as [Ulrich I].
U.S. patent application Ser. No. 14/816,896, filed Aug. 3, 2015, naming Brian Holden and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling Codes with Embedded Clock”, hereinafter identified as [Holden II].
U.S. patent application Ser. No. 14/926,958, filed Oct. 29, 2015, naming Richard Simpson, Andrew Stewart, and Ali Hormati, entitled “Clock Data Alignment System for Vector Signaling Code Commuications Link”, hereinafter identified as [Stewart I].
U.S. patent application Ser. No. 14/925,686, filed Oct. 28, 2015, naming Armin Tajalli, entitled “Advanced Phase Interpolator”, hereinafter identified as [Tajalli II].
U.S. Provisional Patent Application No. 62/286,717, filed Jan. 25, 2016, naming Armin Tajalli, entitled “Voltage Sampler Driver with Enhanced High-Frequency Gain”, hereinafter identified as [Tajalli III].
FIELD OF THE INVENTION
The present embodiments relate to communications systems circuits generally, and more particularly to obtaining an instantaneous measurement of a received signal voltage relative to a provided clock signal, as one component of detecting received communications signals from a high-speed multi-wire interface used for chip-to-chip communication.
BACKGROUND
In modern digital systems, digital information has to be processed in a reliable and efficient way. In this context, digital information is to be understood as information available in discrete, i.e., discontinuous values. Bits, collection of bits, but also numbers from a finite set can be used to represent digital information.
In most chip-to-chip, or device-to-device communication systems, communication takes place over a plurality of wires to increase the aggregate bandwidth. A single or pair of these wires may be referred to as a channel or link and multiple channels create a communication bus between the electronic components. At the physical circuitry level, in chip-to-chip communication systems, buses are typically made of electrical conductors in the package between chips and motherboards, on printed circuit boards (“PCBs”) boards or in cables and connectors between PCBs. In high frequency applications, microstrip or stripline PCB traces may be used.
Common methods for transmitting signals over bus wires include single-ended and differential signaling methods. In applications requiring high speed communications, those methods can be further optimized in terms of power consumption and pin-efficiency, especially in high-speed communications. More recently, vector signaling methods have been proposed to further optimize the trade-offs between power consumption, pin efficiency and noise robustness of chip-to-chip communication systems. In those vector signaling systems, digital information at the transmitter is transformed into a different representation space in the form of a vector codeword that is chosen in order to optimize the power consumption, pin-efficiency and speed trade-offs based on the transmission channel properties and communication system design constraints. Herein, this process is referred to as “encoding”. The encoded codeword is communicated as a group of signals from the transmitter to one or more receivers. At a receiver, the received signals corresponding to the codeword are transformed back into the original digital information representation space. Herein, this process is referred to as “decoding”.
Regardless of the encoding method used, the received signals presented to the receiving device is sampled (or their signal value otherwise recorded) at intervals best representing the original transmitted values, regardless of transmission channel delays, interference, and noise. The timing of this sampling or slicing operation is controlled by an associated Clock and Data Recovery (CDR) timing system, which determines the appropriate sample timing.
BRIEF DESCRIPTION
To reliably detect the data values transmitted over a communications system, a receiver accurately measures the received signal value amplitudes at carefully selected times. In some embodiments, the value of the received signal is first captured at the selected time using a known sample-and-hold or track-and-hold circuit (or known variants such as amplify-and-hold or integrate-and-hold), and then the resulting value is measured against one or more reference values using a known voltage comparator circuit. Other embodiments first use a comparator to “slice” the analog signal and obtain a digital result, then digitally sample the resulting binary value using a clocked digital latch. Further embodiments utilize circuits configured to apply both the time- and amplitude-domain constraints, producing a result that represents the input value at a particular time and relative to a provided reference level.
In many embodiments, a received signal source may be measured by multiple sampling circuits, either to facilitate data reception at rates greater than a single data processing system can sustain (so-called multiphase receiver architectures), or to support ancillary functions such as clock synchronization, test/diagnostic support, etc. In these embodiments, energy leakage such as from clock switching within one sampler may appear as transients at the sampler input (herein described as “kickback”), which may then perturb other sampler measurements of the common input signal. Sampler embodiments are described which produce extremely low levels of kickback energy, making them particularly desirable in such applications.
Methods and systems are described for receiving a signal to be sampled and responsively generating, at a pair of common nodes, a differential current representative of the received signal, receiving a plurality of sampling interval signals, each sampling interval signal received at a corresponding sampling phase of a plurality of sampling phases, for each sampling phase, pre-charging a corresponding pair of output nodes using a pre-charging field-effect transistor (FET) pair receiving the sampling interval signal, forming a differential output voltage by discharging the corresponding pair of output nodes via a discharging FET pair connected to the pair of common nodes, the FET pair receiving the sampling interval signal and selectively enabling the differential current to discharge the corresponding pair of output nodes, and latching the differential output voltage.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 is a schematic diagram of a clocked voltage sampler embodiment.
 FIG. 2 is a schematic diagram of a clocked voltage sampler embodiment further comprising an offset voltage compensator.
 FIGS. 3A, 3B, and 3C are schematic diagrams of a clocked voltage sampler embodiment further comprising linear decoding of a vector signaling code, in accordance with some embodiments.
 FIG. 4 is a schematic diagram of another clocked voltage sampler embodiment.
 FIG. 5 is a block diagram of a multi-phase sampler with low input kickback, in accordance with some embodiments.
 FIGS. 6A and 6B are timing diagrams depicting sampling interval signals, in accordance with some embodiments.
 FIG. 7 is a flowchart of a method, in accordance with some embodiments.

DETAILED DESCRIPTION
To reliably detect the data values transmitted over a communications system, a communications receiver accurately measures its received signal value amplitudes at carefully selected times, typically at or near the center of that received signal's period of stability between transitions. This point is commonly described as the “center of eye”, (referring to the well-known “eye diagram” of signal amplitude vs. clock intervals) and is typically determined by use of a local “receive clock” which is configured to occur at that desirable sampling time. Generation and ongoing control of such receive clock timing is well understood in the art, as Clock Data Alignment (CDA) systems measure and incrementally adjust sample timing versus receive signal stability time to optimize sample timing.
In some embodiments, the value of the received signal is first captured at the selected time using a sample-and-hold or track-and-hold circuit, and then the resulting value is measured against one or more reference values using a known voltage comparator circuit. In alternative embodiments, the signal amplitude is continuously measured using a voltage comparator, with the digital result then sampled in time using a clocked digital latch.
Other embodiments utilize circuits capable of applying both the time- and amplitude-domain constraints, producing a result that represents the input value at a particular time and relative to a provided reference level.
In particular, vector signaling codes of the type described in [Cronie I], [Cronie II], and [Shokrollahi II] may be efficiently decoded using so-called Multi-Input Comparators (MICs) as described in [Holden I] and [Tajalli I]. In one embodiment, each MIC performs an analog computation of the form

sign(a 0 *x 0 + . . . +a m-1 *x m-1),  Eqn. 1

where (x0, x1, xm-1) are the received vector signaling code values, and a0, a1, . . . , am-1 are “weighting factors” associated with each input, and the sign function is defined as:

sign(x)=+1 if x>0,sign(x)=−1 if x<0, and sign(x) is undefined if x=0.

[Holden I] also teaches that Eqn. 1 may be efficiently embodied in a differential amplifier structure having multiple positive and multiple negative inputs, each such input structure representing one element of Eqn. 1. [Ulrich I] further teaches that the weighting factors in such input structures may be efficiently represented as scaled transistor dimensions in an integrated circuit embodiment, or alternatively as paralleled multiple transistor instances where the set of weighting factors may be represented as integer values.
In vector signaling code receivers, each subchannel is composed of a MIC performing the mixing or weighted summation operations for decoding a subchannel, sampling of the resulting output, followed by implementation-specific data processing. At high data rates, four or more phases of data processing may be implemented to keep up with the received symbol rate of the decoders, with each phase typically utilizing its own sampler.
Thus, a single received signal source may be measured by multiple sampling circuits, either to facilitate data reception at rates greater than a single data processing system can sustain, or to support ancillary functions such as clock synchronization, test/diagnostic support, etc. In these embodiments, energy leakage such as from clock switching within one sampler may appear as transients at the sampler input (herein described as “kickback”), which may then perturb other sampler measurements of the common input signal. Sampler embodiments are described that produce extremely low levels of kickback energy, making them particularly desirable in such applications.
Low Kickback Sampler
In many embodiments, a received signal source may be measured by multiple sampling circuits, either to facilitate data reception at rates greater than a single data processing system can sustain (so-called multiphase receiver architectures), or to support ancillary functions such as clock synchronization, test/diagnostic support, etc. In such embodiments, energy leakage such as from clock switching within one sampler may appear as transients at the sampler input (herein described as “kickback”), which may then perturb other sampler measurements of the common input signal. Sampler embodiments are described below that produce extremely low levels of kickback energy, making them particularly desirable in such applications.
 FIG. 1 is a schematic diagram for a clocked sampler embodiment presenting extremely low kickback energy to its inputs. When CK is low, the center two discharging field-effect transistors (FETs) 114, 116 are off, and the two pre-charging PMOS FETs 104, 106 are turned on to charge the parasitic capacitance of 114 and 116 at the output nodes (drain terminals). With both of the output nodes charged, the inputs to the OR-gate latch 110 are both high voltages representing logic 1's, thereby causing both outputs of OUT Ph #1 to be lower voltage logic 0's. VIP (Vin+) and VIN (Vin−) are applied to tail current sources 122 124, respectively. Once CK goes high, the PMOS pre-charging FETs 104, 106 are turned off and the NMOS discharging FETs 114 116 are turned on. Depending on the polarity of Vin, VIP will be high or VIN will be high. Whichever one is high will cause either FET 122 or FET 124 to conduct current thereby discharging the respective output node of either FET 114 (if VIP is high) or FET 116 (if VIN is high). As the respective output node transitions to a logic 0, the corresponding NOR gate of latch 110 will transition to a logic 1. As an example, if VIP is high, FET 122 conducts current and discharges the drain output node of discharging FET 114, causing both inputs to the bottom NOR gate of latch 110 to be 0, causing its output to toggle to a 1, which also locks the top NOR gate of latch 110 to have a logic 0 output. Similarly, the FETs 112, 118, 102, 108 operate in the same way with latch 120, but with the timing associated with clock phase CK. Further, the PMOS/NMOS configurations described above should not be considered limiting, and may be reversed in some embodiments.
Sampler 100 is inherently two-phased, controlled by complementary clocks CK and (CK)−, sampling differential signal inputs VIP and VIN and producing digital results OUTPh#1 and OUTPh#2. The circuit symmetry causes potential clock-related noise injection to be cancelled out, or to appear as less troublesome common-mode input disturbances. Because Node A and Node B are at virtual ground level and thus experience little voltage swing, they are relatively immune to noise induced via parasitic paths from the sampler output or clock inputs. As Nodes A and B experience a small amount of voltage swing due to the isolation from the output nodes, the amount of input kickback that is introduced into input signals VIP and VIN is reduced. Further, the Miller capacitance of the transistors associated with VIP and VIN inputs is extremely low and constant, further reducing input kickback.
One of inputs VIP and VIN may alternatively be used as a reference voltage input and the other as a single-ended received signal input.
 FIG. 5 illustrates a multi-phase sampler with low input kickback, in accordance with some embodiments. As shown, the multi-phase sampler includes a differential current generator 503 configured to receive a signal to be sampled, and to responsively generate, at a pair of common nodes 504, a differential current representative of the received signal. The apparatus further includes a sampling interval signal generator 505 configured to receive a symbol clock and to responsively generate the sampling interval signals P1, P2, . . . Pn on a plurality of sampling interval phase outputs. The apparatus further includes a plurality of samplers 510 a/510 b/ . . . /510 n, each sampler connected to the pair of common nodes 504. In some embodiments, each sampler includes a pre-charging FET pair having a control input connected to one of the plurality of sampling interval phase outputs to pre-charge a pair of output nodes. Further, each sampler may include a FET pair, each FET of the FET pair connected to a corresponding common node of the pair of common nodes, the FET pair having a control input connected to one of the plurality of sampling interval phase outputs and configured to selectively enable the differential current to discharge the pair of output nodes, forming a differential output voltage. The sampler further includes a latch connected to the output nodes of the FET pair, the latch configured to latch the differential output voltage to form outputs Out Ph#1, etc.
Referring to the example given in FIG. 1, it may be observed the schematic of FIG. 1 includes 2 samplers. The first sampler includes pre-charging FET pair 104/106 connected to sampling interval signal CK, and includes discharging FET pair 114/116 connected to sampling interval signal CK to discharge the output nodes connected to latch 110 using differential current generator composed of current sources 122 and 124 receiving the signal to be sampled VIN/VIP. Similarly, FIG. 1 includes a second sampler receiving sampling interval signal CK, the second sampler composed of pre-charging FET pair 102/108, FET pair 112/118, and latch 120.
The described architecture may be extended to support additional sampling phases within the same sampling circuit. FIG. 4 is a schematic diagram of another embodiment, in which the two phase transistor elements of 100 connecting to Node A and Node B in FIG. 1 are replicated. In the resulting four phase clocked sampler embodiment 400, clock phases P1, P2, P3, and P4 are four non-overlapping clock phases, each controlling the sample timing for respective differential outputs OUT Ph#1, OUT Ph#2, OUT Ph#3, OUT Ph#4. Other numbers of sampling phases may be supported by similarly replicating the appropriate number of transistor structures as illustrated by these examples.
 FIGS. 6A and 6B illustrate timing diagrams for sampling interval signals, in accordance with some embodiments. As shown, FIG. 6A illustrates sampling interval signals CK and CK, in accordance with FIG. 1. As shown, sampling interval signals CK and CK are clock signals having a 50% duty cycle and a 180-degree phase difference, and are non-overlapping. FIG. 6B illustrates a set of four sampling interval signals P1/P2/P3/P4 in accordance with FIG. 4. As shown, each sampling interval signal P1/P2/P3/P4 has a duty cycle of 25% and are thus non overlapping. In some embodiments, for a given number of phases n, a duty cycle of each sampling interval may be 1/n·100%. In some embodiments, the sampling interval signal generator may operate on a received symbol clock, which may be received on separate wires of the multi-wire bus, embedded in a sub-channel in orthogonal encoding embodiments, derived from signal transitions on the multi-wire bus, or various other ways of clock data recovery (CDR). In some embodiments, the symbol clock may be used directly, as in FIG. 6A, while alternative embodiments may generate non-overlapping signals such as the sampling interval signals P1/P2/P3/P4 in FIG. 6B.
 FIG. 7 depicts a flowchart of a method 700, in accordance with some embodiments. As shown, method 700 begins at step 702 by receiving a signal to be sampled and responsively generating, at a pair of common nodes, a differential current representative of the received signal. Further, a plurality of sampling interval signals is received 704, each sampling interval signal received at a corresponding sampling phase of a plurality of sampling phases. For example, as shown in FIG. 1, the sampling phase OUT Ph #1 receives sampling interval signal CK, while sampling phase OUT Ph #2 receives sampling interval signal CK. For each sampling phase, a corresponding pair of output nodes are pre-charged 706 using a pre-charging FET pair receiving the sampling interval signal. In FIG. 1, a pre-charging FET pair may include FETs 104 and 106. A differential output voltage is formed 708 by discharging the corresponding pair of output nodes via a discharging FET pair, such as FET pair 114/116 connected to the pair of common nodes, the FET pair receiving the sampling interval signal and selectively enabling the differential current to discharge the corresponding pair of output nodes. Lastly, the differential output voltage is latched 710, for instance using SR latch 110.
In some embodiments, the received signal to be sampled is a differential input signal, such as VIN/VIP shown in FIG. 1. Alternatively, the received signal to be sampled comprises a plurality of signal components corresponding to symbols of a codeword of a vector signaling code, such as signal components Vin1/Vin2/Vin3/Vin4 shown in FIG. 3A. In some embodiments, generating the differential current comprises forming linear combinations of the signal components of the received signal to be sampled. FIGS. 3A-3C illustrate such circuits for forming linear combinations. Specifically, FIG. 3A illustrates the linear combination of (Vin1+Vin2)−(Vin3+Vin4). In such embodiments, the linear combinations are formed using a plurality of current sources. In some embodiments, the plurality of current sources each have equal magnitude, as shown in FIG. 3A and FIG. 3B. Alternatively, a first current source of the plurality of current sources has a magnitude larger than a second current source of the plurality of current sources. Such an embodiment is illustrated by FIG. 3C, where current source depicted by 350 has a magnitude 2× that of current sources depicted by transistors 310 and 320, each having magnitude 1×.
In some embodiments, the pair of common nodes are virtual ground for isolating the received signal to be sampled from the pair of output nodes.
In some embodiments, the method further includes injecting an offset voltage into the pair of common nodes, as shown for example in FIG. 2.
In some embodiments, the plurality of sampling interval signals are non-overlapping, as shown in FIGS. 6A and 6B.
Offset Voltage Compensation
 FIG. 2 is a schematic diagram of an embodiment combining the clocked voltage sampler of FIG. 1 with an offset voltage compensation circuit. As shown, offset voltage compensation circuit takes the form of a differential offset FET pair 210/220. Sampler 100 is effectively identical to the circuit of FIG. 1, with offset voltage compensator 200 injecting corrective voltages VOS+ and VOS− into the pair of common nodes of 100 at Node A and Node B. Voltage VB provides bias current for the offset voltage compensator 200, and should be selected such that the PMOS side current does not exceed the NMOS side current within 200. VB also has a secondary control effect on sampler gain, with low PMOS current relative to NMOS current in 200 correlating with low gain in 100, and similar PMOS and NMOS currents in 200 correlating with higher gain in 100.
The use of a single offset voltage correction circuit 200 for a single sampler 100 providing results to two processing phases results in a lower power utilization for the overall sampler system, compared to known art methods requiring one correction circuit per sampler per processing phase.
The corrective voltages may be used to adjust circuit parameters, such as to compensate for circuit imbalance caused by component mismatch or drift. Alternatively, in at least one embodiment the corrective voltages comprise signal measurement thresholds intentionally introduced to control the switching point for sampler output results. In a further embodiment the corrective voltages comprise communications network compensation values, such as produced by a Decision Feedback Compensation (DFE) system.
Combined Linear Decoder and Sampler
The clocked voltage sampler of FIG. 1 may also be combined with the functionality of a Multi-input comparator (MIC) to produce a single circuit that mixes (i.e. decodes) a vector signaling code input and samples the decoded result. FIG. 3A is a schematic diagram of one such embodiment, in which multiple paralleled input transistors 310, 320, 330, 340 accepting signal components of the received signal to be sampled, shown as vector signaling code inputs Vin1, Vin2, Vin3, and Vin4 respectively. A linear combination of the signal components may be formed to form an output. As shown in FIG. 3A, the linear combination is represented by the equation (Vin1+Vin2)−(Vin3+Vin4). Further, additional paralleled transistors may be attached to Node A and/or Node B, either to support additional inputs, or to provide integer ratio weighting functions for particular inputs, as taught in [Holden I], [Ulrich I], and [Tajalli I]. FIG. 3B is a schematic diagram illustrating the use of transistors 330 and 340 both accepting Vin3 to apply a weight of 2 to Vin 3, while Vin1 and Vin2 each have weights of 1. As such, the linear combination performed by the circuit of FIG. 3B is (Vin1+Vin2)−(2·Vin3). In some embodiments, a sum of weights connected to each Node A and Node B is equal, representing a balanced condition. FIG. 3C illustrates a further embodiment utilizing weighting, in which transistors 330 and 340, each having weights of 1, are replaced by a single transistor 350 receiving Vin3 and having a weight of 2. In such embodiments, transistor 350 may have different characteristics than transistors 310 and 320 applying weights of 1 to Vin1 and Vin2, respectively. Such characteristics may include differing transistor width/length, for instance. Similar to FIG. 3B, the circuit depicted by FIG. 3C represents the linear combination of (Vin1+Vin2)−(2·Vin3). In some embodiments, 300 may be combined with 200 of FIG. 2 to inject offset voltage corrections into Node A and Node B, e.g. to support DFE correction.
It should be noted that the term “circuit” may mean, among other things, a single component or a multiplicity of components, which are active and/or passive, and which are coupled together to provide or perform a desired function. The term “circuitry” may mean, among other things, a circuit, a group of such circuits, one or more processors, one or more state machines, one or more processors implementing software, one or more gate arrays, programmable gate arrays and/or field programmable gate arrays, or a combination of one or more circuits (whether integrated or otherwise), one or more state machines, one or more processors, one or more processors implementing software, one or more gate arrays, programmable gate arrays and/or field programmable gate arrays.
It should be further noted that the various circuits and circuitry disclosed herein may be described using computer aided design tools and expressed (or represented), as data and/or instructions embodied in various computer-readable media, for example, in terms of their behavioral, register transfer, logic component, transistor, layout geometries, and/or other characteristics. Formats of files and other objects in which such circuit expressions may be implemented include, but are not limited to, formats supporting behavioral languages such as C, Verilog, and HLDL, formats supporting register level description languages like RTL, and formats supporting geometry description languages such as GDSII, GDSIII, GDSIV, CIF, MEBES and any other suitable formats and languages. Computer-readable media in which such formatted data and/or instructions may be embodied include, but are not limited to, non-volatile storage media in various forms (e.g., optical, magnetic or semiconductor storage media) and carrier waves that may be used to transfer such formatted data and/or instructions through wireless, optical, or wired signaling media or any combination thereof. Examples of transfers of such formatted data and/or instructions by carrier waves include, but are not limited to, transfers (uploads, downloads, e-mail, etc.) over the Internet and/or other computer networks via one or more data transfer protocols (e.g., HTTP, FTP, SMTP, etc.). The embodiments described are also directed to such representation of the circuitry described herein, and/or techniques implemented thereby, and, as such, are intended to fall within the scope of the present embodiments.
Moreover, the various circuits and circuitry, as well as techniques, disclosed herein may be represented via simulations and simulation instruction-based expressions using computer aided design, simulation and/or testing tools. The simulation of the circuitry described herein, and/or techniques implemented thereby, may be implemented by a computer system wherein characteristics and operations of such circuitry, and techniques implemented thereby, are simulated, imitated, replicated, analyzed and/or predicted via a computer system. Simulations and testing of the devices and/or circuitry described herein, and/or techniques implemented thereby, and, as such, are intended to fall within the scope of the present embodiments. The computer-readable media and data corresponding to such simulations and/or testing tools are also intended to fall within the scope of the present embodiments.

The invention claimed is:
 
1. An apparatus comprising:
a differential current generator configured to receive a signal to be sampled and to responsively generate, at a pair of common nodes, a differential current representative of the received signal;
a sampling interval signal generator configured to receive a symbol clock and to responsively generate a plurality of sampling interval signals on a plurality of sampling interval phase outputs; and,
a plurality of samplers, each sampler connected to the pair of common nodes, each sampler comprising:
a pre-charging field-effect transistor (FET) pair having a control input connected to one of the plurality of sampling interval phase outputs to pre-charge a pair of output nodes;
a discharging FET pair, each FET of the discharging FET pair connected to a corresponding common node of the pair of common nodes, the discharging FET pair having a control input connected to one of the plurality of sampling interval phase outputs to selectively enable the differential current to discharge the pair of output nodes, forming a differential output voltage; and
a latch connected to the pair of output nodes, the latch configured to latch the differential output voltage.



  
2. The apparatus of claim 1, wherein the received signal is a differential input signal, and wherein the differential current generator comprises a corresponding current source connected to each common node, each current source receiving a corresponding input signal of the differential input signal.

  
3. The apparatus of claim 1, wherein the received signal comprises a plurality of signal components representing symbols of a codeword of a vector signaling code.

  
4. The apparatus of claim 3, wherein the differential current generator comprises a plurality of current sources connected to at least a first node of the pair of common nodes, each current source of the plurality of current sources configured to receive a corresponding signal component of the received signal.

  
5. The apparatus of claim 4, wherein the plurality of current sources each have an equal current magnitude.

  
6. The apparatus of claim 4, wherein a first current source of the plurality of current sources has a magnitude larger than a second current source of the plurality of current sources.

  
7. The apparatus of claim 1, wherein a total magnitude of current sources connected to each common node is balanced.

  
8. The apparatus of claim 1, wherein the pair of common nodes are virtual ground and configured to isolate the differential current generator from the pair of output nodes.

  
9. The apparatus of claim 1, further comprising an offset voltage compensation circuit connected to the pair of common nodes configured to inject an offset voltage into the pair of common nodes.

  
10. The apparatus of claim 1, wherein the sampling interval signals in the plurality of sampling interval signals are non-overlapping.

  
11. A method comprising:
receiving a signal to be sampled and responsively generating, at a pair of common nodes, a differential current representative of the received signal;
receiving a plurality of sampling interval signals, each sampling interval signal received at a corresponding sampling phase of a plurality of sampling phases, for each sampling phase:
pre-charging a corresponding pair of output nodes using a pre-charging FET pair receiving the sampling interval signal;
forming a differential output voltage by discharging the corresponding pair of output nodes via a discharging FET pair connected to the pair of common nodes, the FET pair receiving the sampling interval signal and selectively enabling the differential current to discharge the corresponding pair of output nodes; and
latching the differential output voltage.



  
12. The method of claim 11, wherein the received signal to be sampled is a differential input signal.

  
13. The method of claim 11, wherein the received signal to be sampled comprises a plurality of signal components corresponding to symbols of a codeword of a vector signaling code.

  
14. The method of claim up, wherein generating the differential current comprises forming linear combinations of the signal components of the received signal to be sampled.

  
15. The method of claim 14, wherein the linear combinations are formed using a plurality of current sources.

  
16. The method of claim 15, wherein a first current source of the plurality of current sources has a magnitude larger than a second current source of the plurality of current sources.

  
17. The method of claim 15, wherein the plurality of current sources have equal magnitude.

  
18. The method of claim 11, wherein the pair of common nodes are virtual ground for isolating the received signal to be sampled from the pair of output nodes.

  
19. The method of claim 11, further comprising injecting an offset voltage into the pair of common nodes.

  
20. The method of claim 11, wherein the sampling interval signals in the plurality of sampling interval signals are non-overlapping.