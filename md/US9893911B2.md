# US9893911B2 - US9893911B2 - Multidrop data transfer 
        - Google Patents

## Details

* Date: 2014-07-21
* Inventor: Kandou Labs SA
* Beneficiary: Ali Hormati, Amin Shokrollahi
## Other patents

### Backwards
 * US668687A
 *US780883A
 *US3196351A
 *US3636463A
 *US3939468A
 *US4163258A
 *US4181967A
 *US4206316A
 *US4276543A
 *US4486739A
 *US4499550A
 *US4722084A
 *US4772845A
 *US4774498A
 *US4864303A
 *US4897657A
 *US4974211A
 *US5017924A
 *US5053974A
 *US5166956A
 *US5168509A
 *US5266907A
 *US5283761A
 *US5287305A
 *US5311516A
 *US5331320A
 *US5412689A
 *US5449895A
 *US5459465A
 *US5461379A
 *US5511119A
 *US5553097A
 *US5566193A
 *US5599550A
 *US5626651A
 *US5629651A
 *US5659353A
 *US5727006A
 *US5748948A
 *US5802356A
 *US5825808A
 *US5856935A
 *US5875202A
 *US5945935A
 *US5949060A
 *US5982954A
 *US5995016A
 *US5999016A
 *US6005895A
 *US6084883A
 *US6119263A
 *US6172634B1
 *US6175230B1
 *US6232908B1
 *US20010006538A1
 *US6278740B1
 *US6316987B1
 *US20010055344A1
 *US6346907B1
 *US20020034191A1
 *US20020044316A1
 *US6378073B1
 *US20020057592A1
 *US6398359B1
 *US6404820B1
 *US6417737B1
 *US6433800B1
 *US6452420B1
 *US20020154633A1
 *US6473877B1
 *US20020163881A1
 *US6483828B1
 *US20020174373A1
 *US6509773B2
 *US20030016770A1
 *US6522699B1
 *US6556628B1
 *US6563382B1
 *JP2003163612A
 *US20030146783A1
 *US6621427B2
 *US6624699B2
 *US6650638B1
 *US6661355B2
 *US6664355B2
 *US20040027185A1
 *US6766342B2
 *US20040146117A1
 *US20040161019A1
 *US20040169529A1
 *US6839429B1
 *US6839587B2
 *US6854030B2
 *US6865234B1
 *US6865236B1
 *US20050063493A1
 *US6876317B2
 *US20050134380A1
 *US6927709B2
 *US20050174841A1
 *US20050213686A1
 *US6954492B1
 *US6963622B2
 *US6972701B2
 *US6973613B2
 *US6976194B2
 *US6990138B2
 *US6993311B2
 *US6991038B2
 *US6999516B1
 *US7023817B2
 *US7039136B2
 *US20060097786A1
 *US20060103463A1
 *US7053802B2
 *US20060120486A1
 *US20060126751A1
 *US20060133538A1
 *US7080288B2
 *US7082557B2
 *US7085153B2
 *US7127003B2
 *US7142612B2
 *US7142865B2
 *US7164631B2
 *US7167019B2
 *US7180949B2
 *US7199728B2
 *US20070121716A1
 *US7231558B2
 *US20070204205A1
 *US7269212B1
 *US7269130B2
 *US20070263711A1
 *US20080007367A1
 *US7335976B2
 *US7336112B1
 *US7339990B2
 *US7346819B2
 *US7348989B2
 *US7356213B1
 *US7358869B1
 *US7362697B2
 *US7366942B2
 *US20080104374A1
 *US7370264B2
 *US7372390B2
 *US7389333B2
 *US20080159448A1
 *US7397302B2
 *US7400276B1
 *US20080192621A1
 *US7456778B2
 *US7462956B2
 *US20080317188A1
 *US7496162B2
 *US20090059782A1
 *EP2039221A1
 *US7535957B2
 *US7539532B2
 *CN101478286A
 *WO2009084121A1
 *US20090195281A1
 *US7599390B2
 *US7616075B2
 *US7620116B2
 *US7633850B2
 *US20090316730A1
 *US7639596B2
 *US20090323864A1
 *US7650525B1
 *US7656321B2
 *US20100046644A1
 *WO2010031824A1
 *US7694204B2
 *US7697915B2
 *US7698088B2
 *US7706456B2
 *US7706524B2
 *US7746764B2
 *US20100180143A1
 *US20100215087A1
 *US20100215112A1
 *US7787572B2
 *US20100235673A1
 *US7804361B2
 *US7808456B2
 *US7808883B2
 *US20100296556A1
 *US7841909B2
 *US20100309964A1
 *US7869546B2
 *US7869497B2
 *US20110014865A1
 *US7882413B2
 *US7899653B2
 *US20110051854A1
 *US20110072330A1
 *US20110084737A1
 *US7933770B2
 *US8000664B2
 *WO2011119359A2
 *US8030999B2
 *US8036300B2
 *US8050332B2
 *US20110268225A1
 *US8055095B2
 *US8064535B2
 *US20110302478A1
 *US20110299555A1
 *US8085172B2
 *US20110317559A1
 *US8091006B2
 *US8106806B2
 *US8149906B2
 *US8159376B2
 *US8180931B2
 *US8185807B2
 *US8199849B2
 *US8199863B2
 *US20120152901A1
 *US20120161945A1
 *US8218670B2
 *US8233544B2
 *US8245094B2
 *US8253454B2
 *US8279745B2
 *US8279094B2
 *US20120257683A1
 *US8289914B2
 *US8295250B2
 *US8295336B2
 *US8310389B1
 *US8341492B2
 *US20130010892A1
 *US8359445B2
 *US8365035B2
 *US8406316B2
 *US8429492B2
 *US8429495B2
 *US8437440B1
 *US8442099B1
 *US8443223B2
 *US20130147553A1
 *US8472513B2
 *US20130188656A1
 *US8498368B1
 *US20130195155A1
 *US8520348B2
 *US8547272B2
 *US8578246B2
 *US8588254B2
 *US8593305B1
 *US20130315501A1
 *US8604879B2
 *US8602643B2
 *US8620166B2
 *US8638241B2
 *US8643437B2
 *US8649840B2
 *US8649556B2
 *US8649460B2
 *US8649445B2
 *US8674861B2
 *US8687968B2
 *US8711919B2
 *US8718184B1
 *US8755426B1
 *US8773964B2
 *US8782578B2
 *US8780687B2
 *US8807134B2
 *US8831440B2
 *US8879660B1
 *US8898504B2
 *US8938171B2
 *US8949693B2
 *US8951072B2
 *US8975948B2
 *US20150078479A1
 *US8989317B1
 *US9036764B1
 *US20150146771A1
 *US9059816B1
 *US9069995B1
 *US9077386B1
 *US9083576B1
 *US9093791B2
 *US9100232B1
 *US9124557B2
 *US20150249559A1
 *US9148087B1
 *US9152495B2
 *US9172412B2
 *US9178503B2
 *US9183085B1
 *US9197470B2
 *US20150380087A1
 *US9281785B2
 *US9288082B1
 *US9292716B2
 *US9306621B2
 *US9331962B2
 *US9362974B2
 *US9374250B1
 *US9432082B2
 *US9432298B1
 *US9444654B2
 *US9455765B2
 *US9455744B2
 *US9509437B2
 *US9544015B2
### Forward
 * 
## Abstract

Abstract

Multi-drop communications channels can have significantly deep notches in their frequency response causing a corresponding limitation of the effective data transmission rate. A special time-ordered coding method is described which results in the emitted spectrum of the data stream transmitted into the channel having a notch at the same frequency as the notch in the channel frequency response, permitting channel receivers to successfully decode the transmitted data stream. The described coding method may be applied at various multiples of the channel notch frequency to support different throughput rates, and may be combined with other coding techniques such as group or vector signaling codes.



Multi-drop communications channels can have significantly deep notches in their frequency response causing a corresponding limitation of the effective data transmission rate. A special time-ordered coding method is described which results in the emitted spectrum of the data stream transmitted into the channel having a notch at the same frequency as the notch in the channel frequency response, permitting channel receivers to successfully decode the transmitted data stream. The described coding method may be applied at various multiples of the channel notch frequency to support different throughput rates, and may be combined with other coding techniques such as group or vector signaling codes.

This Application is a continuation of Ser. No. 14/803,996, naming Ali Hormati and Amin Shokrollahi, entitled “Multidrop Data Transfer,” which claims the benefit of U.S. Provisional Patent Application 62/026,860, filed Jul. 21, 2014, naming Ali Hormati and Amin Shokrollahi, entitled “Multidrop Data Transfer”, all of which are herein incorporated by reference in their entirety.
REFERENCES
The following references are herein incorporated by reference in their entirety for all purposes:
U.S. Patent Publication No. 2011/0268225 of U.S. patent application Ser. No. 12/784,414, filed May 20, 2010, naming Harm Cronie and Amin Shokrollahi, entitled “Orthogonal Differential Vector Signaling” (hereinafter “Cronie I”);
U.S. Patent Publication No. 2011/0302478 of U.S. patent application Ser. No. 13/154,009, filed Jun. 6, 2011, naming Harm Cronie and Amin Shokrollahi, entitled “Error Control Coding for Orthogonal Differential Vector Signaling” (hereinafter “Cronie II”);
U.S. patent application Ser. No. 13/030,027, filed Feb. 17, 2011, naming Harm Cronie, Amin Shokrollahi and Armin Tajalli, entitled “Methods and Systems for Noise Resilient, Pin-Efficient and Low Power Communications with Sparse Signaling Codes” (hereinafter “Cronie III”);
U.S. Patent Publication No. 2011/0299555 of U.S. patent application Ser. No. 13/154,009, filed Jun. 6, 2011, naming Harm Cronie and Amin Shokrollahi, entitled “Error Control Coding for Orthogonal Differential Vector Signaling” (hereinafter “Cronie IV”);
U.S. Provisional Patent Application No. 61/763,403, filed Feb. 11, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox I”);
U.S. Provisional Patent Application No. 61/773,709, filed Mar. 6, 2013, naming John Fox, Brian Holden, Peter Hunt, John D Keay, Amin Shokrollahi, Andrew Kevin John Stewart, Giuseppe Surace, and Roger Ulrich, entitled “Methods and Systems for High Bandwidth Chip-to-Chip Communications Interface” (hereinafter called “Fox II”);
U.S. Provisional Patent Application No. 61/812,667, filed Apr. 16, 2013, naming John Fox, Brian Holden, Ali Hormati, Peter Hunt, John D Keay, Amin Shokrollahi, Anant Singh, Andrew Kevin John Stewart, and Giuseppe Surace, entitled “Methods and Systems for High Bandwidth Communications Interface” (hereinafter called “Fox III”);
U.S. patent application Ser. No. 13/842,740, filed Mar. 15, 2013, naming Brian Holden, Amin Shokrollahi, and Anant Singh, entitled “Methods and Systems for Skew Tolerance and Advanced Detectors for Vector Signaling Codes for Chip-to-Chip Communication” (hereinafter called “Holden I”);
U.S. patent application Ser. No. 13/895,206, filed May 15, 2013, naming Roger Ulrich and Peter Hunt, entitled “Circuits for Efficient Detection of Vector Signaling Codes for Chip-to-Chip Communications using Sums of Differences” (hereinafter called “Ulrich I”).
U.S. patent application Ser. No. 14/315,306, filed Jun. 25, 2014, naming Roger Ulrich, entitled “Multilevel Driver for High Speed Chip-to-Chip Communications” (hereinafter called “Ulrich II”).
U.S. Provisional Patent Application No. 61/934,804, filed Feb. 2, 2014, naming Ali Hormati and Amin Shokrollahi, entitled “Method for Code Evaluation using ISI Ratio” (hereinafter called “Hormati I”).
U.S. Provisional Patent Application No. 61/992,711, filed May 13, 2014, naming Amin Shokrollahi, entitled “Vector Signaling Code with Improved Noise Margin” (hereinafter called “Shokrollahi I”).
U.S. Provisional Patent Application No. 62/023,163, filed Jul. 10, 2014, naming Amin Shokrollahi and Roger Ulrich, entitled “Vector Signaling Code with Improved Noise Margin” (hereinafter called “Shokrollahi II”).
BACKGROUND
In communication systems, a goal is to transport information from one physical location to another. It is typically desirable that the transport of this information is reliable, is fast and consumes a minimal amount of resources. One common information transfer medium is the serial communications link, which may be based on a single wire circuit relative to ground or other common reference, or multiple such circuits relative to ground or other common reference. A common example uses singled-ended signaling (“SES”). SES operates by sending a signal on one wire, and measuring the signal relative to a fixed reference at the receiver. A serial communication link may also be based on multiple circuits used in relation to each other. A common example of the latter uses differential signaling (“DS”). Differential signaling operates by sending a signal on one wire and the opposite of that signal on a matching wire. The signal information is represented by the difference between the wires, rather than their absolute values relative to ground or other fixed reference.
There are a number of signaling methods that maintain the desirable properties of DS while increasing pin efficiency over DS. Vector signaling is a method of signaling. With vector signaling, a plurality of signals on a plurality of wires is considered collectively although each of the plurality of signals might be independent. Each of the collective signals is referred to as a component and the number of plurality of wires is referred to as the “dimension” of the vector. In some embodiments, the signal on one wire is entirely dependent on the signal on another wire, as is the case with DS pairs, so in some cases the dimension of the vector might refer to the number of degrees of freedom of signals on the plurality of wires instead of exactly the number of wires in the plurality of wires.
With binary vector signaling, each component or “symbol” of the vector takes on one of two possible values. With non-binary vector signaling, each symbol has a value that is a selection from a set of more than two possible values. The set of values that a symbol of the vector may take on is called the “alphabet” of the vector signaling code. A vector signaling code, as described herein, is a collection C of vectors of the same length N, called codewords. Any suitable subset of a vector signaling code denotes a “subcode” of that code. Such a subcode may itself be a vector signaling code. Orthogonal Differential Vector Signaling codes (ODVS) as described in [Cronie I] are one specific example of a vector signaling code as used in descriptions herein.
In operation, the coordinates of the codewords are bounded, and we choose to represent them by real numbers between −1 and 1. The ratio between the binary logarithm of the size of C and the length N is called the pin-efficiency of the vector signaling code.
A vector signaling code is called “balanced” if for all its codewords the sum of the coordinates is always zero. Balanced vector signaling codes have several important properties. For example, as is well-known to those of skill in the art, balanced codewords lead to lower electromagnetic interference (EMI) noise than non-balanced ones. Also, if common mode resistant communication is required, it is advisable to use balanced codewords, since otherwise power is spent on generating a common mode component that is cancelled at the receiver.
Additional examples of vector signaling methods are described in Cronie I, Cronie II, Cronie III, Cronie IV, Fox I, Fox II, Fox III, Holden I, Shokrollahi I, and Hormati I.
BRIEF DESCRIPTION
The unavoidable impedance anomalies seen in multi-drop communications channels introduce corresponding deep notches in the channel frequency response and a corresponding limitation of the effective data rate in conventional systems. This is true even if the channel spectrum after the notch does not show high attenuation and is still usable. A special time-ordered coding method is described which results in the emitted spectrum of the data stream transmitted into the channel having a notch at the same or at a similar frequency as the notch in the channel frequency response, permitting channel receivers to successfully decode the transmitted data stream.

BRIEF DESCRIPTION OF FIGURES
 FIG. 1 illustrates a typical multidrop communications system comprising of transmitter 110 and receivers 130 and 150, interconnected by a multi-wire communications channel 120.
 FIG. 2 illustrates data frame sequences in accordance with at least one embodiment using different rate multiplier values M.
 FIG. 3A shows the frequency response characteristics of an example channel, with FIG. 3B showing the same channel's impulse response.
 FIG. 4A is a receive eye diagram for one embodiment using the channel of FIG. 3A with M=2. FIG. 4B is a receive eye diagram of the same channel and raw signaling rate, without benefit of described embodiments.
 FIG. 5 shows the frequency response characteristics of another example channel, and receive eye diagrams for an embodiment utilizing different values of rate multiplier M.
 FIG. 6 is a flowchart of a process in accordance with at least one embodiment.
 FIG. 7 is a flowchart of another process in accordance with at least one embodiment.

DETAILED DESCRIPTION
It is well understood that at high data rates, communications channels must be treated as high-frequency transmission lines. As such, each connection anomaly in the communications signal path may introduce an impedance variation which causes some portion of the propagating transmit waveform to be reflected, both weakening the portion of the waveform continuing on, and producing a backwards-propagating waveform which may potentially be reflected from other impedance anomalies to produce delayed versions of the signal waveform which can distort or interfere with the primary waveform.
Multidrop communications channels such as illustrated in FIG. 1 may be profoundly impacted by such propagation issues. In the example shown, transmitting device 110 drives signals onto the wires 125 which collectively comprise communications channel 120. Receiving devices 130 and 150 are both potential recipients of such signals. However, the wires 128 through which receiving device 150 connects to communications channel 120 represents a “stub” transmission line element which represents a significant impedance anomaly in communications channel 120, as signals propagating on wires 125 must split and follow two paths to receiving devices 130 and 150.
One familiar with the art will note that such a multidrop configuration will typically be associated with a notch in the frequency response characteristics measured for the channel, as shown by the graph of FIG. 3A, with the notch frequency inversely proportional to the propagation delay of the signal traversing the distance from the transmitter to the impedance anomaly, at the propagation velocity of the communications medium. In the time domain, this same effect will appear as a significant reflected signal with a time delay proportional to the distance from the transmitter to the impedance bump at the propagation velocity of the communications channel, as shown in the graph of FIG. 3B. As will be readily understood by those familiar with the art, additional multi-drop connections will exacerbate this situation, with a worst case being the uniform periodic spacing intervals seen on busses in a multi-card backplane or in a stacked chip configuration.
Basic Concept
If one attempted to transmit digital signals over such a communications medium at varying data rates, one would observe that the “goodput” (i.e. the rate at which good or non-disrupted data is received) over the medium varies significantly, with particularly poor transmission characteristics occurring at rates at or above the notch frequencies of the frequency response. In the time domain, this may be interpreted as the transmitted signal appearing at a receiver simultaneous with a delayed version of a previously transmitted signal, resulting in a marginal or corrupted detection result.
Conversely, it is observed that if the transmission rate is set to an integer multiple of the notch frequency so as to create a “frame” of N data units D1, . . . , DN, the data unit transmission interfering with, as an example, data unit DN must be one of the earlier-transmitted data units D1, . . . , DN-1. Knowing the data to be transmitted in DN allows a value to be chosen for transmission in the earlier (e.g. interfering) time interval which will constructively interact with DN to facilitate its reception, one example being transmission of the same channel signal value during both the earlier and later time intervals. Alternatively, a value may be transmitted in the earlier time interval which will not impact reception of DN, an example being transmission of a quiescent or “zero” value on a channel where the data signals are +1 and −1, another example being the inverse of the data, if the delayed interfering signal is also inverted.
Sequentially Transmitted Data Frame
A first embodiment utilizes a data frame whose period T is equal to 1/fnotch, where fnotch is the frequency of the first notch in the channel's frequency response. The frame is divided into 2*M partitions of equal duration, where M is an integer typically greater than one, the sequence of partitions representing the consecutively transmitted signal unit intervals for the data stream. The first half of the frame may be herein referred to as the first transmit frame of M symbols. The second half of the frame may be herein referred to as the subsequent transmit frame of M symbols The general form of this frame is:
                               Time T = 0                 T = 1/Fnotch    Data D1  D2  D3  . . . DM  D1  D2  D3  . . . DM              
where Di represents the levels of the signaling scheme used for the transmission, e.g, ±1 for binary data transmission, and each of the M data units D1, . . . , DM are transmitted twice, with the same sequence of M transmissions emitted in the first transmit frame being repeated in the same order in the subsequent transmit frame, resulting in an overall throughput equal to M*fnotch. As one familiar with the art will observe, the frequency spectrum of such a periodically repeating message format has notches at frequencies (2K+1)*fnotch and therefore, we can recover the data sequence D1, D2, D3, . . . , DM successfully at the receiver by sampling at (2*M)*fnotch rate, discarding the first set of M samples (i.e. those in the first transmit frame,) and keeping the subsequent set of M samples as representing D1, . . . , DM.

This data frame sequence is also illustrated in FIG. 2, where binary data transmissions are shown with M=2, M=3, and M=4. The sequential data values being transmitted in the subsequent transmit frame are shown as D1, . . . , DM and the compensatory values being transmitted in the first transmit frame are shown as D1′, . . . , DM′. Thus for the M=2 example, the raw transmission rate is 4*fnotch, with each of data units D1 and D2 being transmitted twice within the data frame spanning time t0 to time t3, with the overall duration of the frame being 1/fnotch as shown.
In the time domain, a multidrop channel with a notch at fnotch adds a delayed and attenuated version of the input signal to itself where the delay is equal to t=1/(2*fnotch). Looking at our data frame, it is obvious that while the data elements transmitted during the first transmit frame will interfere with data elements of the subsequent transmit, forming a channel-induced superposition. This channel-induced superposition may be made additive with the described timing and repetitive data transmission, thus providing an increased receiver eye opening.
Alternative Embodiments
An alternative embodiment transmits one half frame of zeroes or a comparable quiescent channel signal in the first transmit frame, and data in the subsequent transmit frame, thus damping out the interfering delayed signals. Thus, referring to FIG. 2, in this embodiment the compensatory values D1′, . . . , DM′ would be zeroes. However, such an embodiment will present a smaller receive eye vertical opening than the previously-described method of sending each data value twice, as there is no constructive interference to boost the received signal. It may be noted that with this method the receiver will also see signals in the first half of the subsequent frame including an immediate zero value and a delayed data value from the second half of the previous frame, providing an opportunity for an embodiment making two independent observations of the same set of M bits.
A further alternative embodiment transmits one half frame of inverted data values in the first transmit frame, followed by one half frame of non-inverted data values in the subsequent transmit frame, providing a channel-induced superposition representing constructive interference in situations where the interfering delayed signal is inverted by reflection. Referring again to FIG. 2, in this embodiment the compensatory values D1′, . . . , DM′ would be the logical inverse of the values transmitted as D1, . . . , DM.
As will be apparent to one familiar with the art, equivalent patterns for the data frame include data followed by inverted data, data followed by zeroes, etc.
Additional Variations
It should be noted that the described embodiments are applied per-wire, thus may be combined with known multi-wire coding schemes in an obvious way, i.e. transmitting sequences of codewords of a vector signaling code on multiple wires rather than single bits on one wire, and repeating the sequence of codewords during the second half of the frame. Similarly, although the examples provided illustrate binary channel signaling for descriptive convenience, no limitation is implied as present embodiment are directly applicable to ternary, quaternary, and higher-order signaling as well.
Because the transmission rate for the data frame is determined based on the channel notch frequency, the notch frequency will ideally be known at least approximately before-hand. For common configurations such as backplanes, stacked chips, etc. the physical dimensions and composition of the channel is fixed, and its expected characteristics are thus well known. Alternatively, other embodiments may measure the channel and set the communications data rate as part of a setup or initialization procedure for the circuit, the channel measurement either being performed directly as a signal strength vs. frequency plot, or indirectly by measuring pulse reflection times (i.e. as a time-domain reflectometer or TDR measurement.)
Some embodiments may maintain individual channel compensation parameters per receiver or set of receivers, so as to optimize reception for the anticipated, calculated, or measured reflection combinations at those particular receiver locations. Other embodiments may use a consensus or average compensation parameters for all receivers. These compensation parameters may include the notch frequency, multiplication factor M, and format of the data frame, including polarity and type of corrective signals incorporated in it. The compensation parameters may differ for different transmitters; as one particular example, the characteristics of the channel and thus the preferred compensation parameters may not be symmetric in both directions.
In practical embodiments, the transmission rate may merely approximate the optimal 2*M*fnotch rate with only modest reduction in received signal quality, determined in part by the depth and width of the channel notch.
Illustrated Results
An embodiment having a channel with a frequency response notch at approximately 900 MHz as shown in the graph of FIG. 3A was used with a data frame where M=2, resulting in a raw transmit data rate of 1.8 Gbps. A transmit FIR filter was used equal to [0.7, −0.3]. The receive eye diagram in this configuration is shown as FIG. 4A. For comparison, the receive eye diagram when sending arbitrary data (i.e. without the described data frame and its duplicated transmissions) at 1.8 Gbps over this channel is shown as FIG. 4B, showing significantly poorer signal reception relative to the described signaling method.
 FIG. 5 illustrates the performance characteristics of another embodiment. The deeply notched frequency response characteristics of the channel used by this embodiment is shown in the first graph labeled “Channel”, with subsequent graphs labeled “M=2” through “M=6” showing the receiver eyes for transmission across that channel with increasing values of M.
Further Embodiments
The following descriptions use the term “delta” as a relative metric of the depth of the frequency response notch for the channel, with delta=1 for a very deep notch and delta=0 for no notch at all.
In a further embodiment using single-ended NRZ coding, a previously-described example data frame of [d1 d2 d1 d2] is replaced by a data frame of [d1 d2 d1 d2 d3 d4]. Bits d1 and d2 (at positions 3 and 4) can be decided directly and bits d3 and d4 can be decided with known Decision Feedback Equalization (DFE) techniques at the receiver. Detection of d3 needs to know d1 (the earlier signal interfering with it) and, similarly, detecting d4 needs to know d2. DFE allows these earlier received signals to be subtracted from the present sample, leaving a disambiguated sample to be detected. In this embodiment, the frame length (the duration in time of [d1 d2 d1 d2 d3 d4]) is set to 1.5/fnotch, allowing data transmission at the rate of 4/1.5*fnotch=2.66*fnotch. The DFE level depends on delta and can be set adaptively. The same technique works with a data frame structured as [0 0 d1 d2 d3 d4].
A second further embodiment uses a 5-level driver, and sends the sequence [a b a b c-a d-b] in 1.5/fnotch time. As one familiar with the art will note, the expected receive sequence will thus be [junk, junk, a*(1+delta), b*(1+delta), c−a*(1−delta), d−b*(1−delta)]. I f delta is close to 1 (e.g. −20 dB or so), then the vertical opening of c−a*(1−delta), d−b*(1−delta) is slightly smaller than the normal vertical opening (same for the horizontal opening), and the symbols are principally binary (thus, according to the teachings of [Hormati I], ISI ratio=1.) This embodiment allows 4 bits to be sent in 1.5/fnotch time, so in total 2.666*fnotch bits/second/wire.
A third further embodiment is applicable if the reflection is not so powerful, i.e. delta is, for example, on the order of 0.3. In this embodiment, a Tx FIR of [1 0−delta] is used to filter the transmitted data. On the receiver side, one obtains data in the form d2−delta2 d0˜=d2 and since delta is small, it will not close the eyes considerably. Prior knowledge or measurement of delta is needed by this embodiment.
If delta is close to 1 (i.e. a deep notch), a fourth further embodiment uses frames like [d0 d1 d0 d1 (d0*d2) (d1*d3) (d0*d2*d4) (d1*d3*d5)] over 2/fnotch, sending data at the rate of 6/2*fnotch=3*fnotch. On the receiver side, the first two UIs in this frame get corrupted by the previous frame. Bits d0 and d1 at positions 3 and 4 can be extracted by PAM2 detection. For the next bit we obtain d0*d2+delta*d0=d0*(delta+d2)˜=d0*(1+d2). One can extract d2 by performing a PAM3 detection to see if d0*(1+d2) is zero or not. If zero, d2=−1 otherwise, d2=1. In the same way, one can obtain bits d3, d4 and d5. As a further advantage, this technique limits the error propagation.
Embodiments
As shown in FIG. 6, a method 600 in accordance with at least one embodiment comprises receiving, at step 602, a frame of M receive symbols on a wire of a multi-wire bus, the multi-wire bus having a notch frequency fnotch, wherein each receive symbol of the received frame of M symbols comprises a channel-induced superposition of a transmit symbol of a first transmit frame of M symbols and a corresponding transmit symbol of a subsequent transmit frame of M symbols, wherein the first and subsequent transmit frames have a 2*M*fnotch symbol rate, and, forming, at step 604, a set of output symbols by decoding the M receive symbols using at least one prior decoded transmit symbol.
In at least one embodiment, first transmit frame of M symbols is equal to the subsequent transmit frame of M symbols.
In at least one embodiment, the first transmit frame of M symbols comprises all quiescent symbols.
In at least one embodiment, the first transmit frame of M symbols is an inverted version of the subsequent transmit frame of M symbols.
In at least one embodiment, the first transmit frame of M symbols and the subsequent transmit frame of symbols are distinct. In at least one embodiment, the first transmit frame of M symbols comprises at least one prior decoded transmit symbol, and the decoding the M receive symbols comprises forming at least one output symbol based on the superposition of the at least one prior decoded transmit symbol and the corresponding transmit symbol of the subsequent transmit frame
In at least one embodiment, the notch frequency is determined by an impedance anomaly.
In at least one embodiment, the impedance anomaly is represented as multiple receivers connected to the multi-wire data bus.
In at least one embodiment, the corresponding transmit symbol represents a combination of at least 2 distinct symbols.
As shown in FIG. 7, a method 700 in accordance with at least one embodiment comprises receiving, at step 702, a set of input symbols, generating, at step 704, a transmit frame comprising M symbols, generating, at step 706, a subsequent transmit frame comprising M symbols, transmitting, at step 708, the symbols of the transmit frame on a wire of a multi-wire bus at a symbol rate of 2*M*fnotch, wherein fnotch is a notch frequency associated with the multi-wire bus, and, subsequently transmitting, at step 710, the symbols of the subsequent transmit frame on the wire of the multi-wire bus at the symbol rate of 2*M*fnotch.
In at least one embodiment, an apparatus comprises a wire of a multi-wire bus configured to receive a frame of M receive symbols, the multi-wire bus having a notch frequency fnotch, wherein each receive symbol of the received frame of M symbols comprises a channel-induced superposition of a transmit symbol of a first transmit frame of M symbols and a corresponding transmit symbol of a subsequent transmit frame of M symbols, wherein the first and subsequent transmit frames have a 2*M*fnotch symbol rate, and, a decoder configured to form a set of output symbols by decoding the M receive symbols using at least one prior decoded transmit symbol.
In at least one embodiment the first transmit frame of M symbols is equal to the subsequent transmit frame of M symbols.
In at least one embodiment the first transmit frame of M symbols comprises all quiescent symbols.
In at least one embodiment the first transmit frame of M symbols represents an inverted version of the subsequent transmit frame of M symbols.
In at least one embodiment the first transmit frame of M symbols and the subsequent transmit frame of symbols are distinct.
In at least one embodiment the first transmit frame of M symbols comprises at least one prior decoded transmit symbol, and the decoder is further configured to generate at least one output symbol based on the superposition of the at least one prior decoded transmit symbol and the corresponding transmit symbol of the subsequent transmit frame.
In at least one embodiment the notch frequency is determined by an impedance anomaly.
In at least one embodiment the impedance anomaly is represented as a plurality of receivers connected to the multi-wire data bus.
In at least one embodiment the apparatus further comprises a set of input wires, each input wire configured to receive a set of input symbols, an encoder configured to generate a transmit data frame comprising M symbols and a subsequent transmit data frame comprising M symbols, and a driver configured to transmit the symbols of the transmit data frame on the wire of the multi-wire bus at a symbol rate of 2*M*fnotch, wherein fnotch is a notch frequency associated with the multi-wire bus and subsequently transmit the symbols of the subsequent transmit data frame at the symbol rate of 2*M*fnotch.
In at least one embodiment the corresponding transmit symbol represents a combination of at least 2 input symbols.
The examples provided herein describe interconnection of a transmitting device and multiple receiving devices in a multi-drop networked configuration for descriptive simplicity. However, this should not been seen in any way as limiting the scope of the described embodiments. The methods disclosed in this application are equally applicable to other interconnection topologies having significant frequency response notches and other communications protocols including full-duplex as well as half-duplex and simplex communications. Similarly, wired communications are used as illustrative examples, the embodiments also being applicable to other communication media including optical, capacitive, inductive, and wireless communications. Thus, descriptive terms such as “voltage” or “signal level” should be considered to include equivalents in other measurement systems, such as “optical intensity”, “RF modulation”, etc. As used herein, the term “physical signal” includes any suitable behavior and/or attribute of a physical phenomenon configured to convey information. Physical signals may be tangible and non-transitory.

We claim:
 
1. A method comprising:
receiving a frame of M symbols on a wire of a multi-wire bus, wherein M is an integer greater than or equal to 1, the multi-wire bus having an associated notch frequency fnotch, each receive symbol of the frame of receive symbols comprising a channel-induced superposition of a corresponding symbol in a first frame of M transmit symbols and a corresponding symbol in a subsequent frame of M transmit symbols, the first and subsequent frames of M transmit symbols having been transmitted at a symbol transmission rate of 2*M*fnotch, the symbol transmission rate causing, for each symbol in the received frame of M symbols, symbol-boundary alignment in the channel-induced superposition of the corresponding symbol in the first frame of M transmit symbols and the corresponding symbol in the subsequent frame of M transmit symbols; and
generating a set of output data based on the received frame of M symbols.


  
2. The method of claim 1, wherein the symbols in the first frame of M transmit symbols are all quiescent values.

  
3. The method of claim 1, wherein the symbols in the subsequent frame of M transmit symbols are a repeated set of symbols of the first frame of M transmit symbols.

  
4. The method of claim 1, wherein the symbols in the subsequent frame of M transmit symbols are an inverted version of the symbols of the first frame of M transmit symbols.

  
5. The method of claim 1, wherein the channel-induced superposition represents the corresponding symbol of the subsequent frame of M transmit symbols being added to a delayed and attenuated version of the corresponding symbol of the first frame of M transmit symbols.

  
6. The method of claim 1, wherein generating the set of output data comprises decoding a symbol in the received frame of M symbols based on at least one prior decoded symbol.

  
7. The method of claim 1, wherein the received frame of M symbols corresponds to the symbols of the subsequent frame of M transmit symbols, and wherein generating the output data comprises outputting the symbols of the subsequent frame of M transmit symbols.

  
8. The method of claim 1, wherein the associated notch frequency is determined by an impedance anomaly associated with the multi-wire bus.

  
9. The method of claim 1, wherein each symbol in the received frame of M symbols corresponds to a symbol of a set of symbols of a corresponding codeword, the set of symbols of the codeword comprising symbols received on two or more wires of the multi-wire bus, and wherein generating the output data comprises obtaining (i) a symbol in the received frame of M symbols and (ii) a symbol in a second received frame of M symbols received on a second wire of the multi-wire bus, and responsively generating the output data based on the obtained symbols.

  
10. The method of claim 1, wherein the output data corresponds to M bits, each bit determined by a corresponding symbol in the received frame of M symbols.

  
11. An apparatus comprising:
a wire of a multi-wire bus configured to receive a frame of M symbols, wherein M is an integer greater than or equal to 1, the multi-wire bus having an associated notch frequency fnotch, each receive symbol of the received frame of M symbols comprising a channel-induced superposition of a corresponding symbol in a first frame of M transmit symbols and a corresponding symbol in a subsequent frame of M transmit symbols, the first and subsequent frames of M transmit symbols having been transmitted at a symbol transmission rate of 2*M*fnotch, the symbol transmission rate causing, for each symbol in the frame of receive symbols, symbol-boundary alignment in the channel-induced superposition of the corresponding symbol in the first frame of M transmit symbols and the corresponding symbol in the subsequent frame of M transmit symbols; and
a decoder configured to generate a set of output data based on the received frame of M symbols.


  
12. The apparatus of claim 11, wherein the symbols in the first frame of M transmit symbols are all quiescent values.

  
13. The apparatus of claim 11, wherein the symbols in the subsequent frame of M transmit symbols are a repeated set of symbols of the first frame of M transmit symbols.

  
14. The apparatus of claim 11, wherein the symbols in the subsequent frame of M transmit symbols are an inverted version of the symbols of the first frame of M transmit symbols.

  
15. The apparatus of claim 11, wherein the channel-induced superposition represents the corresponding symbol of the subsequent frame of M transmit symbols being added to a delayed and attenuated version of the corresponding symbol of the first frame of M transmit symbols.

  
16. The apparatus of claim 11, wherein the decoder is configured to generate the set of output data by decoding a symbol in the received frame of M symbols based on at least one prior decoded symbol.

  
17. The apparatus of claim 11, wherein the received frame of M symbols corresponds to the symbols of the subsequent frame of M transmit symbols, and wherein the decoder is configured to output the symbols of the subsequent frame of M transmit symbols as the output data.

  
18. The apparatus of claim 11, wherein the associated notch frequency is determined by an impedance anomaly associated with the multi-wire bus.

  
19. The apparatus of claim 11, wherein each symbol in the received frame of M symbols corresponds to a symbol of a set of symbols of a corresponding codeword, the set of symbols of the codeword comprising symbols received on two or more wires of the multi-wire bus, and wherein the decoder is configured to obtain (i) a symbol in the received frame of M symbols and (ii) a symbol in a second received frame of M symbols received on a second wire of the multi-wire bus, and to responsively generate the output data based on the obtained symbols.

  
20. The apparatus of claim 11, wherein each symbol in the received frame of M symbols has one of two possible values, and wherein the decoder is configured to generate output bits based on the received frame of M symbols.